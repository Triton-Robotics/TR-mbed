<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TR-mbed: core/util/algorithms/eigen-3.4.0/unsupported/Eigen/CXX11/src/Tensor/TensorBlock.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TR-mbed
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li><li class="navelem"><a class="el" href="dir_459a7c9a427a2877b0db19c6b8d6e89d.html">util</a></li><li class="navelem"><a class="el" href="dir_2b91f87ecc8d5a52d8144fa162b6316d.html">algorithms</a></li><li class="navelem"><a class="el" href="dir_d26f9082d1b630c8fa4b82ce9b6be008.html">eigen-3.4.0</a></li><li class="navelem"><a class="el" href="dir_01abaef4fdd2408adb791b0d217b0c79.html">unsupported</a></li><li class="navelem"><a class="el" href="dir_9ff4d1aa5b19debad00b4f551d280be0.html">Eigen</a></li><li class="navelem"><a class="el" href="dir_145d070e2722bd5ab7a610685664d87f.html">CXX11</a></li><li class="navelem"><a class="el" href="dir_b660c23cd62918f59ee0779468ed6b92.html">src</a></li><li class="navelem"><a class="el" href="dir_b9583a64e63509297244e1e4cb2d8681.html">Tensor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TensorBlock.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="TensorBlock_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// This file is part of Eigen, a lightweight C++ template library</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// for linear algebra.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// This Source Code Form is subject to the terms of the Mozilla</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Public License v. 2.0. If a copy of the MPL was not distributed</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#ifndef EIGEN_CXX11_TENSOR_TENSOR_BLOCK_H</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#define EIGEN_CXX11_TENSOR_TENSOR_BLOCK_H</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceEigen.html">Eigen</a> {</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceinternal.html">internal</a> {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// Forward declarations for templates defined below.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar, <span class="keyword">typename</span> IndexType, <span class="keywordtype">int</span> NumDims, <span class="keywordtype">int</span> Layout&gt;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">class </span>TensorBlockIO;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Helper function to compute strides for densely stored buffer of given</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// dimensions.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// TODO(ezhulenev): We compute strides 1000 times in different evaluators, use</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// this function instead everywhere.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> Layout, <span class="keyword">typename</span> IndexType, <span class="keywordtype">int</span> NumDims&gt;</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">   26</a></span>&#160;<a class="code" href="Macros_8h.html#a1fdc6f94f20527c7275768d82b2eb9ce">EIGEN_ALWAYS_INLINE</a> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>(</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a>&amp; dimensions) {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordflow">if</span> (NumDims == 0) <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="comment">// TODO(ezhulenev): Use templates to unroll this loop (similar to</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="comment">// h_array_reduce in CXX11meta.h)? Benchmark it.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(Layout) == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="group__enums.html#ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62">ColMajor</a>)) {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>[0] = 1;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] * dimensions[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1];</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    }</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>[NumDims - 1] = 1;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = NumDims - 2; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; --<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] * dimensions[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> Layout, <span class="keyword">typename</span> IndexType, <span class="keywordtype">size_t</span> NumDims&gt;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#a2e3e14f49f4d1efa821b414fd8d49ba2">   49</a></span>&#160;<a class="code" href="Macros_8h.html#a1fdc6f94f20527c7275768d82b2eb9ce">EIGEN_ALWAYS_INLINE</a> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>(</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">const</span> <a class="code" href="classEigen_1_1array.html">Eigen::array&lt;IndexType, NumDims&gt;</a>&amp; dimensions) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">return</span> strides&lt;Layout&gt;(<a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a>(dimensions));</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> Layout, std::ptrdiff_t... Indices&gt;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#ab413382350925e41f35e13565e477e70">   55</a></span>&#160;<a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <a class="code" href="structEigen_1_1DSizes.html">DSizes</a>&lt;std::ptrdiff_t, <span class="keyword">sizeof</span>...(Indices)&gt; <a class="code" href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">strides</a>(</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">const</span> <a class="code" href="structEigen_1_1Sizes.html">Sizes&lt;Indices...&gt;</a>&amp; <a class="code" href="dense__solvers_8cpp.html#a3988aae35d2c3c4258c27d72f221c707">sizes</a>) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">return</span> strides&lt;Layout&gt;(<a class="code" href="structEigen_1_1DSizes.html">DSizes</a>&lt;std::ptrdiff_t, <span class="keyword">sizeof</span>...(Indices)&gt;(<a class="code" href="dense__solvers_8cpp.html#a3988aae35d2c3c4258c27d72f221c707">sizes</a>));</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// Tensor block shape type defines what are the shape preference for the blocks</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// extracted from the larger tensor.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// Example: blocks of 100 elements from the large 100x100 tensor:</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// - tensor: 100x100</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">// - target_block_size: 100</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// TensorBlockShapeType:</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//  - kUniformAllDims: 100 blocks of size 10x10</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//  - kSkewedInnerDims: 100 blocks of size 100x1 (or 1x100 depending on a column</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//                      or row major layout)</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">   73</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a> { <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941da7cb0f57bf813fcb63ae4bd2d81f37672">kUniformAllDims</a>, <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941daeaeafd3133ead02c0e0ffd56f2401a47">kSkewedInnerDims</a> };</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">   75</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a> {</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">   76</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>;  <span class="comment">// target block shape</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">   77</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">size</a>;                      <span class="comment">// target block size</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab30180b31f9d530f1f580d4709f8e4a0">   78</a></span>&#160;  <a class="code" href="classEigen_1_1TensorOpCost.html">TensorOpCost</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab30180b31f9d530f1f580d4709f8e4a0">cost_per_coeff</a>;      <span class="comment">// cost of computing a single block element</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#ifdef EIGEN_HIPCC</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// For HIPCC, we need to explicitly declare as a &quot;device fun&quot;, the constructor</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// which is implicitly invoked in the &quot;merge&quot; / &quot;any&quot; routines. else HIPCC</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">// errors out complaining about the lack of a matching constructor</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a>(<a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a> shape_type_, <span class="keywordtype">size_t</span> size_,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                  <a class="code" href="classEigen_1_1TensorOpCost.html">TensorOpCost</a> cost_)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    : <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>(shape_type_), <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">size</a>(size_), <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab30180b31f9d530f1f580d4709f8e4a0">cost_per_coeff</a>(cost_)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  {}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar&gt;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a5296ef45736ae165150e886da1190c26">   92</a></span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <span class="keyword">static</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a5296ef45736ae165150e886da1190c26">withShapeAndSize</a>(</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>, <span class="keywordtype">size_t</span> size_in_bytes,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <a class="code" href="classEigen_1_1TensorOpCost.html">TensorOpCost</a> cost) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">size</a> = <a class="code" href="namespaceEigen_1_1numext.html#a29d502349f2ec9897c808e65e0f96eb4">numext::maxi</a>(<span class="keywordtype">size_t</span>(1), size_in_bytes / <span class="keyword">sizeof</span>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>));</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>, <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">size</a>, cost};</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar&gt;</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a4ceb88ac7cc926bc50cd46a570903721">  100</a></span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <span class="keyword">static</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a4ceb88ac7cc926bc50cd46a570903721">withShapeAndSize</a>(</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>, <span class="keywordtype">size_t</span> size_in_bytes) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// This default cost per coefficient is valid for most materialized tensor</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// block evaluation implementations, because they typically just read</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// coefficients from the underlying tensor storage, and write to the tensor</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// block buffer (scratch or destination memory, reads and writes have linear</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// access pattern). We ignore the fixed cost of block evaluation, because in</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// practice it should negligible.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// Lazy block evaluation adds the cost of calling a functor for each</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// coefficient.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// All non-trivial block evaluation implementations must provide their own</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// cost approximation (e.g. shuffling inner dimension has a much higher cost</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// because it reads memory randomly, although the total number of moved</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// bytes is the same).</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> withShapeAndSize&lt;Scalar&gt;(<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>, size_in_bytes,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                    {<span class="comment">/*bytes_loaded=*/</span><span class="keyword">sizeof</span>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>),</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                     <span class="comment">/*bytes_stored=*/</span><span class="keyword">sizeof</span>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>),</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                     <span class="comment">/*compute_cycles=*/</span>0});</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar&gt;</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a636f7a3d1d332d6a8c1833c27d4f6cd9">  123</a></span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <span class="keyword">static</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a636f7a3d1d332d6a8c1833c27d4f6cd9">skewed</a>(</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> withShapeAndSize&lt;Scalar&gt;(<a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941daeaeafd3133ead02c0e0ffd56f2401a47">TensorBlockShapeType::kSkewedInnerDims</a>,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                    size_in_bytes);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar&gt;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9f58ddfb29853a07e1b454b42d1afc29">  130</a></span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <span class="keyword">static</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9f58ddfb29853a07e1b454b42d1afc29">uniform</a>(</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordtype">size_t</span> size_in_bytes) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> withShapeAndSize&lt;Scalar&gt;(<a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941da7cb0f57bf813fcb63ae4bd2d81f37672">TensorBlockShapeType::kUniformAllDims</a>,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                    size_in_bytes);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">  138</a></span>&#160;  <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">merge</a>(<span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a>&amp; lhs,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a>&amp; rhs) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">merge</a>(lhs.<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>, rhs.<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>),           <span class="comment">// shape_type</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">merge</a>(lhs.<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">size</a>, rhs.<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">size</a>),                       <span class="comment">// size</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">merge</a>(lhs.<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab30180b31f9d530f1f580d4709f8e4a0">cost_per_coeff</a>, rhs.<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab30180b31f9d530f1f580d4709f8e4a0">cost_per_coeff</a>)};  <span class="comment">// cost_per_coeff</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a1340b3e87af81081429e0bb1779dd970">  145</a></span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a>&amp; <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a1340b3e87af81081429e0bb1779dd970">addCostPerCoeff</a>(</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="classEigen_1_1TensorOpCost.html">TensorOpCost</a> cost) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab30180b31f9d530f1f580d4709f8e4a0">cost_per_coeff</a> += cost;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// This is a resource requirement that should be returned from expressions</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">// that do not have any block evaluation preference (e.g. default tensor</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// expression with raw buffer access).</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a></div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a8a5ae7f46e67679dffc4a94eed61fc43">  155</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a8a5ae7f46e67679dffc4a94eed61fc43">any</a>() {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941da7cb0f57bf813fcb63ae4bd2d81f37672">TensorBlockShapeType::kUniformAllDims</a>, 1, {0, 0, 0}};</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keyword">using</span> Requirements = <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keywordtype">size_t</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">merge</a>(<span class="keywordtype">size_t</span> lhs_size, <span class="keywordtype">size_t</span> rhs_size) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1numext.html#a29d502349f2ec9897c808e65e0f96eb4">numext::maxi</a>(lhs_size, rhs_size);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">merge</a>(<a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a> lhs, <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a> rhs) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> (lhs == <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941daeaeafd3133ead02c0e0ffd56f2401a47">TensorBlockShapeType::kSkewedInnerDims</a> ||</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            rhs == <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941daeaeafd3133ead02c0e0ffd56f2401a47">TensorBlockShapeType::kSkewedInnerDims</a>)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;               ? <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941daeaeafd3133ead02c0e0ffd56f2401a47">TensorBlockShapeType::kSkewedInnerDims</a></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;               : <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941da7cb0f57bf813fcb63ae4bd2d81f37672">TensorBlockShapeType::kUniformAllDims</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> TensorOpCost <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">merge</a>(TensorOpCost lhs_cost,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                TensorOpCost rhs_cost) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> lhs_cost + rhs_cost;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;};</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">// TensorBlockDescriptor specifies a block offset within a tensor and the block</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">// sizes along each of the tensor dimensions.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> NumDims, <span class="keyword">typename</span> IndexType = Eigen::Index&gt;</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">  188</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">TensorBlockDescriptor</a> {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">  190</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Dimensions</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// If we evaluate a Tensor assignment, and expression on the left, already has</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// a memory buffer, then we might do performance optimization, and evaluate</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// the root expression directly into the final output memory. Some time it&#39;s</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// possible to reuse it for materializing subexpressions inside an expression</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// tree, to to avoid dynamic memory allocation.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// The pointer type of the underlying storage is erased, because passing</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// Scalar type through all the expression evaluation layers is way too many</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">// templates. In practice destination buffer type should always match the</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// evaluated expression scalar type.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">  202</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">DestinationBuffer</a> {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeea">  204</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeea">DestinationBufferKind</a> : <span class="keywordtype">int</span> {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">// The above explicit specification of &quot;int&quot; as the enum basetype is</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="comment">// needed to get around a HIPCC link error (&quot;the field type is not</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="comment">// amp-compatible&quot;)</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="comment">// which is issued for class members with the enum type.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="comment">// TODO(rocm):</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="comment">// remove the &quot;int&quot; basetype once HIPCC has been fixed to not error out</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="comment">// in the above scenario.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="comment">// Destination buffer is not defined (`m_data` == nullptr).</span></div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa12fabbd09079e0d12bd594a138314492">  214</a></span>&#160;      <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa12fabbd09079e0d12bd594a138314492">kEmpty</a>,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="comment">// Tensor block defined by an owning tensor block descriptor can fit</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="comment">// contiguously into the destination buffer. In this case it&#39;s safe to</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="comment">// materialize tensor block in the destination buffer, wrap it in a</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="comment">// TensorMap, and use to build Eigen expression on top of it.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaaf829c94be635dff5f0ebd96d4c4ed45d">  220</a></span>&#160;      <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaaf829c94be635dff5f0ebd96d4c4ed45d">kContiguous</a>,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="comment">// Destination buffer strides do not match strides of the contiguously</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="comment">// stored block, and it&#39;s impossible to define a TensorMap over this</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="comment">// buffer. However if we are evaluating a root of an expression tree, we</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="comment">// still can materialize an output into this destination, because we can</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="comment">// guarantee that no one will ever access it through block API.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="comment">// In theory it is possible to build valid TensorStriding&lt;TensorMap&gt;</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="comment">// expression on top of this destination buffer, however it has</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="comment">// inefficient coeff/packet access, and defeats the purpose of fast block</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="comment">// evaluation API.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa3a9cefe0a5a00d14ef0b3dee0241bde2">kStrided</a></div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa3a9cefe0a5a00d14ef0b3dee0241bde2">  233</a></span>&#160;    };</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar&gt;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#adbde5dfe1b0ff2efc24d4ee9abf03099">  236</a></span>&#160;    <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#adbde5dfe1b0ff2efc24d4ee9abf03099">data</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(m_data_type_size == <span class="keyword">sizeof</span>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>));</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>*<span class="keyword">&gt;</span>(m_data);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">  241</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_strides; }</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">  242</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeea">DestinationBufferKind</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">kind</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_kind; }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a78356873301e5605e320c233f70b062d">  245</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">TensorBlockDescriptor</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">DestinationBuffer</a>() : m_data(NULL), m_data_type_size(0), m_kind(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa12fabbd09079e0d12bd594a138314492">kEmpty</a>) {}</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar&gt;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">DestinationBuffer</a>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#adbde5dfe1b0ff2efc24d4ee9abf03099">data</a>, <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>,</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                      <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeea">DestinationBufferKind</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">kind</a>)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        : m_data(static_cast&lt;void*&gt;(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#adbde5dfe1b0ff2efc24d4ee9abf03099">data</a>)),</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;          m_data_type_size(sizeof(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>)),</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;          m_strides(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>),</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          m_kind(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">kind</a>) {}</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> Layout, <span class="keyword">typename</span> Scalar&gt;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keyword">static</span> DestinationBuffer make(<span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">TensorBlockDescriptor</a>&amp; desc,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                  <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#adbde5dfe1b0ff2efc24d4ee9abf03099">data</a>, <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">return</span> DestinationBuffer(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#adbde5dfe1b0ff2efc24d4ee9abf03099">data</a>, <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>, kind&lt;Layout&gt;(desc, <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> Layout&gt;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keyword">static</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeea">DestinationBufferKind</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">kind</a>(<span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a78356873301e5605e320c233f70b062d">TensorBlockDescriptor</a>&amp; desc,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Dimensions</a>&amp; desc_dims = desc.dimensions();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Dimensions</a>&amp; desc_strides = internal::strides&lt;Layout&gt;(desc_dims);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> (desc_dims[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] == 1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">if</span> (desc_strides[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>]) <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa3a9cefe0a5a00d14ef0b3dee0241bde2">kStrided</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaaf829c94be635dff5f0ebd96d4c4ed45d">kContiguous</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// Storage pointer is type erased, to reduce template bloat, but we still</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// keep the size of the underlying element type for error checking.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">void</span>* m_data;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">size_t</span> m_data_type_size;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// Destination buffer dimensions always match the dimensions of a tensor</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// block descriptor it belongs to, however strides might be different.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Dimensions</a> m_strides;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeea">DestinationBufferKind</a> m_kind;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  };</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#aca5bf8c1fb818e5d982a57353b925d9b">  287</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#aca5bf8c1fb818e5d982a57353b925d9b">TensorBlockDescriptor</a>(<span class="keyword">const</span> IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>, <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">DestinationBuffer</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">destination</a>)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      : m_offset(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>),</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        m_dimensions(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>),</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        m_destination(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">destination</a>) {}</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#ae07d1bfe1b59a7d332a0ac8a95501062">  293</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#ae07d1bfe1b59a7d332a0ac8a95501062">TensorBlockDescriptor</a>(<span class="keyword">const</span> IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>, <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      : m_offset(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>),</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        m_dimensions(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>),</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        m_destination(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">DestinationBuffer</a>()) {}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">  298</a></span>&#160;  IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_offset; }</div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">  299</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_dimensions; }</div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a89c4bf7986164e0cfe376181e9032ed4">  300</a></span>&#160;  IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a89c4bf7986164e0cfe376181e9032ed4">dimension</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_dimensions[index]; }</div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a595bc99b9603c07e17f9f26a4e8d71f0">  301</a></span>&#160;  IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a595bc99b9603c07e17f9f26a4e8d71f0">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array_prod&lt;IndexType&gt;(m_dimensions); }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">  303</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">DestinationBuffer</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">destination</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_destination; }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> Layout, <span class="keyword">typename</span> Scalar&gt;</div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a3b775d906d4ccfa8586694513d8eb5fc">  306</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a3b775d906d4ccfa8586694513d8eb5fc">AddDestinationBuffer</a>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* dst_base, <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; dst_strides) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(dst_base != NULL);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    m_destination =</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        DestinationBuffer::template make&lt;Layout&gt;(*<span class="keyword">this</span>, dst_base, dst_strides);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> Layout, <span class="keyword">typename</span> Scalar, <span class="keyword">typename</span> DstStr<span class="keywordtype">id</span>esIndexType&gt;</div>
<div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a1813ea107b72b29db56c17f9c92d9e47">  313</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a1813ea107b72b29db56c17f9c92d9e47">AddDestinationBuffer</a>(</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* dst_base,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;DstStridesIndexType, NumDims&gt;</a>&amp; dst_strides) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// DSizes constructor will do index type promotion if it&#39;s safe.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    AddDestinationBuffer&lt;Layout&gt;(dst_base, <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Dimensions</a>(dst_strides));</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a71f0960688b9cf8110d42cae2814be1b">  320</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">TensorBlockDescriptor</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a71f0960688b9cf8110d42cae2814be1b">DropDestinationBuffer</a>() {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    m_destination.m_data = NULL;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    m_destination.m_kind = <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa12fabbd09079e0d12bd594a138314492">DestinationBuffer::kEmpty</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a6f411bdb93e39a081d05b21690494433">  326</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a6f411bdb93e39a081d05b21690494433">HasDestinationBuffer</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> m_destination.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">kind</a>() != <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa12fabbd09079e0d12bd594a138314492">DestinationBuffer::kEmpty</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// Returns a copy of `*this` with updated offset.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a0397df4c198c8c066fdcd01ce8e16bb7">  331</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">TensorBlockDescriptor</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a0397df4c198c8c066fdcd01ce8e16bb7">WithOffset</a>(IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#aca5bf8c1fb818e5d982a57353b925d9b">TensorBlockDescriptor</a>(<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>, m_dimensions, m_destination);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// Offset and dimensions are immutable after construction. Block descriptor</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// can only be mutated by adding or dropping destination.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keyword">const</span> IndexType m_offset;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Dimensions</a> m_dimensions;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  DestinationBuffer m_destination;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;};</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">// TensorBlockMapper is responsible for iterating over the blocks of a tensor.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> NumDims, <span class="keywordtype">int</span> Layout, <span class="keyword">typename</span> IndexType = Eigen::Index&gt;</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockMapper.html">  347</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorBlockMapper.html">TensorBlockMapper</a> {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">TensorBlockDescriptor&lt;NumDims, IndexType&gt;</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">BlockDescriptor</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab1fccf3cf2405dd787192efa88884559">  351</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab1fccf3cf2405dd787192efa88884559">Dimensions</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab608fa4a0164c82f35e7142dc766b437">  353</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab608fa4a0164c82f35e7142dc766b437">TensorBlockMapper</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockMapper.html#a2914ace578bce3ea2991255d66efeb0a">  354</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockMapper.html#a2914ace578bce3ea2991255d66efeb0a">TensorBlockMapper</a>(<span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a>&amp; dimensions,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">TensorBlockResourceRequirements</a>&amp; requirements)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      : m_tensor_dimensions(dimensions), m_requirements(requirements) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// Compute block dimensions and the total number of blocks.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    InitializeBlockDimensions();</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockMapper.html#a55d59205aa759a6a09d983d0da972415">  361</a></span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockMapper.html#a55d59205aa759a6a09d983d0da972415">blockCount</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span> m_total_block_count;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab740d683f57662751c42ba522121c8f1">  365</a></span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab740d683f57662751c42ba522121c8f1">blockTotalSize</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">return</span> m_block_dimensions.<a class="code" href="structEigen_1_1DSizes.html#aaa880c9fd53051ef158094e1e529e1f0">TotalSize</a>();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a>&amp;</div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockMapper.html#a26ad9feac42d276f9d4fe05c3a785dfa">  370</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockMapper.html#a26ad9feac42d276f9d4fe05c3a785dfa">blockDimensions</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> m_block_dimensions;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> BlockDescriptor</div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockMapper.html#afd53a52193236e8096f9f2e912a9807a">  375</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockMapper.html#afd53a52193236e8096f9f2e912a9807a">blockDescriptor</a>(IndexType block_index)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> isColMajor = Layout == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="group__enums.html#ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62">ColMajor</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    IndexType <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a> = 0;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> dimensions;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (NumDims == 0) <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">BlockDescriptor</a>(<a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>, dimensions);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// Iterate outer -&gt; inner dimensions.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = NumDims - 1; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; --<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> dim = isColMajor ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keyword">const</span> IndexType idx = block_index / m_block_strides[dim];</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      block_index -= idx * m_block_strides[dim];</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keyword">const</span> IndexType coord = idx * m_block_dimensions[dim];</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      dimensions[dim] = <a class="code" href="namespaceEigen_1_1numext.html#ab3b30bf0bcfa1ad91dbec75fabb3bea0">numext::mini</a>(m_tensor_dimensions[dim] - coord,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                     m_block_dimensions[dim]);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a> += coord * m_tensor_strides[dim];</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>, dimensions};</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">void</span> InitializeBlockDimensions() {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// Requested block shape and size.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">TensorBlockShapeType</a> shape_type = m_requirements.<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">shape_type</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    IndexType target_block_size =</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        numext::maxi&lt;IndexType&gt;(1, <span class="keyword">static_cast&lt;</span>IndexType<span class="keyword">&gt;</span>(m_requirements.<a class="code" href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">size</a>));</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    IndexType tensor_size = m_tensor_dimensions.<a class="code" href="structEigen_1_1DSizes.html#aaa880c9fd53051ef158094e1e529e1f0">TotalSize</a>();</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Corner case: one of the dimensions is zero. Logic below is too complex</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// to handle this case on a general basis, just use unit block size.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// Note: we must not yield blocks with zero dimensions (recipe for</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// overflows/underflows, divisions by zero and NaNs later).</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (tensor_size == 0) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        m_block_dimensions[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 1;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      m_total_block_count = 0;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// If tensor fits into a target block size, evaluate it as a single block.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (tensor_size &lt;= target_block_size) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      m_block_dimensions = m_tensor_dimensions;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      m_total_block_count = 1;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="comment">// The only valid block index is `0`, and in this case we do not need</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="comment">// to compute real strides for tensor or blocks (see blockDescriptor).</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        m_tensor_strides[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        m_block_strides[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 1;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> isColMajor = Layout == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="group__enums.html#ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62">ColMajor</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Block shape skewed towards inner dimension.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (shape_type == <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941daeaeafd3133ead02c0e0ffd56f2401a47">TensorBlockShapeType::kSkewedInnerDims</a>) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      IndexType coeff_to_allocate = target_block_size;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dim = isColMajor ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        m_block_dimensions[dim] =</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <a class="code" href="namespaceEigen_1_1numext.html#ab3b30bf0bcfa1ad91dbec75fabb3bea0">numext::mini</a>(coeff_to_allocate, m_tensor_dimensions[dim]);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        coeff_to_allocate = <a class="code" href="namespaceEigen.html#a13ec9832931270b80961236d30f6d2e3">divup</a>(</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            coeff_to_allocate,</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <a class="code" href="namespaceEigen_1_1numext.html#a29d502349f2ec9897c808e65e0f96eb4">numext::maxi</a>(<span class="keyword">static_cast&lt;</span>IndexType<span class="keyword">&gt;</span>(1), m_block_dimensions[dim]));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(coeff_to_allocate == 1);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shape_type == <a class="code" href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941da7cb0f57bf813fcb63ae4bd2d81f37672">TensorBlockShapeType::kUniformAllDims</a>) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="comment">// Tensor will not fit within &#39;target_block_size&#39; budget: calculate tensor</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="comment">// block dimension sizes based on &quot;square&quot; dimension size target.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keyword">const</span> IndexType dim_size_target = convert_index&lt;IndexType&gt;(</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          <a class="code" href="namespaceEigen_1_1bfloat16__impl.html#aadf08601dbe94964a06487ba453a0436">std::pow</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(target_block_size),</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                   1.0f / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(m_block_dimensions.<a class="code" href="structEigen_1_1DSizes.html#ab4c9d5b27ab311e394a886e5bb99f35a">rank</a>())));</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="comment">// TODO(andydavis) Adjust the inner most &#39;block_dim_size&#39; to make it</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">// a multiple of the packet size. Note that reducing</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">// &#39;block_dim_size&#39; in this manner can increase the number of</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">// blocks, and so will amplify any per-block overhead.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        m_block_dimensions[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <a class="code" href="namespaceEigen_1_1numext.html#ab3b30bf0bcfa1ad91dbec75fabb3bea0">numext::mini</a>(dim_size_target, m_tensor_dimensions[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">// Add any un-allocated coefficients to inner dimension(s).</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      IndexType total_size = m_block_dimensions.<a class="code" href="structEigen_1_1DSizes.html#aaa880c9fd53051ef158094e1e529e1f0">TotalSize</a>();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dim = isColMajor ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> (m_block_dimensions[dim] &lt; m_tensor_dimensions[dim]) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          <span class="keyword">const</span> IndexType total_size_other_dims =</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;              total_size / m_block_dimensions[dim];</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          <span class="keyword">const</span> IndexType alloc_avail =</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;              divup&lt;IndexType&gt;(target_block_size, total_size_other_dims);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;          <span class="keywordflow">if</span> (alloc_avail == m_block_dimensions[dim]) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="comment">// Insufficient excess coefficients to allocate.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          m_block_dimensions[dim] =</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;              <a class="code" href="namespaceEigen_1_1numext.html#ab3b30bf0bcfa1ad91dbec75fabb3bea0">numext::mini</a>(m_tensor_dimensions[dim], alloc_avail);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          total_size = total_size_other_dims * m_block_dimensions[dim];</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(<span class="keyword">false</span>);  <span class="comment">// unknown block shape</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(m_block_dimensions.<a class="code" href="structEigen_1_1DSizes.html#aaa880c9fd53051ef158094e1e529e1f0">TotalSize</a>() &gt;=</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                 numext::mini&lt;IndexType&gt;(target_block_size,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                         m_tensor_dimensions.<a class="code" href="structEigen_1_1DSizes.html#aaa880c9fd53051ef158094e1e529e1f0">TotalSize</a>()));</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// Calculate block counts by dimension and total block count.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    DSizes&lt;IndexType, NumDims&gt; block_count;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      block_count[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="namespaceEigen.html#a13ec9832931270b80961236d30f6d2e3">divup</a>(m_tensor_dimensions[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>], m_block_dimensions[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    m_total_block_count = <a class="code" href="namespaceEigen_1_1internal.html#a3b99e338d92a91c8b3f89d32d0ca2c39">array_prod</a>(block_count);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// Calculate block strides (used for enumerating blocks).</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    m_tensor_strides = strides&lt;Layout&gt;(m_tensor_dimensions);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    m_block_strides = strides&lt;Layout&gt;(block_count);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  DSizes&lt;IndexType, NumDims&gt; m_tensor_dimensions;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  TensorBlockResourceRequirements m_requirements;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  DSizes&lt;IndexType, NumDims&gt; m_block_dimensions;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  IndexType m_total_block_count;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  DSizes&lt;IndexType, NumDims&gt; m_tensor_strides;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  DSizes&lt;IndexType, NumDims&gt; m_block_strides;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;};</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">// TensorBlockScratchAllocator is responsible for allocating temporary buffers</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">// for block evaluation (output or input block materialization). Given that</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">// Eigen expression traversal order is deterministic, all temporary allocations</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">// are happening in the same order, and usually have exactly the same size.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">// Scratch allocator keeps a trace of all dynamic allocations, and after the</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">// first block evaluation is completed, we should be able to reuse all the</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">// temporary buffers for the next block evaluation.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Device&gt;</div>
<div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html">  525</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html">TensorBlockScratchAllocator</a> {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#acd8c640849755c780d81026114a84307">  527</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#acd8c640849755c780d81026114a84307">TensorBlockScratchAllocator</a>(<span class="keyword">const</span> Device&amp; device)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      : m_device(device), m_allocation_index(0) {}</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#a7268f8d404084ddebb6bac735a54690e">  530</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#a7268f8d404084ddebb6bac735a54690e">~TensorBlockScratchAllocator</a>() {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; m_allocations.size(); ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      m_device.deallocate(m_allocations[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].ptr);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#a185d786522c5544a7d0df226550f4561">  536</a></span>&#160;  <span class="keywordtype">void</span>* <a class="code" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#a185d786522c5544a7d0df226550f4561">allocate</a>(<span class="keywordtype">size_t</span> <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>) {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">// TODO(ezhulenev): Remove when replaced with inlined vector.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (m_allocations.capacity() == 0) m_allocations.reserve(8);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// Check if we already have an existing allocation att current index.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_allocations = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(m_allocations.size());</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> has_allocation = m_allocation_index &lt; num_allocations;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// Allocation index can&#39;t be larger than the number of allocations.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(m_allocation_index &lt;= num_allocations);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="comment">// If we have existing allocation, and its size is larger or equal to</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// requested size, we do nothing.</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// If current allocation can&#39;t fit requested size, we deallocate it, and</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// replace with a larger allocation.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (has_allocation &amp;&amp; m_allocations[m_allocation_index].<a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a> &lt; <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      m_device.deallocate(m_allocations[m_allocation_index].ptr);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      m_allocations[m_allocation_index].ptr = m_device.allocate(<a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      m_allocations[m_allocation_index].size = <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">// Make a new allocation if we don&#39;t have and existing one.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (!has_allocation) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      Allocation allocation;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      allocation.ptr = m_device.allocate(<a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      allocation.size = <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      m_allocations.push_back(allocation);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(m_allocations[m_allocation_index].ptr != NULL);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(m_allocations[m_allocation_index].<a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a> &gt;= <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> m_allocations[m_allocation_index++].ptr;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#ad6be75c9647956be001485a15c341035">  572</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#ad6be75c9647956be001485a15c341035">reset</a>() { m_allocation_index = 0; }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keyword">struct </span>Allocation {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordtype">void</span>* ptr;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  };</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keyword">const</span> Device&amp; m_device;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordtype">int</span> m_allocation_index;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// TODO(ezhulenev): This should be an inlined vector.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  std::vector&lt;Allocation&gt; m_allocations;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;};</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">// TensorBlockKind represents all possible block kinds, that can be produced by</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">// TensorEvaluator::evalBlock function.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">  589</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">TensorBlockKind</a> {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// Tensor block that is a lazy expression that must be assigned to a</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// destination using TensorBlockAssign.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8adc8c4fe70ac3f3ce28a1fc78a1db58b7">  592</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8adc8c4fe70ac3f3ce28a1fc78a1db58b7">kExpr</a>,</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// Tensor block that is a view into a memory buffer owned by an underlying</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="comment">// Tensor expression (e.g. it can be a view into a Tensor buffer).</span></div>
<div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8ad9cdef4654e3f9c6e2129aac107fa635">  596</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8ad9cdef4654e3f9c6e2129aac107fa635">kView</a>,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// Tensor block that was materialized in a scratch memory buffer, allocated</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// with TensorBlockScratchAllocator. This block must be copied to a</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// destination, similar to a block of `kExpr` type.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a393f3571f83b599927b69e2478118de3">  601</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a393f3571f83b599927b69e2478118de3">kMaterializedInScratch</a>,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// Tensor block that was materialized directly into the final output memory</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// buffer. For example if the left side of an assignment is a Tensor, we can</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// directly materialize the block in the destination memory.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// If strides in the output buffer do not match tensor block strides, the</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// Tensor expression will be invalid, and should not be used by</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// TensorBlockAssign or for constructing another block expression.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a0b0a79f3695a20ad5ccaaa175bcedc63">kMaterializedInOutput</a></div>
<div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a0b0a79f3695a20ad5ccaaa175bcedc63">  611</a></span>&#160;};</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">// TensorBlockNotImplemented should be used to defined TensorBlock typedef in</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">// TensorEvaluators that do not support block evaluation.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockNotImplemented.html">  617</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorBlockNotImplemented.html">TensorBlockNotImplemented</a> {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockNotImplemented.html#a0e8e3ce2354260713cb3e954dc8c9e11">  619</a></span>&#160;  <span class="keyword">typedef</span> <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockNotImplemented.html#a0e8e3ce2354260713cb3e954dc8c9e11">XprType</a>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;};</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">// XprScalar extracts Scalar type from the Eigen expressions (if expression type</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">// is not void). It&#39;s required to be able to define lazy block expression for</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">// argument types, that do not support block evaluation.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> XprType&gt;</div>
<div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1XprScalar.html">  628</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structEigen_1_1internal_1_1XprScalar.html">XprScalar</a> {</div>
<div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1XprScalar.html#a5fff9f58106ea14bc0855091d5d07f5f">  629</a></span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">XprType::Scalar</a> <a class="code" href="structEigen_1_1internal_1_1XprScalar.html#a5fff9f58106ea14bc0855091d5d07f5f">type</a>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;};</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1XprScalar_3_01void_01_4.html">  632</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structEigen_1_1internal_1_1XprScalar.html">XprScalar</a>&lt;void&gt; {</div>
<div class="line"><a name="l00633"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1XprScalar_3_01void_01_4.html#add32bf8f49481e81ed31ee5fa49fc14b">  633</a></span>&#160;  <span class="keyword">typedef</span> <span class="keywordtype">void</span> <a class="code" href="structEigen_1_1internal_1_1XprScalar_3_01void_01_4.html#add32bf8f49481e81ed31ee5fa49fc14b">type</a>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;};</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">// TensorMaterializedBlock is a fully evaluated block of the original tensor,</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">// and XprType is just a TensorMap over the data. This block type is typically</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">// used to materialize blocks of tensor expressions, that can&#39;t be efficiently</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">// represented as lazy Tensor expressions with fast coeff/packet operations,</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">// e.g. we materialize all broadcasts into evaluated blocks.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">// TensorMaterializedBlock does not own its memory buffer, it&#39;s either a memory</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">// buffer that backs the original expression (e.g. block is just a view into a</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">// Tensor), or a memory buffer allocated with scratch allocator, and in this</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">// case the scratch allocator will deallocate it at the end of block based</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">// expression execution.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">// If the block was evaluated directly into the output buffer, and strides in</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">// the output buffer do not match block strides, the TensorMap expression will</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">// be invalid, and should never be used in block assignment or any other tensor</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">// expression.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>, <span class="keywordtype">int</span> NumDims, <span class="keywordtype">int</span> Layout,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;          <span class="keyword">typename</span> IndexType = <a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Eigen::Index</a>&gt;</div>
<div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html">  656</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html">TensorMaterializedBlock</a> {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#acfa1c6985f1937b6b752cf08949f8784">  658</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#acfa1c6985f1937b6b752cf08949f8784">Dimensions</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#adfcae699fdac72f35fb6fd3a6d7c9182">  659</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classEigen_1_1TensorMap.html">TensorMap&lt;const Tensor&lt;Scalar, NumDims, Layout&gt;</a> &gt; <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#adfcae699fdac72f35fb6fd3a6d7c9182">XprType</a>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a11a75b6c267b92d5def380e14003ec53">  661</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a11a75b6c267b92d5def380e14003ec53">TensorMaterializedBlock</a>(<a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">TensorBlockKind</a> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a41110cf737c9b69b65e96ad86c82706f">kind</a>, <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a2fab74c37ff0ac88ca605600d453d65d">data</a>,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                          <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; dimensions, <span class="keywordtype">bool</span> valid_expr = <span class="keyword">true</span>)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      : m_kind(<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a41110cf737c9b69b65e96ad86c82706f">kind</a>),</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        m_data(<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a2fab74c37ff0ac88ca605600d453d65d">data</a>),</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        m_dimensions(dimensions),</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        m_expr(m_data, m_dimensions),</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        m_valid_expr(valid_expr) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(m_kind == <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8ad9cdef4654e3f9c6e2129aac107fa635">internal::TensorBlockKind::kView</a> ||</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                 m_kind == <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a393f3571f83b599927b69e2478118de3">internal::TensorBlockKind::kMaterializedInScratch</a> ||</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                 m_kind == <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a0b0a79f3695a20ad5ccaaa175bcedc63">internal::TensorBlockKind::kMaterializedInOutput</a>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a41110cf737c9b69b65e96ad86c82706f">  673</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">TensorBlockKind</a> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a41110cf737c9b69b65e96ad86c82706f">kind</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_kind; }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// NOTE(ezhulenev): Returning XprType by value like in other block types</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// causes asan failures. The theory is that XprType::Nested doesn&#39;t work</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// properly for TensorMap.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a39f30b65a8f7156ff9d3a120104a2b60">  677</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classEigen_1_1TensorMap.html">XprType</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a39f30b65a8f7156ff9d3a120104a2b60">expr</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(m_valid_expr);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">return</span> m_expr;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  }</div>
<div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a2fab74c37ff0ac88ca605600d453d65d">  681</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a2fab74c37ff0ac88ca605600d453d65d">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_data; }</div>
<div class="line"><a name="l00682"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#afbaf016c3620e52e420ed8aeede311b6">  682</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#afbaf016c3620e52e420ed8aeede311b6">cleanup</a>() {}</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#acc64f9a71608566299847d2a34576647">  684</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">internal::TensorBlockDescriptor&lt;NumDims, IndexType&gt;</a> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#acc64f9a71608566299847d2a34576647">TensorBlockDesc</a>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">// TensorMaterializedBlock can be backed by different types of storage:</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">//   (1) Contiguous block of memory allocated with scratch allocator.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">//   (2) Contiguous block of memory reused from tensor block descriptor</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">//       destination buffer.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">//   (3) Strided block of memory reused from tensor block descriptor</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">//       destination buffer.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">  694</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">Storage</a> {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#aa59c35d0ac01ca7a8f9c5ba4b2e362fd">  696</a></span>&#160;    <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#aa59c35d0ac01ca7a8f9c5ba4b2e362fd">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_data; }</div>
<div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#affdc2d021d46d306f973c561e87c6d35">  697</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#affdc2d021d46d306f973c561e87c6d35">dimensions</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_dimensions; }</div>
<div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#af7f51765c3e5ed2fca9a2a444047b2d9">  698</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#af7f51765c3e5ed2fca9a2a444047b2d9">strides</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_strides; }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#a45777db05fa2a1a4fc633ea40ed9b9e1">  700</a></span>&#160;    <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html">TensorMaterializedBlock</a> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#a45777db05fa2a1a4fc633ea40ed9b9e1">AsTensorMaterializedBlock</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#a5940929c98f9422770b65aade7aa20f7">TensorMaterializedBlock</a>(</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;          m_materialized_in_output</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;              ? <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a0b0a79f3695a20ad5ccaaa175bcedc63">internal::TensorBlockKind::kMaterializedInOutput</a></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;              : <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a393f3571f83b599927b69e2478118de3">internal::TensorBlockKind::kMaterializedInScratch</a>,</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          m_data, m_dimensions, !m_strided_storage);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#a5940929c98f9422770b65aade7aa20f7">  709</a></span>&#160;    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html">TensorMaterializedBlock</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">Storage</a>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#aa59c35d0ac01ca7a8f9c5ba4b2e362fd">data</a>, <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#affdc2d021d46d306f973c561e87c6d35">dimensions</a>,</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#af7f51765c3e5ed2fca9a2a444047b2d9">strides</a>, <span class="keywordtype">bool</span> materialized_in_output,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <span class="keywordtype">bool</span> strided_storage)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        : m_data(<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#aa59c35d0ac01ca7a8f9c5ba4b2e362fd">data</a>),</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          m_dimensions(<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#affdc2d021d46d306f973c561e87c6d35">dimensions</a>),</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;          m_strides(<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#af7f51765c3e5ed2fca9a2a444047b2d9">strides</a>),</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;          m_materialized_in_output(materialized_in_output),</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          m_strided_storage(strided_storage) {}</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* m_data;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a> m_dimensions;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a> m_strides;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordtype">bool</span> m_materialized_in_output;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">bool</span> m_strided_storage;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  };</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">// Creates a storage for materialized block either from the block descriptor</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// destination buffer, or allocates a new buffer with scratch allocator.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> TensorBlockScratch&gt;</div>
<div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a5709458a007b8c05e77842981b731535">  730</a></span>&#160;  <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">static</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">Storage</a> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a5709458a007b8c05e77842981b731535">prepareStorage</a>(</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">TensorBlockDesc</a>&amp; desc, TensorBlockScratch&amp; scratch,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordtype">bool</span> allow_strided_storage = <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// Try to reuse destination as an output block buffer.</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">TensorBlockDesc::DestinationBuffer</a> DestinationBuffer;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">destination</a>().<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">kind</a>() == DestinationBuffer::kContiguous) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* buffer = desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">destination</a>().template data&lt;Scalar&gt;();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a71f0960688b9cf8110d42cae2814be1b">DropDestinationBuffer</a>();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">Storage</a>(buffer, desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>(),</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                     internal::strides&lt;Layout&gt;(desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>()),</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                     <span class="comment">/*materialized_in_output=*/</span><span class="keyword">true</span>,</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                     <span class="comment">/*strided_storage=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">destination</a>().<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">kind</a>() == DestinationBuffer::kStrided &amp;&amp;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;               allow_strided_storage) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* buffer = desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">destination</a>().template data&lt;Scalar&gt;();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a71f0960688b9cf8110d42cae2814be1b">DropDestinationBuffer</a>();</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">Storage</a>(buffer, desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>(), desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">destination</a>().<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">strides</a>(),</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                     <span class="comment">/*materialized_in_output=*/</span><span class="keyword">true</span>, <span class="comment">/*strided_storage=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordtype">void</span>* mem = scratch.allocate(desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a595bc99b9603c07e17f9f26a4e8d71f0">size</a>() * <span class="keyword">sizeof</span>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>));</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">Storage</a>(<span class="keyword">static_cast&lt;</span><a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>*<span class="keyword">&gt;</span>(mem), desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>(),</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                     internal::strides&lt;Layout&gt;(desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>()),</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                     <span class="comment">/*materialized_in_output=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                     <span class="comment">/*strided_storage=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="comment">// Creates a materialized block for the given descriptor from a memory buffer.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataDimensions, <span class="keyword">typename</span> TensorBlockScratch&gt;</div>
<div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a28f1d13d562525c80214efbfe02b1faf">  762</a></span>&#160;  <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">static</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html">TensorMaterializedBlock</a> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a28f1d13d562525c80214efbfe02b1faf">materialize</a>(</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a2fab74c37ff0ac88ca605600d453d65d">data</a>, <span class="keyword">const</span> DataDimensions&amp; data_dims,</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">TensorBlockDesc</a>&amp; desc, TensorBlockScratch&amp; scratch) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(<a class="code" href="structEigen_1_1internal_1_1array__size.html">array_size&lt;DataDimensions&gt;::value</a> == desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>().<a class="code" href="classEigen_1_1array.html#a332ffdbd5ae2690a6f983959baecc972">size</a>());</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="comment">// If a tensor block dimensions covers a contiguous block of the underlying</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="comment">// memory, we can skip block buffer memory allocation, and construct a block</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">// from existing `data` memory buffer.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// Example: (RowMajor layout)</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="comment">//   data_dims:          [11, 12, 13, 14]</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="comment">//   desc.dimensions():  [1,   1,  3, 14]</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="comment">// In this case we can construct a TensorBlock starting at</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="comment">// `data + desc.offset()`, with a `desc.dimensions()` block sizes.</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> is_col_major = Layout == <a class="code" href="group__enums.html#ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62">ColMajor</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">// Find out how many inner dimensions have a matching size.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordtype">int</span> num_matching_inner_dims = 0;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordtype">int</span> dim = is_col_major ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">if</span> (data_dims[dim] != desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>()[dim]) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      ++num_matching_inner_dims;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment">// All the outer dimensions must be of size `1`, except a single dimension</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="comment">// before the matching inner dimension (`3` in the example above).</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordtype">bool</span> can_use_direct_access = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = num_matching_inner_dims + 1; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="keywordtype">int</span> dim = is_col_major ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">if</span> (desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a89c4bf7986164e0cfe376181e9032ed4">dimension</a>(dim) != 1) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        can_use_direct_access = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">if</span> (can_use_direct_access) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* block_start = <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a2fab74c37ff0ac88ca605600d453d65d">data</a> + desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a11a75b6c267b92d5def380e14003ec53">TensorMaterializedBlock</a>(<a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8ad9cdef4654e3f9c6e2129aac107fa635">internal::TensorBlockKind::kView</a>,</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                                     block_start, desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">dimensions</a>());</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="comment">// Reuse destination buffer or allocate new buffer with scratch allocator.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">Storage</a> storage = <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a5709458a007b8c05e77842981b731535">prepareStorage</a>(desc, scratch);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keyword">typedef</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html">internal::TensorBlockIO&lt;Scalar, IndexType, NumDims, Layout&gt;</a></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;          <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html">TensorBlockIO</a>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html">TensorBlockIO::Dst</a> TensorBlockIODst;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html">TensorBlockIO::Src</a> TensorBlockIOSrc;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      TensorBlockIOSrc src(internal::strides&lt;Layout&gt;(<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#acfa1c6985f1937b6b752cf08949f8784">Dimensions</a>(data_dims)),</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                           <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a2fab74c37ff0ac88ca605600d453d65d">data</a>, desc.<a class="code" href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">offset</a>());</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      TensorBlockIODst dst(storage.<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#affdc2d021d46d306f973c561e87c6d35">dimensions</a>(), storage.<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#af7f51765c3e5ed2fca9a2a444047b2d9">strides</a>(),</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                           storage.<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#aa59c35d0ac01ca7a8f9c5ba4b2e362fd">data</a>());</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html#a3eed5c23e9578f8ed8b2946045ab1d68">TensorBlockIO::Copy</a>(dst, src);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">return</span> storage.<a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#a45777db05fa2a1a4fc633ea40ed9b9e1">AsTensorMaterializedBlock</a>();</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">TensorBlockKind</a> m_kind;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* m_data;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#acfa1c6985f1937b6b752cf08949f8784">Dimensions</a> m_dimensions;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <a class="code" href="classEigen_1_1CwiseBinaryOp.html">XprType</a> m_expr;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordtype">bool</span> m_valid_expr;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;};</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">// TensorCwiseUnaryBlock is a lazy tensor expression block that applies UnaryOp</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">// functor to the blocks produced by the underlying Tensor expression.</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> UnaryOp, <span class="keyword">typename</span> ArgTensorBlock&gt;</div>
<div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html">  835</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html">TensorCwiseUnaryBlock</a> {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> NoArgBlockAccess =</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <a class="code" href="structEigen_1_1internal_1_1is__void.html">internal::is_void&lt;typename ArgTensorBlock::XprType&gt;::value</a>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1conditional.html">conditional</a>&lt;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      NoArgBlockAccess, void,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <a class="code" href="classEigen_1_1TensorCwiseUnaryOp.html">TensorCwiseUnaryOp&lt;UnaryOp, const typename ArgTensorBlock::XprType&gt;</a> &gt;::</div>
<div class="line"><a name="l00843"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a6108e90a8e8acc754f67663c1f1fbc79">  843</a></span>&#160;      type <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a6108e90a8e8acc754f67663c1f1fbc79">XprType</a>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a3c47131b880d8b520963d58365a29ba9">  845</a></span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1XprScalar.html#a5fff9f58106ea14bc0855091d5d07f5f">XprScalar&lt;XprType&gt;::type</a> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a3c47131b880d8b520963d58365a29ba9">Scalar</a>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a57ad42f1e4929ee99e0f9206384bcf6e">  847</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a57ad42f1e4929ee99e0f9206384bcf6e">TensorCwiseUnaryBlock</a>(<span class="keyword">const</span> ArgTensorBlock&amp; arg_block, <span class="keyword">const</span> UnaryOp&amp; functor)</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      : m_arg_block(arg_block), m_functor(functor) {}</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#ad7c990bd89549d1b96765ec83097b649">  850</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">TensorBlockKind</a> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#ad7c990bd89549d1b96765ec83097b649">kind</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8adc8c4fe70ac3f3ce28a1fc78a1db58b7">internal::TensorBlockKind::kExpr</a>; }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#af4807056750b95490191ad22a718f2b2">  852</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorLazyEvaluatorWritable.html">XprType</a> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#af4807056750b95490191ad22a718f2b2">expr</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a6108e90a8e8acc754f67663c1f1fbc79">XprType</a>(m_arg_block.expr(), m_functor); }</div>
<div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#acbda0ae896bb91a286b3bb855d5d2563">  853</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a3c47131b880d8b520963d58365a29ba9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#acbda0ae896bb91a286b3bb855d5d2563">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#ac3be82467362f3078b3231e56b1df7a3">  854</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#ac3be82467362f3078b3231e56b1df7a3">cleanup</a>() { m_arg_block.cleanup(); }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  ArgTensorBlock m_arg_block;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  UnaryOp m_functor;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;};</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">// TensorCwiseUnaryBlock is a lazy tensor expression block that applies BinaryOp</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">// functor to the blocks produced by the underlying Tensor expression.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> BinaryOp, <span class="keyword">typename</span> LhsTensorBlock, <span class="keyword">typename</span> RhsTensorBlock&gt;</div>
<div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html">  866</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html">TensorCwiseBinaryBlock</a> {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> NoArgBlockAccess =</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <a class="code" href="structEigen_1_1internal_1_1is__void.html">internal::is_void&lt;typename LhsTensorBlock::XprType&gt;::value</a> ||</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="structEigen_1_1internal_1_1is__void.html">internal::is_void&lt;typename RhsTensorBlock::XprType&gt;::value</a>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1conditional.html">conditional</a>&lt;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      NoArgBlockAccess, void,</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <a class="code" href="classEigen_1_1TensorCwiseBinaryOp.html">TensorCwiseBinaryOp</a>&lt;BinaryOp, <span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="nestbyvalue_8cpp.html#a5aefae852e88ada71d9dfc8da1fc33bf">LhsTensorBlock::XprType</a>,</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                          <span class="keyword">const</span> <span class="keyword">typename</span> <a class="code" href="nestbyvalue_8cpp.html#a5aefae852e88ada71d9dfc8da1fc33bf">RhsTensorBlock::XprType</a>&gt; &gt;::type</div>
<div class="line"><a name="l00876"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#ab0eafaae4c3ac22417542f2209cb9ccc">  876</a></span>&#160;      <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#ab0eafaae4c3ac22417542f2209cb9ccc">XprType</a>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a0e821e06afce74b7d408e01381dee515">  878</a></span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1XprScalar.html#a5fff9f58106ea14bc0855091d5d07f5f">XprScalar&lt;XprType&gt;::type</a> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a0e821e06afce74b7d408e01381dee515">Scalar</a>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a1713545d427df172f2074afbcfbba686">  880</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a1713545d427df172f2074afbcfbba686">TensorCwiseBinaryBlock</a>(<span class="keyword">const</span> LhsTensorBlock&amp; left_block,</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                         <span class="keyword">const</span> RhsTensorBlock&amp; right_block,</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                         <span class="keyword">const</span> BinaryOp&amp; functor)</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      : m_left_block(left_block),</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        m_right_block(right_block),</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        m_functor(functor) {}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a1a387ce2b21b23f2edcd9648123e7923">  887</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">TensorBlockKind</a> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a1a387ce2b21b23f2edcd9648123e7923">kind</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8adc8c4fe70ac3f3ce28a1fc78a1db58b7">internal::TensorBlockKind::kExpr</a>; }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a388efe0b53d1cc2ded06f6d719858d7b">  889</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorLazyEvaluatorWritable.html">XprType</a> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a388efe0b53d1cc2ded06f6d719858d7b">expr</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#ab0eafaae4c3ac22417542f2209cb9ccc">XprType</a>(m_left_block.expr(), m_right_block.expr(), m_functor);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a936ac97c99abc1531ec4ae2fbc7c39ac">  893</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a0e821e06afce74b7d408e01381dee515">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a936ac97c99abc1531ec4ae2fbc7c39ac">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a76e159651c01aa3bdda5d0834bdc9e29">  895</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a76e159651c01aa3bdda5d0834bdc9e29">cleanup</a>() {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    m_left_block.cleanup();</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    m_right_block.cleanup();</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  LhsTensorBlock m_left_block;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  RhsTensorBlock m_right_block;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  BinaryOp m_functor;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;};</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">// TensorUnaryExprBlock is a lazy tensor expression block that can construct</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">// an arbitrary tensor expression from a block of the underlying type (this is a</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">// generalization of the TensorCwiseUnaryBlock for arbitrary expressions).</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> BlockFactory, <span class="keyword">typename</span> ArgTensorBlock&gt;</div>
<div class="line"><a name="l00912"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html">  912</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html">TensorUnaryExprBlock</a> {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="nestbyvalue_8cpp.html#a5aefae852e88ada71d9dfc8da1fc33bf">ArgTensorBlock::XprType</a> ArgXprType;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> NoArgBlockAccess = <a class="code" href="structEigen_1_1internal_1_1is__void.html">internal::is_void&lt;ArgXprType&gt;::value</a>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1conditional.html">conditional</a>&lt;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      NoArgBlockAccess, void,</div>
<div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a8bb5b2fee0acd014629e8404fce3552c">  919</a></span>&#160;      <span class="keyword">typename</span> BlockFactory::template <a class="code" href="classEigen_1_1internal_1_1TensorLazyEvaluatorWritable.html">XprType&lt;ArgXprType&gt;::type</a>&gt;::type <a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a8bb5b2fee0acd014629e8404fce3552c">XprType</a>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a628b141cf4d6c11ff72ef22afebb8994">  921</a></span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1XprScalar.html#a5fff9f58106ea14bc0855091d5d07f5f">XprScalar&lt;XprType&gt;::type</a> <a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a628b141cf4d6c11ff72ef22afebb8994">Scalar</a>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a18e6ecac42ef41cadc1974362b3e5b04">  923</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a18e6ecac42ef41cadc1974362b3e5b04">TensorUnaryExprBlock</a>(<span class="keyword">const</span> ArgTensorBlock&amp; arg_block,</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                       <span class="keyword">const</span> BlockFactory&amp; factory)</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      : m_arg_block(arg_block), m_factory(factory) {}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#afec16f645a34ae318ce83b76c31edd05">  927</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">TensorBlockKind</a> <a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#afec16f645a34ae318ce83b76c31edd05">kind</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8adc8c4fe70ac3f3ce28a1fc78a1db58b7">internal::TensorBlockKind::kExpr</a>; }</div>
<div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a2701bb673318d25879b0db4c96da7d1d">  928</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorLazyEvaluatorWritable.html">XprType</a> <a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a2701bb673318d25879b0db4c96da7d1d">expr</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_factory.expr(m_arg_block.expr()); }</div>
<div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a9d94ce05a62af7a4bd228fabf3fb6475">  929</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a628b141cf4d6c11ff72ef22afebb8994">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a9d94ce05a62af7a4bd228fabf3fb6475">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a6973c71dfcbc99c9d6c2b30a6586d29b">  930</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a6973c71dfcbc99c9d6c2b30a6586d29b">cleanup</a>() { m_arg_block.cleanup(); }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  ArgTensorBlock m_arg_block;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  BlockFactory m_factory;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;};</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">// TensorTernaryExprBlock is a lazy tensor expression block that can construct</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">// an arbitrary tensor expression from three blocks of the underlying type.</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> BlockFactory, <span class="keyword">typename</span> Arg1TensorBlock,</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;          <span class="keyword">typename</span> Arg2TensorBlock, <span class="keyword">typename</span> Arg3TensorBlock&gt;</div>
<div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html">  943</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html">TensorTernaryExprBlock</a> {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="nestbyvalue_8cpp.html#a5aefae852e88ada71d9dfc8da1fc33bf">Arg1TensorBlock::XprType</a> Arg1XprType;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="nestbyvalue_8cpp.html#a5aefae852e88ada71d9dfc8da1fc33bf">Arg2TensorBlock::XprType</a> Arg2XprType;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="nestbyvalue_8cpp.html#a5aefae852e88ada71d9dfc8da1fc33bf">Arg3TensorBlock::XprType</a> Arg3XprType;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> NoArgBlockAccess = <a class="code" href="structEigen_1_1internal_1_1is__void.html">internal::is_void&lt;Arg1XprType&gt;::value</a> ||</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                                       <a class="code" href="structEigen_1_1internal_1_1is__void.html">internal::is_void&lt;Arg2XprType&gt;::value</a> ||</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                       <a class="code" href="structEigen_1_1internal_1_1is__void.html">internal::is_void&lt;Arg3XprType&gt;::value</a>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1conditional.html">conditional</a>&lt;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      NoArgBlockAccess, void,</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      <span class="keyword">typename</span> BlockFactory::template <a class="code" href="classEigen_1_1internal_1_1TensorLazyEvaluatorWritable.html">XprType</a>&lt;Arg1XprType, Arg2XprType,</div>
<div class="line"><a name="l00956"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a9482ec337c87df960b06b9df8ee85b7e">  956</a></span>&#160;                                              Arg3XprType&gt;::type&gt;::type <a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a9482ec337c87df960b06b9df8ee85b7e">XprType</a>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#ac442fe7c52f18aea51b66a568685a1f0">  958</a></span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1XprScalar.html#a5fff9f58106ea14bc0855091d5d07f5f">XprScalar&lt;XprType&gt;::type</a> <a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#ac442fe7c52f18aea51b66a568685a1f0">Scalar</a>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a4d0f32996f30e129f5606dc592459375">  960</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a4d0f32996f30e129f5606dc592459375">TensorTernaryExprBlock</a>(<span class="keyword">const</span> Arg1TensorBlock&amp; arg1_block,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                         <span class="keyword">const</span> Arg2TensorBlock&amp; arg2_block,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                         <span class="keyword">const</span> Arg3TensorBlock&amp; arg3_block,</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                         <span class="keyword">const</span> BlockFactory&amp; factory)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      : m_arg1_block(arg1_block),</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        m_arg2_block(arg2_block),</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        m_arg3_block(arg3_block),</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        m_factory(factory) {}</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a22474925e1b25d8a6d7fb3b1e26206c7">  969</a></span>&#160;  <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">TensorBlockKind</a> <a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a22474925e1b25d8a6d7fb3b1e26206c7">kind</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8adc8c4fe70ac3f3ce28a1fc78a1db58b7">internal::TensorBlockKind::kExpr</a>; }</div>
<div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a0ec59ca1bf9a9cedbeeb68a480351842">  970</a></span>&#160;  <a class="code" href="classEigen_1_1internal_1_1TensorLazyEvaluatorWritable.html">XprType</a> <a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a0ec59ca1bf9a9cedbeeb68a480351842">expr</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">return</span> m_factory.expr(m_arg1_block.expr(), m_arg2_block.expr(),</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                          m_arg3_block.expr());</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  }</div>
<div class="line"><a name="l00974"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a6b59f69e296b7cfa50a39f9f1213d867">  974</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#ac442fe7c52f18aea51b66a568685a1f0">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a6b59f69e296b7cfa50a39f9f1213d867">data</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> NULL; }</div>
<div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#acf9515d1f5386c07e11c6f9f6056e075">  975</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#acf9515d1f5386c07e11c6f9f6056e075">cleanup</a>() {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    m_arg1_block.cleanup();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    m_arg2_block.cleanup();</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    m_arg3_block.cleanup();</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  Arg1TensorBlock m_arg1_block;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  Arg2TensorBlock m_arg2_block;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  Arg3TensorBlock m_arg3_block;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  BlockFactory m_factory;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;};</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">// StridedLinearBufferCopy provides a method to copy data between two linear</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">// buffers with different strides, with optimized paths for scatter/gather.</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar, <span class="keyword">typename</span> IndexType&gt;</div>
<div class="line"><a name="l00993"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html">  993</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html">StridedLinearBufferCopy</a> {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1packet__traits.html">packet_traits&lt;Scalar&gt;::type</a> Packet;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keyword">enum</span> {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    Vectorizable = <a class="code" href="structEigen_1_1internal_1_1packet__traits.html">packet_traits&lt;Scalar&gt;::Vectorizable</a>,</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    PacketSize = <a class="code" href="structEigen_1_1internal_1_1packet__traits.html">packet_traits&lt;Scalar&gt;::size</a></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  };</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// Specifying linear copy kind statically gives ~30% speedup for small sizes.</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389d"> 1002</a></span>&#160;  <span class="keyword">enum class</span> <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389d">Kind</a> {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da32a843da6ea40ab3b17a3421ccdf671b">Linear</a> = 0,       <span class="comment">// src_stride == 1 &amp;&amp; dst_stride == 1</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da09870720ca8134284e4e305ac6ce5f19">Scatter</a> = 1,      <span class="comment">// src_stride == 1 &amp;&amp; dst_stride != 1</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389dac6fac6cb6e9ef1112afbe80ba7d75e9d">FillLinear</a> = 2,   <span class="comment">// src_stride == 0 &amp;&amp; dst_stride == 1</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da169f5b22a803b87d715fd6100cbece9a">FillScatter</a> = 3,  <span class="comment">// src_stride == 0 &amp;&amp; dst_stride != 1</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389daad22c799930d644e8468fe44c0312d53">Gather</a> = 4,       <span class="comment">// dst_stride == 1</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da64663f4646781c9c0110838b905daa23">Random</a> = 5        <span class="comment">// everything else</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  };</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html"> 1011</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html">Dst</a> {</div>
<div class="line"><a name="l01012"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a48c69187bf11579bf9ad3d4e018e63fe"> 1012</a></span>&#160;    <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a48c69187bf11579bf9ad3d4e018e63fe">Dst</a>(IndexType o, IndexType <a class="code" href="level1__cplx__impl_8h.html#a462761ca92ad97a9a705cb875828b0b8">s</a>, <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* d) : <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a4ac11f2f8e2166afd97a63de17780175">offset</a>(o), <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6fa92dc5ced9b852ea836771812ff3bb">stride</a>(<a class="code" href="level1__cplx__impl_8h.html#a462761ca92ad97a9a705cb875828b0b8">s</a>), <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6447195ed25a0959265a78c7411a92ec">data</a>(d) {}</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a4ac11f2f8e2166afd97a63de17780175"> 1014</a></span>&#160;    IndexType <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a4ac11f2f8e2166afd97a63de17780175">offset</a>;</div>
<div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6fa92dc5ced9b852ea836771812ff3bb"> 1015</a></span>&#160;    IndexType <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6fa92dc5ced9b852ea836771812ff3bb">stride</a>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6447195ed25a0959265a78c7411a92ec"> 1016</a></span>&#160;    <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6447195ed25a0959265a78c7411a92ec">data</a>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  };</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html"> 1019</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html">Src</a> {</div>
<div class="line"><a name="l01020"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#a7ffa309f5d6e9cbc0119119a142fb39a"> 1020</a></span>&#160;    <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#a7ffa309f5d6e9cbc0119119a142fb39a">Src</a>(IndexType o, IndexType <a class="code" href="level1__cplx__impl_8h.html#a462761ca92ad97a9a705cb875828b0b8">s</a>, <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* d)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        : <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#ab145d541c9d6cbfbf677189eb5e8e221">offset</a>(o), <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#af1fcd08fd276f0c258d82e68dda767ba">stride</a>(<a class="code" href="level1__cplx__impl_8h.html#a462761ca92ad97a9a705cb875828b0b8">s</a>), <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#a5b9aa24464388b6160cf4f5f42e192f0">data</a>(d) {}</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#ab145d541c9d6cbfbf677189eb5e8e221"> 1023</a></span>&#160;    IndexType <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#ab145d541c9d6cbfbf677189eb5e8e221">offset</a>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#af1fcd08fd276f0c258d82e68dda767ba"> 1024</a></span>&#160;    IndexType <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#af1fcd08fd276f0c258d82e68dda767ba">stride</a>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#a5b9aa24464388b6160cf4f5f42e192f0"> 1025</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#a5b9aa24464388b6160cf4f5f42e192f0">data</a>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  };</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Str<span class="keywordtype">id</span>edLinearBufferCopy::Kind kind&gt;</div>
<div class="line"><a name="l01029"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#ab9173990055cffadb030e6c23ee34a01"> 1029</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#ab9173990055cffadb030e6c23ee34a01">Run</a>(<span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html">Dst</a>&amp; dst,</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                                                        <span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html">Src</a>&amp; src,</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                                                        <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    Run&lt;kind&gt;(<a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>, dst.<a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a4ac11f2f8e2166afd97a63de17780175">offset</a>, dst.<a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6fa92dc5ced9b852ea836771812ff3bb">stride</a>, dst.<a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6447195ed25a0959265a78c7411a92ec">data</a>, src.<a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#ab145d541c9d6cbfbf677189eb5e8e221">offset</a>, src.<a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#af1fcd08fd276f0c258d82e68dda767ba">stride</a>,</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;              src.<a class="code" href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#a5b9aa24464388b6160cf4f5f42e192f0">data</a>);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Str<span class="keywordtype">id</span>edLinearBufferCopy::Kind kind&gt;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#ab9173990055cffadb030e6c23ee34a01">Run</a>(</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keyword">const</span> IndexType <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>, <span class="keyword">const</span> IndexType dst_offset,</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keyword">const</span> IndexType dst_stride, <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="Macros_8h.html#a05b03c839f8f1357916472a45013c57b">EIGEN_RESTRICT</a> dst_data,</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keyword">const</span> IndexType src_offset, <span class="keyword">const</span> IndexType src_stride,</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="Macros_8h.html#a05b03c839f8f1357916472a45013c57b">EIGEN_RESTRICT</a> src_data) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* src = &amp;src_data[src_offset];</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* dst = &amp;dst_data[dst_offset];</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">if</span> (!Vectorizable) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        dst[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * dst_stride] = src[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * src_stride];</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keyword">const</span> IndexType vectorized_size = <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a> - PacketSize;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    IndexType <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">if</span> (kind == <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da32a843da6ea40ab3b17a3421ccdf671b">StridedLinearBufferCopy::Kind::Linear</a>) {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="comment">// ******************************************************************** //</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="comment">// Linear copy from `src` to `dst`.</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="keyword">const</span> IndexType unrolled_size = <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a> - 4 * PacketSize;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(src_stride == 1 &amp;&amp; dst_stride == 1);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= unrolled_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += 4 * PacketSize) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> = 0; <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> &lt; 4; ++<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;          <a class="code" href="classEigen_1_1Triplet.html">Packet</a> <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a> = ploadu&lt;Packet&gt;(src + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> * PacketSize);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;          pstoreu&lt;Scalar, Packet&gt;(dst + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> * PacketSize, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= vectorized_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += PacketSize) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <a class="code" href="classEigen_1_1Triplet.html">Packet</a> <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a> = ploadu&lt;Packet&gt;(src + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        pstoreu&lt;Scalar, Packet&gt;(dst + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        dst[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = src[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="comment">// ******************************************************************** //</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (kind == <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da09870720ca8134284e4e305ac6ce5f19">StridedLinearBufferCopy::Kind::Scatter</a>) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="comment">// Scatter from `src` to `dst`.</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(src_stride == 1 &amp;&amp; dst_stride != 1);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= vectorized_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += PacketSize) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <a class="code" href="classEigen_1_1Triplet.html">Packet</a> <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a> = ploadu&lt;Packet&gt;(src + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        pscatter&lt;Scalar, Packet&gt;(dst + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * dst_stride, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>, dst_stride);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        dst[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * dst_stride] = src[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="comment">// ******************************************************************** //</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (kind == <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389dac6fac6cb6e9ef1112afbe80ba7d75e9d">StridedLinearBufferCopy::Kind::FillLinear</a>) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <span class="comment">// Fill `dst` with value at `*src`.</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(src_stride == 0 &amp;&amp; dst_stride == 1);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="keyword">const</span> IndexType unrolled_size = <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a> - 4 * PacketSize;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <a class="code" href="classEigen_1_1Triplet.html">Packet</a> <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a> = pload1&lt;Packet&gt;(src);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= unrolled_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += 4 * PacketSize) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> = 0; <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> &lt; 4; ++<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;          pstoreu&lt;Scalar, Packet&gt;(dst + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> * PacketSize, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= vectorized_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += PacketSize) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        pstoreu&lt;Scalar, Packet&gt;(dst + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        dst[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = *src;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="comment">// ******************************************************************** //</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (kind == <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da169f5b22a803b87d715fd6100cbece9a">StridedLinearBufferCopy::Kind::FillScatter</a>) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <span class="comment">// Scatter `*src` into `dst`.</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(src_stride == 0 &amp;&amp; dst_stride != 1);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <a class="code" href="classEigen_1_1Triplet.html">Packet</a> <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a> = pload1&lt;Packet&gt;(src);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= vectorized_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += PacketSize) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        pscatter&lt;Scalar, Packet&gt;(dst + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * dst_stride, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>, dst_stride);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        dst[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * dst_stride] = *src;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="comment">// ******************************************************************** //</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (kind == <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389daad22c799930d644e8468fe44c0312d53">StridedLinearBufferCopy::Kind::Gather</a>) {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="comment">// Gather from `src` into `dst`.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(dst_stride == 1);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= vectorized_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += PacketSize) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <a class="code" href="classEigen_1_1Triplet.html">Packet</a> <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a> = pgather&lt;Scalar, Packet&gt;(src + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * src_stride, src_stride);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        pstoreu&lt;Scalar, Packet&gt;(dst + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      }</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        dst[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = src[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * src_stride];</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="comment">// ******************************************************************** //</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (kind == <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da64663f4646781c9c0110838b905daa23">StridedLinearBufferCopy::Kind::Random</a>) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      <span class="comment">// Random.</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        dst[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * dst_stride] = src[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> * src_stride];</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;};</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">// TensorBlockIO copies data from `src` tensor block, to the `dst` tensor block.</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">// It&#39;s possible to specify src-&gt;dst dimension mapping for the copy operation.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">// Dimensions of `dst` specify how many elements have to be copied, for the</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">// `src` we need to know only stride to navigate through source memory buffer.</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Scalar, <span class="keyword">typename</span> IndexType, <span class="keywordtype">int</span> NumDims, <span class="keywordtype">int</span> Layout&gt;</div>
<div class="line"><a name="l01143"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockIO.html"> 1143</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html">TensorBlockIO</a> {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> IsColMajor = (Layout == <a class="code" href="group__enums.html#ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62">ColMajor</a>);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html">StridedLinearBufferCopy&lt;Scalar, IndexType&gt;</a> <a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html">LinCopy</a>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01149"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockIO.html#a490362f817bde27d3c6fd3868f92daa3"> 1149</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html#a490362f817bde27d3c6fd3868f92daa3">Dimensions</a>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockIO.html#a5128509f1483a716f9066ab686bbc62e"> 1150</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;int, NumDims&gt;</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html#a5128509f1483a716f9066ab686bbc62e">DimensionsMap</a>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html"> 1152</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html">Dst</a> {</div>
<div class="line"><a name="l01153"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#aeb8a61469d7fc663f2192e1c3971a143"> 1153</a></span>&#160;    <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#aeb8a61469d7fc663f2192e1c3971a143">Dst</a>(<span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; dst_dims, <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; dst_strides, <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* dst,</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        IndexType dst_offset = 0)</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        : <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">dims</a>(dst_dims), <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601">strides</a>(dst_strides), <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ae7ef092fab329a8598a3c9710401454f">data</a>(dst), <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a4d5ff8d4eb9d4bbac43511114251136d">offset</a>(dst_offset) {}</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65"> 1157</a></span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">dims</a>;</div>
<div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601"> 1158</a></span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601">strides</a>;</div>
<div class="line"><a name="l01159"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ae7ef092fab329a8598a3c9710401454f"> 1159</a></span>&#160;    <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ae7ef092fab329a8598a3c9710401454f">data</a>;</div>
<div class="line"><a name="l01160"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a4d5ff8d4eb9d4bbac43511114251136d"> 1160</a></span>&#160;    IndexType <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a4d5ff8d4eb9d4bbac43511114251136d">offset</a>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  };</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html"> 1163</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html">Src</a> {</div>
<div class="line"><a name="l01164"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#ade5df73afe7a91432eea047ca821da80"> 1164</a></span>&#160;    <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#ade5df73afe7a91432eea047ca821da80">Src</a>(<span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; src_strides, <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* src,</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        IndexType src_offset = 0)</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        : <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5">strides</a>(src_strides), <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a5174e9b125a61f2156bb0f97dc20c151">data</a>(src), <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a7be585e5b9c1d2e1d3a9703286ad6ec8">offset</a>(src_offset) {}</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5"> 1168</a></span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5">strides</a>;</div>
<div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a5174e9b125a61f2156bb0f97dc20c151"> 1169</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a5174e9b125a61f2156bb0f97dc20c151">data</a>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a7be585e5b9c1d2e1d3a9703286ad6ec8"> 1170</a></span>&#160;    IndexType <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a7be585e5b9c1d2e1d3a9703286ad6ec8">offset</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  };</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// Copies data to `dst` from `src`, using provided dimensions mapping:</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">//   src_dimension_index = dst_to_src_dim_map[dst_dimension_index]</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="comment">// Returns the number of copied elements.</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockIO.html#a3eed5c23e9578f8ed8b2946045ab1d68"> 1178</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html#a3eed5c23e9578f8ed8b2946045ab1d68">Copy</a>(</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html">Dst</a>&amp; dst, <span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html">Src</a>&amp; src, <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">DimensionsMap</a>&amp; dst_to_src_dim_map) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">// Copy single scalar value from `src` to `dst`.</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> (NumDims == 0) {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      *(dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ae7ef092fab329a8598a3c9710401454f">data</a> + dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a4d5ff8d4eb9d4bbac43511114251136d">offset</a>) = *(src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a5174e9b125a61f2156bb0f97dc20c151">data</a> + src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a7be585e5b9c1d2e1d3a9703286ad6ec8">offset</a>);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// Both `dst` and `src` must have contiguous innermost dimension. We also</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">// accept the special case with stride &#39;0&#39;, because it&#39;s used as a trick to</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="comment">// implement broadcasting.</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="keywordtype">int</span> inner_dim = IsColMajor ? 0 : NumDims - 1;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <a class="code" href="Macros_8h.html#a7cf6d5b460def34dc4e6acf42889b6a9">EIGEN_UNUSED_VARIABLE</a>(inner_dim);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601">strides</a>[inner_dim] == 1 || dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601">strides</a>[inner_dim] == 0);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5">strides</a>[inner_dim] == 1 || src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5">strides</a>[inner_dim] == 0);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="comment">// Give a shorter name to `dst_to_src_dim_map`.</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">DimensionsMap</a>&amp; dim_map = dst_to_src_dim_map;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// Do not squeeze reordered inner dimensions.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordtype">int</span> num_squeezable_dims = NumSqueezableInnerDims(dim_map);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160; </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">// NOTE: We find the innermost dimension (contiguous in memory) in the dst</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">// block, and we write data linearly into that dimension, reading it from</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="comment">// the src. If dimensions are reordered, we might end up reading data from</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">// the src with `stride != 1`.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="comment">// NOTE: Random-Read/Linear-Write can be up to ~2X faster than</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="comment">// Linear-Read/Random-Write: https://stackoverflow.com/a/54935680</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// Find the innermost dimension in the dst whose size is not 1. This is the</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// effective inner dim.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordtype">int</span> num_size_one_inner_dims = 0;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_squeezable_dims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> dst_dim = IsColMajor ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">if</span> (dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">dims</a>[dst_dim] != 1) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      num_size_one_inner_dims++;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">// If all dimensions are of size 1, just copy a scalar from `src` to `dst`.</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (num_size_one_inner_dims == NumDims) {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      *(dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ae7ef092fab329a8598a3c9710401454f">data</a> + dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a4d5ff8d4eb9d4bbac43511114251136d">offset</a>) = *(src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a5174e9b125a61f2156bb0f97dc20c151">data</a> + src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a7be585e5b9c1d2e1d3a9703286ad6ec8">offset</a>);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; </div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">// Outermost dimension in the dst with `stride == 1` (contiguous in memory).</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> dst_stride1_dim = IsColMajor</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                                    ? num_size_one_inner_dims</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                                    : NumDims - num_size_one_inner_dims - 1;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">// Dimension in the src that corresponds to the dst innermost dimension.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> src_dim_for_dst_stride1_dim =</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        NumDims == 0 ? 1 : dim_map[dst_stride1_dim];</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="comment">// Size of the innermost dimension (length of contiguous blocks of memory).</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    IndexType dst_inner_dim_size = NumDims == 0 ? 1 : dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">dims</a>[dst_stride1_dim];</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="comment">// Squeeze multiple inner dims into one if they are contiguous in `dst` and</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="comment">// `src` memory, so we can do less linear copy calls.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = num_size_one_inner_dims + 1; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_squeezable_dims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> dst_dim = IsColMajor ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keyword">const</span> IndexType dst_stride = dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601">strides</a>[dst_dim];</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keyword">const</span> IndexType src_stride = src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5">strides</a>[dim_map[dst_dim]];</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      <span class="keywordflow">if</span> (dst_inner_dim_size == dst_stride &amp;&amp; dst_stride == src_stride) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        dst_inner_dim_size *= dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">dims</a>[dst_dim];</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        ++num_size_one_inner_dims;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="comment">// Setup strides to read data from `src` and write to `dst`.</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    IndexType input_offset = src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a7be585e5b9c1d2e1d3a9703286ad6ec8">offset</a>;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    IndexType output_offset = dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a4d5ff8d4eb9d4bbac43511114251136d">offset</a>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    IndexType input_stride =</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        NumDims == 0 ? 1 : src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5">strides</a>[src_dim_for_dst_stride1_dim];</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    IndexType output_stride = NumDims == 0 ? 1 : dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601">strides</a>[dst_stride1_dim];</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> at_least_1_dim = NumDims &lt;= 1 ? 1 : NumDims - 1;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <a class="code" href="classEigen_1_1array.html">array&lt;BlockIteratorState, at_least_1_dim&gt;</a> it;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="comment">// Initialize block iterator state. Squeeze away any dimension of size 1.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordtype">int</span> idx = 0;  <span class="comment">// currently initialized iterator state index</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = num_size_one_inner_dims; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims - 1; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> dst_dim = IsColMajor ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="keywordflow">if</span> (dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">dims</a>[dst_dim] == 1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      it[idx].<a class="code" href="classEigen_1_1array.html#a332ffdbd5ae2690a6f983959baecc972">size</a> = dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">dims</a>[dst_dim];</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      it[idx].input_stride = src.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5">strides</a>[dim_map[dst_dim]];</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      it[idx].output_stride = dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601">strides</a>[dst_dim];</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      it[idx].input_span = it[idx].input_stride * (it[idx].<a class="code" href="classEigen_1_1array.html#a332ffdbd5ae2690a6f983959baecc972">size</a> - 1);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      it[idx].output_span = it[idx].output_stride * (it[idx].<a class="code" href="classEigen_1_1array.html#a332ffdbd5ae2690a6f983959baecc972">size</a> - 1);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      idx++;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    }</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="comment">// Iterate copying data from src to dst.</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keyword">const</span> IndexType block_total_size = NumDims == 0 ? 1 : dst.<a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">dims</a>.<a class="code" href="structEigen_1_1DSizes.html#aaa880c9fd53051ef158094e1e529e1f0">TotalSize</a>();</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="preprocessor">#define COPY_INNER_DIM(KIND)                                           \</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="preprocessor">  IndexType num_copied = 0;                                            \</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="preprocessor">  for (num_copied = 0; num_copied &lt; block_total_size;                  \</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="preprocessor">       num_copied += dst_inner_dim_size) {                             \</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="preprocessor">    LinCopy::template Run&lt;KIND&gt;(                                       \</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="preprocessor">        typename LinCopy::Dst(output_offset, output_stride, dst.data), \</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="preprocessor">        typename LinCopy::Src(input_offset, input_stride, src.data),   \</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="preprocessor">        dst_inner_dim_size);                                           \</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="preprocessor">                                                                       \</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="preprocessor">    for (int j = 0; j &lt; idx; ++j) {                                    \</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="preprocessor">      if (++it[j].count &lt; it[j].size) {                                \</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="preprocessor">        input_offset += it[j].input_stride;                            \</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="preprocessor">        output_offset += it[j].output_stride;                          \</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="preprocessor">        break;                                                         \</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="preprocessor">      }                                                                \</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="preprocessor">      it[j].count = 0;                                                 \</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="preprocessor">      input_offset -= it[j].input_span;                                \</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="preprocessor">      output_offset -= it[j].output_span;                              \</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="preprocessor">    }                                                                  \</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="preprocessor">  }                                                                    \</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="preprocessor">  return num_copied;</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordflow">if</span> (input_stride == 1 &amp;&amp; output_stride == 1) {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <a class="code" href="TensorBlock_8h.html#ab9d7073ae4eb62074f8ddc408f013426">COPY_INNER_DIM</a>(<a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da32a843da6ea40ab3b17a3421ccdf671b">LinCopy::Kind::Linear</a>);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (input_stride == 1 &amp;&amp; output_stride != 1) {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <a class="code" href="TensorBlock_8h.html#ab9d7073ae4eb62074f8ddc408f013426">COPY_INNER_DIM</a>(<a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da09870720ca8134284e4e305ac6ce5f19">LinCopy::Kind::Scatter</a>);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (input_stride == 0 &amp;&amp; output_stride == 1) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <a class="code" href="TensorBlock_8h.html#ab9d7073ae4eb62074f8ddc408f013426">COPY_INNER_DIM</a>(<a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389dac6fac6cb6e9ef1112afbe80ba7d75e9d">LinCopy::Kind::FillLinear</a>);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (input_stride == 0 &amp;&amp; output_stride != 1) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <a class="code" href="TensorBlock_8h.html#ab9d7073ae4eb62074f8ddc408f013426">COPY_INNER_DIM</a>(<a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da169f5b22a803b87d715fd6100cbece9a">LinCopy::Kind::FillScatter</a>);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (output_stride == 1) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <a class="code" href="TensorBlock_8h.html#ab9d7073ae4eb62074f8ddc408f013426">COPY_INNER_DIM</a>(<a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389daad22c799930d644e8468fe44c0312d53">LinCopy::Kind::Gather</a>);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <a class="code" href="TensorBlock_8h.html#ab9d7073ae4eb62074f8ddc408f013426">COPY_INNER_DIM</a>(<a class="code" href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da64663f4646781c9c0110838b905daa23">LinCopy::Kind::Random</a>);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="preprocessor">#undef COPY_INNER_DIM</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="comment">// Copy from `src` to `dst` with an identity src-&gt;dst dimension map. Returns</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// the number of copied elements.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockIO.html#a656190e6d8f4d4d62bf9ba413febe52a"> 1321</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#a1fdc6f94f20527c7275768d82b2eb9ce">EIGEN_ALWAYS_INLINE</a> IndexType <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html#a656190e6d8f4d4d62bf9ba413febe52a">Copy</a>(<span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html">Dst</a>&amp; dst,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                                                              <span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html">Src</a>&amp; src) {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">DimensionsMap</a> dst_to_src_map;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) dst_to_src_map[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html#a3eed5c23e9578f8ed8b2946045ab1d68">Copy</a>(dst, src, dst_to_src_map);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="keyword">struct </span>BlockIteratorState {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    BlockIteratorState()</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        : <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>(0),</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;          <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>(0),</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;          input_stride(0),</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;          output_stride(0),</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;          input_span(0),</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;          output_span(0) {}</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160; </div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    IndexType <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    IndexType <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    IndexType input_stride;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    IndexType output_stride;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    IndexType input_span;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    IndexType output_span;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  };</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="comment">// Compute how many inner dimensions it&#39;s allowed to squeeze when doing IO</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="comment">// between two tensor blocks. It&#39;s safe to squeeze inner dimensions, only</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">// if they are not reordered.</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> NumSqueezableInnerDims(<span class="keyword">const</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockIO.html#a5128509f1483a716f9066ab686bbc62e">DimensionsMap</a>&amp; dim_map) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordtype">int</span> num_squeezable_dims = 0;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> dim = IsColMajor ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <span class="keywordflow">if</span> (dim_map[dim] != dim) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      num_squeezable_dims++;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    }</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">return</span> num_squeezable_dims;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;};</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">// TensorBlockAssignment assigns a block expression of type `TensorBlockExpr` to</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">// a Tensor block defined by `desc`, backed by a memory buffer at `target`.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">// Currently there is no way to write from a Tensor expression to a block of</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">// memory, if dimensions are reordered. If you need to do that, you should</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">// materialize a Tensor block expression into a memory buffer, and then use</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">// TensorBlockIO to copy data between two memory buffers with a custom</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">// `target-&gt;src` dimension map (see definition above).</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">// Also currently the innermost dimension of `target` must have a stride &#39;1&#39;</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">// (contiguous in memory). This restriction could be lifted with a `pscatter`,</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">// but in practice it&#39;s never needed, and there is a similar TensorBlockIO</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">// workaround for that.</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">// TODO(ezhulenev): TensorBlockAssignment is a special case of TensorBlockIO</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">// where `src` is a tensor expression. Explore if it is possible to rewrite IO</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">// to use expressions instead of pointers, and after that TensorBlockAssignment</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">// will become an alias to IO.</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>, <span class="keywordtype">int</span> NumDims, <span class="keyword">typename</span> TensorBlockExpr,</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;          <span class="keyword">typename</span> IndexType = <a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Eigen::Index</a>&gt;</div>
<div class="line"><a name="l01381"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockAssignment.html"> 1381</a></span>&#160;<span class="keyword">class </span><a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html">TensorBlockAssignment</a> {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="comment">// We will use coeff/packet path to evaluate block expressions.</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structEigen_1_1TensorEvaluator.html">TensorEvaluator&lt;const TensorBlockExpr, DefaultDevice&gt;</a></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <a class="code" href="structEigen_1_1TensorEvaluator.html">TensorBlockEvaluator</a>;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;IndexType, NumDims&gt;</a> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keyword">enum</span> {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    Vectorizable = <a class="code" href="structEigen_1_1internal_1_1packet__traits.html">packet_traits&lt;Scalar&gt;::Vectorizable</a>,</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    PacketSize = <a class="code" href="structEigen_1_1internal_1_1packet__traits.html">packet_traits&lt;Scalar&gt;::size</a></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  };</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">bool</span> Vectorizable, <span class="keyword">typename</span> Evaluator&gt;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keyword">struct </span>InnerDimAssign {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <a class="code" href="Macros_8h.html#a1fdc6f94f20527c7275768d82b2eb9ce">EIGEN_ALWAYS_INLINE</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#a8481db430b0d05871071c61449b48576">Run</a>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>, IndexType <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>,</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                                        <span class="keyword">const</span> Evaluator&amp; <a class="code" href="structEigen_1_1internal_1_1eval.html">eval</a>,</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                                        IndexType eval_offset) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="keywordflow">for</span> (IndexType <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="structEigen_1_1internal_1_1eval.html">eval</a>.coeff(eval_offset + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  };</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Evaluator&gt;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="keyword">struct </span>InnerDimAssign&lt;true, Evaluator&gt; {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="Macros_8h.html#a1fdc6f94f20527c7275768d82b2eb9ce">EIGEN_ALWAYS_INLINE</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#a8481db430b0d05871071c61449b48576">Run</a>(<a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>, IndexType <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>,</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                                        <span class="keyword">const</span> Evaluator&amp; <a class="code" href="structEigen_1_1internal_1_1eval.html">eval</a>,</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                                        IndexType eval_offset) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structEigen_1_1internal_1_1packet__traits.html">packet_traits&lt;Scalar&gt;::type</a> <a class="code" href="benchmark-blocking-sizes_8cpp.html#af8736f5639bd4077ed9602ad1a220156">Packet</a>;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; </div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keyword">const</span> IndexType unrolled_size = <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a> - 4 * PacketSize;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="keyword">const</span> IndexType vectorized_size = <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a> - PacketSize;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      IndexType <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= unrolled_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += 4 * PacketSize) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> = 0; <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> &lt; 4; ++<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>) {</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;          <span class="keyword">const</span> IndexType idx = eval_offset + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> * PacketSize;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;          <a class="code" href="unionEigen_1_1internal_1_1Packet.html">Packet</a> <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a> = <a class="code" href="structEigen_1_1internal_1_1eval.html">eval</a>.template packet&lt;Unaligned&gt;(idx);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;          pstoreu&lt;Scalar&gt;(<a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a> + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> * PacketSize, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      }</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160; </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= vectorized_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += PacketSize) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <a class="code" href="unionEigen_1_1internal_1_1Packet.html">Packet</a> <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a> = <a class="code" href="structEigen_1_1internal_1_1eval.html">eval</a>.template packet&lt;Unaligned&gt;(eval_offset + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        pstoreu&lt;Scalar&gt;(<a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a> + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      }</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <span class="keywordflow">for</span> (; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>[<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="structEigen_1_1internal_1_1eval.html">eval</a>.coeff(eval_offset + <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  };</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l01435"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html"> 1435</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html">Target</a> {</div>
<div class="line"><a name="l01436"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#ab30d4678b03ff13c4d0cdab341d2543f"> 1436</a></span>&#160;    <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#ab30d4678b03ff13c4d0cdab341d2543f">Target</a>(<span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; target_dims, <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; target_strides,</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;           <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* target_data, IndexType target_offset = 0)</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        : <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b">dims</a>(target_dims),</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;          <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a17495ac58643954fe08dc2a4935e7229">strides</a>(target_strides),</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;          <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a999830b58a5d678f64b3eb48f9d3d77f">data</a>(target_data),</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;          <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#abc9c7d9aa7a698fcbfc92fd65a9af8cd">offset</a>(target_offset) {}</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b"> 1443</a></span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b">dims</a>;</div>
<div class="line"><a name="l01444"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a17495ac58643954fe08dc2a4935e7229"> 1444</a></span>&#160;    <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a> <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a17495ac58643954fe08dc2a4935e7229">strides</a>;</div>
<div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a999830b58a5d678f64b3eb48f9d3d77f"> 1445</a></span>&#160;    <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a999830b58a5d678f64b3eb48f9d3d77f">data</a>;</div>
<div class="line"><a name="l01446"></a><span class="lineno"><a class="line" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#abc9c7d9aa7a698fcbfc92fd65a9af8cd"> 1446</a></span>&#160;    IndexType <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#abc9c7d9aa7a698fcbfc92fd65a9af8cd">offset</a>;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  };</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75"> 1449</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html">Target</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>(<span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; target_dims,</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                       <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>&amp; target_strides, <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* target_data,</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                       IndexType target_offset = 0) {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1Architecture.html#ae54c092bdb3a978b9aa8cc50dcafc13cabc74b8591881b6f1d2c17bd0799362e7">Target</a>(target_dims, target_strides, target_data, target_offset);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> TargetDimsIndexType, <span class="keyword">typename</span> TargetStr<span class="keywordtype">id</span>esIndexType&gt;</div>
<div class="line"><a name="l01456"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#ac0e88a9ccb42d249d6e57d95f8e09378"> 1456</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html">Target</a> <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#ac0e88a9ccb42d249d6e57d95f8e09378">target</a>(</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;TargetDimsIndexType, NumDims&gt;</a>&amp; target_dims,</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <span class="keyword">const</span> <a class="code" href="structEigen_1_1DSizes.html">DSizes&lt;TargetStridesIndexType, NumDims&gt;</a>&amp; target_strides,</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <a class="code" href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a>* target_data, IndexType target_offset = 0) {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="comment">// DSizes constructor will do index type promotion if it&#39;s safe.</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceEigen_1_1Architecture.html#ae54c092bdb3a978b9aa8cc50dcafc13cabc74b8591881b6f1d2c17bd0799362e7">Target</a>(<a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>(target_dims), <a class="code" href="structEigen_1_1DSizes.html">Dimensions</a>(target_strides),</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                  target_data, target_offset);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"><a class="line" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#a8481db430b0d05871071c61449b48576"> 1465</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keywordtype">void</span> <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#a8481db430b0d05871071c61449b48576">Run</a>(</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <span class="keyword">const</span> <a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html">Target</a>&amp; <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>, <span class="keyword">const</span> TensorBlockExpr&amp; expr) {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="comment">// Prepare evaluator for block expression.</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <a class="code" href="structEigen_1_1DefaultDevice.html">DefaultDevice</a> default_device;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <a class="code" href="structEigen_1_1TensorEvaluator.html">TensorBlockEvaluator</a> <a class="code" href="sparse__permutations_8cpp.html#ad87822100feba90851ac71ba08fce30b">eval</a>(expr, default_device);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="comment">// Tensor block expression dimension should match destination dimensions.</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(<a class="code" href="namespaceEigen.html#a0dcc94ba428bad798d2087b2bde597f7">dimensions_match</a>(<a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b">dims</a>, <a class="code" href="structEigen_1_1internal_1_1eval.html">eval</a>.dimensions()));</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> Layout = <a class="code" href="structEigen_1_1TensorEvaluator.html#a925912780a06c71e1c156c6752dc7fddaaea01fe7598d6c1941853b693ec9f162">TensorBlockEvaluator::Layout</a>;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> is_col_major = Layout == <a class="code" href="group__enums.html#ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62">ColMajor</a>;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="comment">// Initialize output inner dimension size based on a layout.</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keyword">const</span> IndexType output_size = NumDims == 0 ? 1 : <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b">dims</a>.<a class="code" href="structEigen_1_1DSizes.html#aaa880c9fd53051ef158094e1e529e1f0">TotalSize</a>();</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> inner_dim_idx = is_col_major ? 0 : NumDims - 1;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    IndexType output_inner_dim_size = <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b">dims</a>[inner_dim_idx];</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="comment">// Target inner dimension stride must be &#39;1&#39;.</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(<a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a17495ac58643954fe08dc2a4935e7229">strides</a>[inner_dim_idx] == 1);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160; </div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="comment">// Squeeze multiple inner dims into one if they are contiguous in `target`.</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    IndexType num_squeezed_dims = 0;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> dim = is_col_major ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <span class="keyword">const</span> IndexType target_stride = <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a17495ac58643954fe08dc2a4935e7229">strides</a>[dim];</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <span class="keywordflow">if</span> (output_inner_dim_size == target_stride) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        output_inner_dim_size *= <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b">dims</a>[dim];</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        num_squeezed_dims++;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      }</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment">// Initialize output block iterator state. Dimension in this array are</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">// always in inner_most -&gt; outer_most order (col major layout).</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <a class="code" href="classEigen_1_1array.html">array&lt;BlockIteratorState, NumDims&gt;</a> it;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordtype">int</span> idx = 0;  <span class="comment">// currently initialized iterator state index</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = num_squeezed_dims; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDims - 1; ++<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> dim = is_col_major ? <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 : NumDims - <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160; </div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      it[idx].count = 0;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      it[idx].<a class="code" href="classEigen_1_1array.html#a332ffdbd5ae2690a6f983959baecc972">size</a> = <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b">dims</a>[dim];</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      it[idx].output_stride = <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a17495ac58643954fe08dc2a4935e7229">strides</a>[dim];</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      it[idx].output_span = it[idx].output_stride * (it[idx].<a class="code" href="classEigen_1_1array.html#a332ffdbd5ae2690a6f983959baecc972">size</a> - 1);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      idx++;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="comment">// We read block expression from the beginning, and start writing data to</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="comment">// `target` at given offset.</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    IndexType input_offset = 0;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    IndexType output_offset = <a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#abc9c7d9aa7a698fcbfc92fd65a9af8cd">offset</a>;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">// Iterate copying data from `eval` to `target`.</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">for</span> (IndexType <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; output_size; <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> += output_inner_dim_size) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="comment">// Assign to `target` at current offset.</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      InnerDimAssign&lt;Vectorizable &amp;&amp; <a class="code" href="structEigen_1_1TensorEvaluator.html#a925912780a06c71e1c156c6752dc7fdda82e9bfc6394867187050ca7e4619cdf1">TensorBlockEvaluator::PacketAccess</a>,</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                     <a class="code" href="structEigen_1_1TensorEvaluator.html">TensorBlockEvaluator</a>&gt;<a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#a8481db430b0d05871071c61449b48576">::Run</a>(<a class="code" href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">target</a>.<a class="code" href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a999830b58a5d678f64b3eb48f9d3d77f">data</a> + output_offset,</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                                                output_inner_dim_size, <a class="code" href="structEigen_1_1internal_1_1eval.html">eval</a>,</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                                                input_offset);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160; </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="comment">// Move input offset forward by the number of assigned coefficients.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      input_offset += output_inner_dim_size;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="comment">// Update index.</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> = 0; <a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a> &lt; idx; ++<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="keywordflow">if</span> (++it[<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>].<a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a> &lt; it[<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>].<a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>) {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;          output_offset += it[<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>].output_stride;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        it[<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>].count = 0;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        output_offset -= it[<a class="code" href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a>].output_span;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="keyword">struct </span>BlockIteratorState {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    BlockIteratorState()</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        : <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>(0), <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>(0), output_stride(0), output_span(0) {}</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    IndexType <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    IndexType <a class="code" href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">size</a>;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    IndexType output_stride;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    IndexType output_span;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  };</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;};</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">// -------------------------------------------------------------------------- //</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;}  <span class="comment">// namespace internal</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;}  <span class="comment">// namespace Eigen</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// EIGEN_CXX11_TENSOR_TENSOR_BLOCK_H</span></div>
<div class="ttc" id="aBiCGSTAB__step__by__step_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> BiCGSTAB_step_by_step.cpp:9</div></div>
<div class="ttc" id="aMacros_8h_html_a05b03c839f8f1357916472a45013c57b"><div class="ttname"><a href="Macros_8h.html#a05b03c839f8f1357916472a45013c57b">EIGEN_RESTRICT</a></div><div class="ttdeci">#define EIGEN_RESTRICT</div><div class="ttdef"><b>Definition:</b> Macros.h:1160</div></div>
<div class="ttc" id="aMacros_8h_html_a1fdc6f94f20527c7275768d82b2eb9ce"><div class="ttname"><a href="Macros_8h.html#a1fdc6f94f20527c7275768d82b2eb9ce">EIGEN_ALWAYS_INLINE</a></div><div class="ttdeci">#define EIGEN_ALWAYS_INLINE</div><div class="ttdef"><b>Definition:</b> Macros.h:932</div></div>
<div class="ttc" id="aMacros_8h_html_a7cf6d5b460def34dc4e6acf42889b6a9"><div class="ttname"><a href="Macros_8h.html#a7cf6d5b460def34dc4e6acf42889b6a9">EIGEN_UNUSED_VARIABLE</a></div><div class="ttdeci">#define EIGEN_UNUSED_VARIABLE(var)</div><div class="ttdef"><b>Definition:</b> Macros.h:1076</div></div>
<div class="ttc" id="aMacros_8h_html_a9efec3cfd22b9a33bead9c6718d128da"><div class="ttname"><a href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a></div><div class="ttdeci">#define EIGEN_DEVICE_FUNC</div><div class="ttdef"><b>Definition:</b> Macros.h:976</div></div>
<div class="ttc" id="aMacros_8h_html_acaa7ba89800cfe18d5fd6eed620aea9c"><div class="ttname"><a href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a></div><div class="ttdeci">#define eigen_assert(x)</div><div class="ttdef"><b>Definition:</b> Macros.h:1037</div></div>
<div class="ttc" id="aMacros_8h_html_af2b60117c00a6e75812de43bfe7db3b1"><div class="ttname"><a href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a></div><div class="ttdeci">#define EIGEN_STRONG_INLINE</div><div class="ttdef"><b>Definition:</b> Macros.h:917</div></div>
<div class="ttc" id="aTensorBlock_8h_html_ab9d7073ae4eb62074f8ddc408f013426"><div class="ttname"><a href="TensorBlock_8h.html#ab9d7073ae4eb62074f8ddc408f013426">COPY_INNER_DIM</a></div><div class="ttdeci">#define COPY_INNER_DIM(KIND)</div></div>
<div class="ttc" id="aTutorial__Map__using_8cpp_html_a7fe964f6b1afd4591f637999272ab9a2"><div class="ttname"><a href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a></div><div class="ttdeci">float * p</div><div class="ttdef"><b>Definition:</b> Tutorial_Map_using.cpp:9</div></div>
<div class="ttc" id="abench__gemm_8cpp_html_a052eb942d12b6404aade6fae4b075fb9"><div class="ttname"><a href="bench__gemm_8cpp.html#a052eb942d12b6404aade6fae4b075fb9">Scalar</a></div><div class="ttdeci">SCALAR Scalar</div><div class="ttdef"><b>Definition:</b> bench_gemm.cpp:46</div></div>
<div class="ttc" id="abenchmark-blocking-sizes_8cpp_html_af8736f5639bd4077ed9602ad1a220156"><div class="ttname"><a href="benchmark-blocking-sizes_8cpp.html#af8736f5639bd4077ed9602ad1a220156">Packet</a></div><div class="ttdeci">internal::packet_traits&lt; Scalar &gt;::type Packet</div><div class="ttdef"><b>Definition:</b> benchmark-blocking-sizes.cpp:54</div></div>
<div class="ttc" id="aclassEigen_1_1CwiseBinaryOp_html"><div class="ttname"><a href="classEigen_1_1CwiseBinaryOp.html">Eigen::CwiseBinaryOp</a></div><div class="ttdoc">Generic expression where a coefficient-wise binary operator is applied to two expressions.</div><div class="ttdef"><b>Definition:</b> CwiseBinaryOp.h:84</div></div>
<div class="ttc" id="aclassEigen_1_1TensorCwiseBinaryOp_html"><div class="ttname"><a href="classEigen_1_1TensorCwiseBinaryOp.html">Eigen::TensorCwiseBinaryOp</a></div><div class="ttdef"><b>Definition:</b> TensorExpr.h:197</div></div>
<div class="ttc" id="aclassEigen_1_1TensorCwiseUnaryOp_html"><div class="ttname"><a href="classEigen_1_1TensorCwiseUnaryOp.html">Eigen::TensorCwiseUnaryOp</a></div><div class="ttdef"><b>Definition:</b> TensorExpr.h:116</div></div>
<div class="ttc" id="aclassEigen_1_1TensorMap_html"><div class="ttname"><a href="classEigen_1_1TensorMap.html">Eigen::TensorMap</a></div><div class="ttdoc">A tensor expression mapping an existing array of data.</div><div class="ttdef"><b>Definition:</b> TensorMap.h:30</div></div>
<div class="ttc" id="aclassEigen_1_1TensorOpCost_html"><div class="ttname"><a href="classEigen_1_1TensorOpCost.html">Eigen::TensorOpCost</a></div><div class="ttdef"><b>Definition:</b> TensorCostModel.h:25</div></div>
<div class="ttc" id="aclassEigen_1_1Triplet_html"><div class="ttname"><a href="classEigen_1_1Triplet.html">Eigen::Triplet&lt; double &gt;</a></div></div>
<div class="ttc" id="aclassEigen_1_1array_html"><div class="ttname"><a href="classEigen_1_1array.html">Eigen::array</a></div><div class="ttdef"><b>Definition:</b> EmulateArray.h:21</div></div>
<div class="ttc" id="aclassEigen_1_1array_html_a332ffdbd5ae2690a6f983959baecc972"><div class="ttname"><a href="classEigen_1_1array.html#a332ffdbd5ae2690a6f983959baecc972">Eigen::array::size</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC static EIGEN_ALWAYS_INLINE std::size_t size()</div><div class="ttdef"><b>Definition:</b> EmulateArray.h:44</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html">Eigen::internal::StridedLinearBufferCopy</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:993</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html_a9b33c9925cacf0deff3334bc2f2d389d"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389d">Eigen::internal::StridedLinearBufferCopy::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1002</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html_a9b33c9925cacf0deff3334bc2f2d389da09870720ca8134284e4e305ac6ce5f19"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da09870720ca8134284e4e305ac6ce5f19">Eigen::internal::StridedLinearBufferCopy::Kind::Scatter</a></div><div class="ttdeci">@ Scatter</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html_a9b33c9925cacf0deff3334bc2f2d389da169f5b22a803b87d715fd6100cbece9a"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da169f5b22a803b87d715fd6100cbece9a">Eigen::internal::StridedLinearBufferCopy::Kind::FillScatter</a></div><div class="ttdeci">@ FillScatter</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html_a9b33c9925cacf0deff3334bc2f2d389da32a843da6ea40ab3b17a3421ccdf671b"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da32a843da6ea40ab3b17a3421ccdf671b">Eigen::internal::StridedLinearBufferCopy::Kind::Linear</a></div><div class="ttdeci">@ Linear</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html_a9b33c9925cacf0deff3334bc2f2d389da64663f4646781c9c0110838b905daa23"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389da64663f4646781c9c0110838b905daa23">Eigen::internal::StridedLinearBufferCopy::Kind::Random</a></div><div class="ttdeci">@ Random</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html_a9b33c9925cacf0deff3334bc2f2d389daad22c799930d644e8468fe44c0312d53"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389daad22c799930d644e8468fe44c0312d53">Eigen::internal::StridedLinearBufferCopy::Kind::Gather</a></div><div class="ttdeci">@ Gather</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html_a9b33c9925cacf0deff3334bc2f2d389dac6fac6cb6e9ef1112afbe80ba7d75e9d"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#a9b33c9925cacf0deff3334bc2f2d389dac6fac6cb6e9ef1112afbe80ba7d75e9d">Eigen::internal::StridedLinearBufferCopy::Kind::FillLinear</a></div><div class="ttdeci">@ FillLinear</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1StridedLinearBufferCopy_html_ab9173990055cffadb030e6c23ee34a01"><div class="ttname"><a href="classEigen_1_1internal_1_1StridedLinearBufferCopy.html#ab9173990055cffadb030e6c23ee34a01">Eigen::internal::StridedLinearBufferCopy::Run</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE void Run(const Dst &amp;dst, const Src &amp;src, const size_t count)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1029</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockAssignment_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockAssignment.html">Eigen::internal::TensorBlockAssignment</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1381</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockAssignment_html_a8481db430b0d05871071c61449b48576"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockAssignment.html#a8481db430b0d05871071c61449b48576">Eigen::internal::TensorBlockAssignment::Run</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE void Run(const Target &amp;target, const TensorBlockExpr &amp;expr)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1465</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockAssignment_html_aafb6b57b6c0a830dbc3a695fb0e40b75"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockAssignment.html#aafb6b57b6c0a830dbc3a695fb0e40b75">Eigen::internal::TensorBlockAssignment::target</a></div><div class="ttdeci">static Target target(const Dimensions &amp;target_dims, const Dimensions &amp;target_strides, Scalar *target_data, IndexType target_offset=0)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1449</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockAssignment_html_ac0e88a9ccb42d249d6e57d95f8e09378"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockAssignment.html#ac0e88a9ccb42d249d6e57d95f8e09378">Eigen::internal::TensorBlockAssignment::target</a></div><div class="ttdeci">static Target target(const DSizes&lt; TargetDimsIndexType, NumDims &gt; &amp;target_dims, const DSizes&lt; TargetStridesIndexType, NumDims &gt; &amp;target_strides, Scalar *target_data, IndexType target_offset=0)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1456</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html">Eigen::internal::TensorBlockDescriptor::DestinationBuffer</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:202</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html_a3184ea8e5d6744cd03dc1bae419feeea"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeea">Eigen::internal::TensorBlockDescriptor::DestinationBuffer::DestinationBufferKind</a></div><div class="ttdeci">DestinationBufferKind</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:204</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html_a3184ea8e5d6744cd03dc1bae419feeeaa12fabbd09079e0d12bd594a138314492"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa12fabbd09079e0d12bd594a138314492">Eigen::internal::TensorBlockDescriptor::DestinationBuffer::kEmpty</a></div><div class="ttdeci">@ kEmpty</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:214</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html_a3184ea8e5d6744cd03dc1bae419feeeaa3a9cefe0a5a00d14ef0b3dee0241bde2"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaa3a9cefe0a5a00d14ef0b3dee0241bde2">Eigen::internal::TensorBlockDescriptor::DestinationBuffer::kStrided</a></div><div class="ttdeci">@ kStrided</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:232</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html_a3184ea8e5d6744cd03dc1bae419feeeaaf829c94be635dff5f0ebd96d4c4ed45d"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a3184ea8e5d6744cd03dc1bae419feeeaaf829c94be635dff5f0ebd96d4c4ed45d">Eigen::internal::TensorBlockDescriptor::DestinationBuffer::kContiguous</a></div><div class="ttdeci">@ kContiguous</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:220</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html_a78356873301e5605e320c233f70b062d"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#a78356873301e5605e320c233f70b062d">Eigen::internal::TensorBlockDescriptor::DestinationBuffer::TensorBlockDescriptor</a></div><div class="ttdeci">friend class TensorBlockDescriptor</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:245</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html_ad0f4b337ffce96e0d735b1b31b0cdd13"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ad0f4b337ffce96e0d735b1b31b0cdd13">Eigen::internal::TensorBlockDescriptor::DestinationBuffer::kind</a></div><div class="ttdeci">const DestinationBufferKind &amp; kind() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:242</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html_ada04f45403e833b8a35125c2828443da"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#ada04f45403e833b8a35125c2828443da">Eigen::internal::TensorBlockDescriptor::DestinationBuffer::strides</a></div><div class="ttdeci">const Dimensions &amp; strides() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:241</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer_html_adbde5dfe1b0ff2efc24d4ee9abf03099"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor_1_1DestinationBuffer.html#adbde5dfe1b0ff2efc24d4ee9abf03099">Eigen::internal::TensorBlockDescriptor::DestinationBuffer::data</a></div><div class="ttdeci">Scalar * data() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:236</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html">Eigen::internal::TensorBlockDescriptor</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:188</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a0397df4c198c8c066fdcd01ce8e16bb7"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a0397df4c198c8c066fdcd01ce8e16bb7">Eigen::internal::TensorBlockDescriptor::WithOffset</a></div><div class="ttdeci">TensorBlockDescriptor WithOffset(IndexType offset) const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:331</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a1813ea107b72b29db56c17f9c92d9e47"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a1813ea107b72b29db56c17f9c92d9e47">Eigen::internal::TensorBlockDescriptor::AddDestinationBuffer</a></div><div class="ttdeci">void AddDestinationBuffer(Scalar *dst_base, const DSizes&lt; DstStridesIndexType, NumDims &gt; &amp;dst_strides)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:313</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a3b775d906d4ccfa8586694513d8eb5fc"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a3b775d906d4ccfa8586694513d8eb5fc">Eigen::internal::TensorBlockDescriptor::AddDestinationBuffer</a></div><div class="ttdeci">void AddDestinationBuffer(Scalar *dst_base, const Dimensions &amp;dst_strides)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:306</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a43f23f69a932c6387d63f65bc4a8bfe1"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a43f23f69a932c6387d63f65bc4a8bfe1">Eigen::internal::TensorBlockDescriptor::Dimensions</a></div><div class="ttdeci">DSizes&lt; IndexType, NumDims &gt; Dimensions</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:190</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a595bc99b9603c07e17f9f26a4e8d71f0"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a595bc99b9603c07e17f9f26a4e8d71f0">Eigen::internal::TensorBlockDescriptor::size</a></div><div class="ttdeci">IndexType size() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:301</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a5fcd00ad8c69f4a2bac09636604c1669"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a5fcd00ad8c69f4a2bac09636604c1669">Eigen::internal::TensorBlockDescriptor::destination</a></div><div class="ttdeci">const DestinationBuffer &amp; destination() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:303</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a686be958df6a4ab77f9b6832cd1b8f96"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a686be958df6a4ab77f9b6832cd1b8f96">Eigen::internal::TensorBlockDescriptor::offset</a></div><div class="ttdeci">IndexType offset() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:298</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a6f411bdb93e39a081d05b21690494433"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a6f411bdb93e39a081d05b21690494433">Eigen::internal::TensorBlockDescriptor::HasDestinationBuffer</a></div><div class="ttdeci">bool HasDestinationBuffer() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:326</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a71f0960688b9cf8110d42cae2814be1b"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a71f0960688b9cf8110d42cae2814be1b">Eigen::internal::TensorBlockDescriptor::DropDestinationBuffer</a></div><div class="ttdeci">TensorBlockDescriptor &amp; DropDestinationBuffer()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:320</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a89c4bf7986164e0cfe376181e9032ed4"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a89c4bf7986164e0cfe376181e9032ed4">Eigen::internal::TensorBlockDescriptor::dimension</a></div><div class="ttdeci">IndexType dimension(int index) const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:300</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_a9f0ae998b67c9de3d6f3b0e11d0ee79d"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#a9f0ae998b67c9de3d6f3b0e11d0ee79d">Eigen::internal::TensorBlockDescriptor::dimensions</a></div><div class="ttdeci">const Dimensions &amp; dimensions() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:299</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_aca5bf8c1fb818e5d982a57353b925d9b"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#aca5bf8c1fb818e5d982a57353b925d9b">Eigen::internal::TensorBlockDescriptor::TensorBlockDescriptor</a></div><div class="ttdeci">TensorBlockDescriptor(const IndexType offset, const Dimensions &amp;dimensions, const DestinationBuffer &amp;destination)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:287</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockDescriptor_html_ae07d1bfe1b59a7d332a0ac8a95501062"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockDescriptor.html#ae07d1bfe1b59a7d332a0ac8a95501062">Eigen::internal::TensorBlockDescriptor::TensorBlockDescriptor</a></div><div class="ttdeci">TensorBlockDescriptor(const IndexType offset, const Dimensions &amp;dimensions)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:293</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockIO_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockIO.html">Eigen::internal::TensorBlockIO</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1143</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockIO_html_a3eed5c23e9578f8ed8b2946045ab1d68"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockIO.html#a3eed5c23e9578f8ed8b2946045ab1d68">Eigen::internal::TensorBlockIO::Copy</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE IndexType Copy(const Dst &amp;dst, const Src &amp;src, const DimensionsMap &amp;dst_to_src_dim_map)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1178</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockIO_html_a490362f817bde27d3c6fd3868f92daa3"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockIO.html#a490362f817bde27d3c6fd3868f92daa3">Eigen::internal::TensorBlockIO::Dimensions</a></div><div class="ttdeci">DSizes&lt; IndexType, NumDims &gt; Dimensions</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1149</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockIO_html_a5128509f1483a716f9066ab686bbc62e"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockIO.html#a5128509f1483a716f9066ab686bbc62e">Eigen::internal::TensorBlockIO::DimensionsMap</a></div><div class="ttdeci">DSizes&lt; int, NumDims &gt; DimensionsMap</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1150</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockIO_html_a656190e6d8f4d4d62bf9ba413febe52a"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockIO.html#a656190e6d8f4d4d62bf9ba413febe52a">Eigen::internal::TensorBlockIO::Copy</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC EIGEN_ALWAYS_INLINE IndexType Copy(const Dst &amp;dst, const Src &amp;src)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1321</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockMapper_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockMapper.html">Eigen::internal::TensorBlockMapper</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:347</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockMapper_html_a26ad9feac42d276f9d4fe05c3a785dfa"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockMapper.html#a26ad9feac42d276f9d4fe05c3a785dfa">Eigen::internal::TensorBlockMapper::blockDimensions</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE const DSizes&lt; IndexType, NumDims &gt; &amp; blockDimensions() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:370</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockMapper_html_a2914ace578bce3ea2991255d66efeb0a"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockMapper.html#a2914ace578bce3ea2991255d66efeb0a">Eigen::internal::TensorBlockMapper::TensorBlockMapper</a></div><div class="ttdeci">TensorBlockMapper(const DSizes&lt; IndexType, NumDims &gt; &amp;dimensions, const TensorBlockResourceRequirements &amp;requirements)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:354</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockMapper_html_a55d59205aa759a6a09d983d0da972415"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockMapper.html#a55d59205aa759a6a09d983d0da972415">Eigen::internal::TensorBlockMapper::blockCount</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE IndexType blockCount() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:361</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockMapper_html_ab1fccf3cf2405dd787192efa88884559"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab1fccf3cf2405dd787192efa88884559">Eigen::internal::TensorBlockMapper::Dimensions</a></div><div class="ttdeci">DSizes&lt; IndexType, NumDims &gt; Dimensions</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:351</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockMapper_html_ab608fa4a0164c82f35e7142dc766b437"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab608fa4a0164c82f35e7142dc766b437">Eigen::internal::TensorBlockMapper::TensorBlockMapper</a></div><div class="ttdeci">TensorBlockMapper()=default</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockMapper_html_ab740d683f57662751c42ba522121c8f1"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockMapper.html#ab740d683f57662751c42ba522121c8f1">Eigen::internal::TensorBlockMapper::blockTotalSize</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE IndexType blockTotalSize() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:365</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockMapper_html_afd53a52193236e8096f9f2e912a9807a"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockMapper.html#afd53a52193236e8096f9f2e912a9807a">Eigen::internal::TensorBlockMapper::blockDescriptor</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE BlockDescriptor blockDescriptor(IndexType block_index) const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:375</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockNotImplemented_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockNotImplemented.html">Eigen::internal::TensorBlockNotImplemented</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:617</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockNotImplemented_html_a0e8e3ce2354260713cb3e954dc8c9e11"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockNotImplemented.html#a0e8e3ce2354260713cb3e954dc8c9e11">Eigen::internal::TensorBlockNotImplemented::XprType</a></div><div class="ttdeci">void XprType</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:619</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockScratchAllocator_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html">Eigen::internal::TensorBlockScratchAllocator</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:525</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockScratchAllocator_html_a185d786522c5544a7d0df226550f4561"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#a185d786522c5544a7d0df226550f4561">Eigen::internal::TensorBlockScratchAllocator::allocate</a></div><div class="ttdeci">void * allocate(size_t size)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:536</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockScratchAllocator_html_a7268f8d404084ddebb6bac735a54690e"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#a7268f8d404084ddebb6bac735a54690e">Eigen::internal::TensorBlockScratchAllocator::~TensorBlockScratchAllocator</a></div><div class="ttdeci">~TensorBlockScratchAllocator()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:530</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockScratchAllocator_html_acd8c640849755c780d81026114a84307"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#acd8c640849755c780d81026114a84307">Eigen::internal::TensorBlockScratchAllocator::TensorBlockScratchAllocator</a></div><div class="ttdeci">TensorBlockScratchAllocator(const Device &amp;device)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:527</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorBlockScratchAllocator_html_ad6be75c9647956be001485a15c341035"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorBlockScratchAllocator.html#ad6be75c9647956be001485a15c341035">Eigen::internal::TensorBlockScratchAllocator::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:572</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseBinaryBlock_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html">Eigen::internal::TensorCwiseBinaryBlock</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:866</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseBinaryBlock_html_a0e821e06afce74b7d408e01381dee515"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a0e821e06afce74b7d408e01381dee515">Eigen::internal::TensorCwiseBinaryBlock::Scalar</a></div><div class="ttdeci">XprScalar&lt; XprType &gt;::type Scalar</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:878</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseBinaryBlock_html_a1713545d427df172f2074afbcfbba686"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a1713545d427df172f2074afbcfbba686">Eigen::internal::TensorCwiseBinaryBlock::TensorCwiseBinaryBlock</a></div><div class="ttdeci">TensorCwiseBinaryBlock(const LhsTensorBlock &amp;left_block, const RhsTensorBlock &amp;right_block, const BinaryOp &amp;functor)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:880</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseBinaryBlock_html_a1a387ce2b21b23f2edcd9648123e7923"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a1a387ce2b21b23f2edcd9648123e7923">Eigen::internal::TensorCwiseBinaryBlock::kind</a></div><div class="ttdeci">TensorBlockKind kind() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:887</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseBinaryBlock_html_a388efe0b53d1cc2ded06f6d719858d7b"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a388efe0b53d1cc2ded06f6d719858d7b">Eigen::internal::TensorCwiseBinaryBlock::expr</a></div><div class="ttdeci">XprType expr() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:889</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseBinaryBlock_html_a76e159651c01aa3bdda5d0834bdc9e29"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a76e159651c01aa3bdda5d0834bdc9e29">Eigen::internal::TensorCwiseBinaryBlock::cleanup</a></div><div class="ttdeci">void cleanup()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:895</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseBinaryBlock_html_a936ac97c99abc1531ec4ae2fbc7c39ac"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#a936ac97c99abc1531ec4ae2fbc7c39ac">Eigen::internal::TensorCwiseBinaryBlock::data</a></div><div class="ttdeci">const Scalar * data() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:893</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseBinaryBlock_html_ab0eafaae4c3ac22417542f2209cb9ccc"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseBinaryBlock.html#ab0eafaae4c3ac22417542f2209cb9ccc">Eigen::internal::TensorCwiseBinaryBlock::XprType</a></div><div class="ttdeci">conditional&lt; NoArgBlockAccess, void, TensorCwiseBinaryOp&lt; BinaryOp, const typename LhsTensorBlock::XprType, const typename RhsTensorBlock::XprType &gt; &gt;::type XprType</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:876</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseUnaryBlock_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html">Eigen::internal::TensorCwiseUnaryBlock</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:835</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseUnaryBlock_html_a3c47131b880d8b520963d58365a29ba9"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a3c47131b880d8b520963d58365a29ba9">Eigen::internal::TensorCwiseUnaryBlock::Scalar</a></div><div class="ttdeci">XprScalar&lt; XprType &gt;::type Scalar</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:845</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseUnaryBlock_html_a57ad42f1e4929ee99e0f9206384bcf6e"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a57ad42f1e4929ee99e0f9206384bcf6e">Eigen::internal::TensorCwiseUnaryBlock::TensorCwiseUnaryBlock</a></div><div class="ttdeci">TensorCwiseUnaryBlock(const ArgTensorBlock &amp;arg_block, const UnaryOp &amp;functor)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:847</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseUnaryBlock_html_a6108e90a8e8acc754f67663c1f1fbc79"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#a6108e90a8e8acc754f67663c1f1fbc79">Eigen::internal::TensorCwiseUnaryBlock::XprType</a></div><div class="ttdeci">conditional&lt; NoArgBlockAccess, void, TensorCwiseUnaryOp&lt; UnaryOp, const typename ArgTensorBlock::XprType &gt; &gt;::type XprType</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:843</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseUnaryBlock_html_ac3be82467362f3078b3231e56b1df7a3"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#ac3be82467362f3078b3231e56b1df7a3">Eigen::internal::TensorCwiseUnaryBlock::cleanup</a></div><div class="ttdeci">void cleanup()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:854</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseUnaryBlock_html_acbda0ae896bb91a286b3bb855d5d2563"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#acbda0ae896bb91a286b3bb855d5d2563">Eigen::internal::TensorCwiseUnaryBlock::data</a></div><div class="ttdeci">const Scalar * data() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:853</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseUnaryBlock_html_ad7c990bd89549d1b96765ec83097b649"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#ad7c990bd89549d1b96765ec83097b649">Eigen::internal::TensorCwiseUnaryBlock::kind</a></div><div class="ttdeci">TensorBlockKind kind() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:850</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorCwiseUnaryBlock_html_af4807056750b95490191ad22a718f2b2"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorCwiseUnaryBlock.html#af4807056750b95490191ad22a718f2b2">Eigen::internal::TensorCwiseUnaryBlock::expr</a></div><div class="ttdeci">XprType expr() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:852</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorLazyEvaluatorWritable_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorLazyEvaluatorWritable.html">Eigen::internal::TensorLazyEvaluatorWritable</a></div><div class="ttdef"><b>Definition:</b> TensorRef.h:81</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html">Eigen::internal::TensorMaterializedBlock::Storage</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:694</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage_html_a45777db05fa2a1a4fc633ea40ed9b9e1"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#a45777db05fa2a1a4fc633ea40ed9b9e1">Eigen::internal::TensorMaterializedBlock::Storage::AsTensorMaterializedBlock</a></div><div class="ttdeci">TensorMaterializedBlock AsTensorMaterializedBlock() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:700</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage_html_a5940929c98f9422770b65aade7aa20f7"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#a5940929c98f9422770b65aade7aa20f7">Eigen::internal::TensorMaterializedBlock::Storage::TensorMaterializedBlock</a></div><div class="ttdeci">friend class TensorMaterializedBlock</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:709</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage_html_aa59c35d0ac01ca7a8f9c5ba4b2e362fd"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#aa59c35d0ac01ca7a8f9c5ba4b2e362fd">Eigen::internal::TensorMaterializedBlock::Storage::data</a></div><div class="ttdeci">Scalar * data() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:696</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage_html_af7f51765c3e5ed2fca9a2a444047b2d9"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#af7f51765c3e5ed2fca9a2a444047b2d9">Eigen::internal::TensorMaterializedBlock::Storage::strides</a></div><div class="ttdeci">const Dimensions &amp; strides() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:698</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage_html_affdc2d021d46d306f973c561e87c6d35"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock_1_1Storage.html#affdc2d021d46d306f973c561e87c6d35">Eigen::internal::TensorMaterializedBlock::Storage::dimensions</a></div><div class="ttdeci">const Dimensions &amp; dimensions() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:697</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html">Eigen::internal::TensorMaterializedBlock</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:656</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_a11a75b6c267b92d5def380e14003ec53"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a11a75b6c267b92d5def380e14003ec53">Eigen::internal::TensorMaterializedBlock::TensorMaterializedBlock</a></div><div class="ttdeci">TensorMaterializedBlock(TensorBlockKind kind, const Scalar *data, const Dimensions &amp;dimensions, bool valid_expr=true)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:661</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_a28f1d13d562525c80214efbfe02b1faf"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a28f1d13d562525c80214efbfe02b1faf">Eigen::internal::TensorMaterializedBlock::materialize</a></div><div class="ttdeci">static EIGEN_STRONG_INLINE TensorMaterializedBlock materialize(const Scalar *data, const DataDimensions &amp;data_dims, TensorBlockDesc &amp;desc, TensorBlockScratch &amp;scratch)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:762</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_a2fab74c37ff0ac88ca605600d453d65d"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a2fab74c37ff0ac88ca605600d453d65d">Eigen::internal::TensorMaterializedBlock::data</a></div><div class="ttdeci">const Scalar * data() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:681</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_a39f30b65a8f7156ff9d3a120104a2b60"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a39f30b65a8f7156ff9d3a120104a2b60">Eigen::internal::TensorMaterializedBlock::expr</a></div><div class="ttdeci">const XprType &amp; expr() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:677</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_a41110cf737c9b69b65e96ad86c82706f"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a41110cf737c9b69b65e96ad86c82706f">Eigen::internal::TensorMaterializedBlock::kind</a></div><div class="ttdeci">TensorBlockKind kind() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:673</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_a5709458a007b8c05e77842981b731535"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#a5709458a007b8c05e77842981b731535">Eigen::internal::TensorMaterializedBlock::prepareStorage</a></div><div class="ttdeci">static EIGEN_STRONG_INLINE Storage prepareStorage(TensorBlockDesc &amp;desc, TensorBlockScratch &amp;scratch, bool allow_strided_storage=false)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:730</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_acc64f9a71608566299847d2a34576647"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#acc64f9a71608566299847d2a34576647">Eigen::internal::TensorMaterializedBlock::TensorBlockDesc</a></div><div class="ttdeci">internal::TensorBlockDescriptor&lt; NumDims, IndexType &gt; TensorBlockDesc</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:684</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_acfa1c6985f1937b6b752cf08949f8784"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#acfa1c6985f1937b6b752cf08949f8784">Eigen::internal::TensorMaterializedBlock::Dimensions</a></div><div class="ttdeci">DSizes&lt; IndexType, NumDims &gt; Dimensions</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:658</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_adfcae699fdac72f35fb6fd3a6d7c9182"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#adfcae699fdac72f35fb6fd3a6d7c9182">Eigen::internal::TensorMaterializedBlock::XprType</a></div><div class="ttdeci">TensorMap&lt; const Tensor&lt; Scalar, NumDims, Layout &gt; &gt; XprType</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:659</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorMaterializedBlock_html_afbaf016c3620e52e420ed8aeede311b6"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorMaterializedBlock.html#afbaf016c3620e52e420ed8aeede311b6">Eigen::internal::TensorMaterializedBlock::cleanup</a></div><div class="ttdeci">void cleanup()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:682</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorTernaryExprBlock_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html">Eigen::internal::TensorTernaryExprBlock</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:943</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorTernaryExprBlock_html_a0ec59ca1bf9a9cedbeeb68a480351842"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a0ec59ca1bf9a9cedbeeb68a480351842">Eigen::internal::TensorTernaryExprBlock::expr</a></div><div class="ttdeci">XprType expr() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:970</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorTernaryExprBlock_html_a22474925e1b25d8a6d7fb3b1e26206c7"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a22474925e1b25d8a6d7fb3b1e26206c7">Eigen::internal::TensorTernaryExprBlock::kind</a></div><div class="ttdeci">TensorBlockKind kind() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:969</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorTernaryExprBlock_html_a4d0f32996f30e129f5606dc592459375"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a4d0f32996f30e129f5606dc592459375">Eigen::internal::TensorTernaryExprBlock::TensorTernaryExprBlock</a></div><div class="ttdeci">TensorTernaryExprBlock(const Arg1TensorBlock &amp;arg1_block, const Arg2TensorBlock &amp;arg2_block, const Arg3TensorBlock &amp;arg3_block, const BlockFactory &amp;factory)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:960</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorTernaryExprBlock_html_a6b59f69e296b7cfa50a39f9f1213d867"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a6b59f69e296b7cfa50a39f9f1213d867">Eigen::internal::TensorTernaryExprBlock::data</a></div><div class="ttdeci">const Scalar * data() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:974</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorTernaryExprBlock_html_a9482ec337c87df960b06b9df8ee85b7e"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#a9482ec337c87df960b06b9df8ee85b7e">Eigen::internal::TensorTernaryExprBlock::XprType</a></div><div class="ttdeci">conditional&lt; NoArgBlockAccess, void, typename BlockFactory::template XprType&lt; Arg1XprType, Arg2XprType, Arg3XprType &gt;::type &gt;::type XprType</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:956</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorTernaryExprBlock_html_ac442fe7c52f18aea51b66a568685a1f0"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#ac442fe7c52f18aea51b66a568685a1f0">Eigen::internal::TensorTernaryExprBlock::Scalar</a></div><div class="ttdeci">XprScalar&lt; XprType &gt;::type Scalar</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:958</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorTernaryExprBlock_html_acf9515d1f5386c07e11c6f9f6056e075"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorTernaryExprBlock.html#acf9515d1f5386c07e11c6f9f6056e075">Eigen::internal::TensorTernaryExprBlock::cleanup</a></div><div class="ttdeci">void cleanup()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:975</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorUnaryExprBlock_html"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html">Eigen::internal::TensorUnaryExprBlock</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:912</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorUnaryExprBlock_html_a18e6ecac42ef41cadc1974362b3e5b04"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a18e6ecac42ef41cadc1974362b3e5b04">Eigen::internal::TensorUnaryExprBlock::TensorUnaryExprBlock</a></div><div class="ttdeci">TensorUnaryExprBlock(const ArgTensorBlock &amp;arg_block, const BlockFactory &amp;factory)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:923</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorUnaryExprBlock_html_a2701bb673318d25879b0db4c96da7d1d"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a2701bb673318d25879b0db4c96da7d1d">Eigen::internal::TensorUnaryExprBlock::expr</a></div><div class="ttdeci">XprType expr() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:928</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorUnaryExprBlock_html_a628b141cf4d6c11ff72ef22afebb8994"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a628b141cf4d6c11ff72ef22afebb8994">Eigen::internal::TensorUnaryExprBlock::Scalar</a></div><div class="ttdeci">XprScalar&lt; XprType &gt;::type Scalar</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:921</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorUnaryExprBlock_html_a6973c71dfcbc99c9d6c2b30a6586d29b"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a6973c71dfcbc99c9d6c2b30a6586d29b">Eigen::internal::TensorUnaryExprBlock::cleanup</a></div><div class="ttdeci">void cleanup()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:930</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorUnaryExprBlock_html_a8bb5b2fee0acd014629e8404fce3552c"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a8bb5b2fee0acd014629e8404fce3552c">Eigen::internal::TensorUnaryExprBlock::XprType</a></div><div class="ttdeci">conditional&lt; NoArgBlockAccess, void, typename BlockFactory::template XprType&lt; ArgXprType &gt;::type &gt;::type XprType</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:919</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorUnaryExprBlock_html_a9d94ce05a62af7a4bd228fabf3fb6475"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#a9d94ce05a62af7a4bd228fabf3fb6475">Eigen::internal::TensorUnaryExprBlock::data</a></div><div class="ttdeci">const Scalar * data() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:929</div></div>
<div class="ttc" id="aclassEigen_1_1internal_1_1TensorUnaryExprBlock_html_afec16f645a34ae318ce83b76c31edd05"><div class="ttname"><a href="classEigen_1_1internal_1_1TensorUnaryExprBlock.html#afec16f645a34ae318ce83b76c31edd05">Eigen::internal::TensorUnaryExprBlock::kind</a></div><div class="ttdeci">TensorBlockKind kind() const</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:927</div></div>
<div class="ttc" id="adense__solvers_8cpp_html_a3988aae35d2c3c4258c27d72f221c707"><div class="ttname"><a href="dense__solvers_8cpp.html#a3988aae35d2c3c4258c27d72f221c707">sizes</a></div><div class="ttdeci">std::vector&lt; Array2i &gt; sizes</div><div class="ttdef"><b>Definition:</b> dense_solvers.cpp:12</div></div>
<div class="ttc" id="agnuplot__common__settings_8hh_html_a855fbae0ff7d592163aaf60fd0b22f71"><div class="ttname"><a href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a></div><div class="ttdeci">set noclip points set clip one set noclip two set bar set border lt lw set xdata set ydata set zdata set x2data set y2data set boxwidth set dummy y set format x g set format y g set format x2 g set format y2 g set format z g set angles radians set nogrid set key title set key left top Right noreverse box linetype linewidth samplen spacing width set nolabel set noarrow set nologscale set logscale x set set pointsize set encoding default set nopolar set noparametric set set set set surface set nocontour set clabel set mapping cartesian set nohidden3d set cntrparam order set cntrparam linear set cntrparam levels auto set cntrparam points set size set set xzeroaxis lt lw set x2zeroaxis lt lw set yzeroaxis lt lw set y2zeroaxis lt lw set tics in set ticslevel set tics set mxtics default set mytics default set mx2tics default set my2tics default set xtics border mirror norotate autofreq set ytics border mirror norotate autofreq set ztics border nomirror norotate autofreq set nox2tics set noy2tics set timestamp bottom norotate offset</div><div class="ttdef"><b>Definition:</b> gnuplot_common_settings.hh:64</div></div>
<div class="ttc" id="agroup__enums_html_ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62"><div class="ttname"><a href="group__enums.html#ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62">Eigen::ColMajor</a></div><div class="ttdeci">@ ColMajor</div><div class="ttdef"><b>Definition:</b> Constants.h:319</div></div>
<div class="ttc" id="alevel1__cplx__impl_8h_html_a462761ca92ad97a9a705cb875828b0b8"><div class="ttname"><a href="level1__cplx__impl_8h.html#a462761ca92ad97a9a705cb875828b0b8">s</a></div><div class="ttdeci">RealScalar s</div><div class="ttdef"><b>Definition:</b> level1_cplx_impl.h:126</div></div>
<div class="ttc" id="anamespaceEigen_1_1Architecture_html_ae54c092bdb3a978b9aa8cc50dcafc13cabc74b8591881b6f1d2c17bd0799362e7"><div class="ttname"><a href="namespaceEigen_1_1Architecture.html#ae54c092bdb3a978b9aa8cc50dcafc13cabc74b8591881b6f1d2c17bd0799362e7">Eigen::Architecture::Target</a></div><div class="ttdeci">@ Target</div><div class="ttdef"><b>Definition:</b> Constants.h:492</div></div>
<div class="ttc" id="anamespaceEigen_1_1bfloat16__impl_html_aadf08601dbe94964a06487ba453a0436"><div class="ttname"><a href="namespaceEigen_1_1bfloat16__impl.html#aadf08601dbe94964a06487ba453a0436">Eigen::bfloat16_impl::pow</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC bfloat16 pow(const bfloat16 &amp;a, const bfloat16 &amp;b)</div><div class="ttdef"><b>Definition:</b> BFloat16.h:514</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_a3368ad2fe1e9bf12c1f1f767733bfcb8"><div class="ttname"><a href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8">Eigen::internal::TensorBlockKind</a></div><div class="ttdeci">TensorBlockKind</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:589</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_a3368ad2fe1e9bf12c1f1f767733bfcb8a0b0a79f3695a20ad5ccaaa175bcedc63"><div class="ttname"><a href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a0b0a79f3695a20ad5ccaaa175bcedc63">Eigen::internal::kMaterializedInOutput</a></div><div class="ttdeci">@ kMaterializedInOutput</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:610</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_a3368ad2fe1e9bf12c1f1f767733bfcb8a393f3571f83b599927b69e2478118de3"><div class="ttname"><a href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8a393f3571f83b599927b69e2478118de3">Eigen::internal::kMaterializedInScratch</a></div><div class="ttdeci">@ kMaterializedInScratch</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:601</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_a3368ad2fe1e9bf12c1f1f767733bfcb8ad9cdef4654e3f9c6e2129aac107fa635"><div class="ttname"><a href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8ad9cdef4654e3f9c6e2129aac107fa635">Eigen::internal::kView</a></div><div class="ttdeci">@ kView</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:596</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_a3368ad2fe1e9bf12c1f1f767733bfcb8adc8c4fe70ac3f3ce28a1fc78a1db58b7"><div class="ttname"><a href="namespaceEigen_1_1internal.html#a3368ad2fe1e9bf12c1f1f767733bfcb8adc8c4fe70ac3f3ce28a1fc78a1db58b7">Eigen::internal::kExpr</a></div><div class="ttdeci">@ kExpr</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:592</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_a3b99e338d92a91c8b3f89d32d0ca2c39"><div class="ttname"><a href="namespaceEigen_1_1internal.html#a3b99e338d92a91c8b3f89d32d0ca2c39">Eigen::internal::array_prod</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE std::ptrdiff_t array_prod(const Sizes&lt; Indices... &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> TensorDimensions.h:140</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_aa3c1588240009c3c17b3e477512b2ffd"><div class="ttname"><a href="namespaceEigen_1_1internal.html#aa3c1588240009c3c17b3e477512b2ffd">Eigen::internal::size</a></div><div class="ttdeci">EIGEN_CONSTEXPR Index size(const T &amp;x)</div><div class="ttdef"><b>Definition:</b> Meta.h:479</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_abda5e0a6f1da0d958feddc1da712167b"><div class="ttname"><a href="namespaceEigen_1_1internal.html#abda5e0a6f1da0d958feddc1da712167b">Eigen::internal::strides</a></div><div class="ttdeci">EIGEN_ALWAYS_INLINE DSizes&lt; IndexType, NumDims &gt; strides(const DSizes&lt; IndexType, NumDims &gt; &amp;dimensions)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:26</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_af8b5cefcff8749f792756a379a17941d"><div class="ttname"><a href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941d">Eigen::internal::TensorBlockShapeType</a></div><div class="ttdeci">TensorBlockShapeType</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:73</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_af8b5cefcff8749f792756a379a17941da7cb0f57bf813fcb63ae4bd2d81f37672"><div class="ttname"><a href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941da7cb0f57bf813fcb63ae4bd2d81f37672">Eigen::internal::TensorBlockShapeType::kUniformAllDims</a></div><div class="ttdeci">@ kUniformAllDims</div></div>
<div class="ttc" id="anamespaceEigen_1_1internal_html_af8b5cefcff8749f792756a379a17941daeaeafd3133ead02c0e0ffd56f2401a47"><div class="ttname"><a href="namespaceEigen_1_1internal.html#af8b5cefcff8749f792756a379a17941daeaeafd3133ead02c0e0ffd56f2401a47">Eigen::internal::TensorBlockShapeType::kSkewedInnerDims</a></div><div class="ttdeci">@ kSkewedInnerDims</div></div>
<div class="ttc" id="anamespaceEigen_1_1numext_html_a29d502349f2ec9897c808e65e0f96eb4"><div class="ttname"><a href="namespaceEigen_1_1numext.html#a29d502349f2ec9897c808e65e0f96eb4">Eigen::numext::maxi</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_ALWAYS_INLINE T maxi(const T &amp;x, const T &amp;y)</div><div class="ttdef"><b>Definition:</b> MathFunctions.h:1091</div></div>
<div class="ttc" id="anamespaceEigen_1_1numext_html_ab3b30bf0bcfa1ad91dbec75fabb3bea0"><div class="ttname"><a href="namespaceEigen_1_1numext.html#ab3b30bf0bcfa1ad91dbec75fabb3bea0">Eigen::numext::mini</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_ALWAYS_INLINE T mini(const T &amp;x, const T &amp;y)</div><div class="ttdef"><b>Definition:</b> MathFunctions.h:1083</div></div>
<div class="ttc" id="anamespaceEigen_html"><div class="ttname"><a href="namespaceEigen.html">Eigen</a></div><div class="ttdoc">Namespace containing all symbols from the Eigen library.</div><div class="ttdef"><b>Definition:</b> bench_norm.cpp:85</div></div>
<div class="ttc" id="anamespaceEigen_html_a0dcc94ba428bad798d2087b2bde597f7"><div class="ttname"><a href="namespaceEigen.html#a0dcc94ba428bad798d2087b2bde597f7">Eigen::dimensions_match</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_ALWAYS_INLINE bool dimensions_match(Dims1 dims1, Dims2 dims2)</div><div class="ttdef"><b>Definition:</b> TensorDimensions.h:484</div></div>
<div class="ttc" id="anamespaceEigen_html_a13ec9832931270b80961236d30f6d2e3"><div class="ttname"><a href="namespaceEigen.html#a13ec9832931270b80961236d30f6d2e3">Eigen::divup</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_ALWAYS_INLINE T divup(const X x, const Y y)</div><div class="ttdef"><b>Definition:</b> TensorMeta.h:30</div></div>
<div class="ttc" id="anamespaceEigen_html_a62e77e0933482dafde8fe197d9a2cfde"><div class="ttname"><a href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Eigen::Index</a></div><div class="ttdeci">EIGEN_DEFAULT_DENSE_INDEX_TYPE Index</div><div class="ttdoc">The Index type as used for the API.</div><div class="ttdef"><b>Definition:</b> Meta.h:74</div></div>
<div class="ttc" id="anamespaceinternal_html"><div class="ttname"><a href="namespaceinternal.html">internal</a></div><div class="ttdef"><b>Definition:</b> BandTriangularSolver.h:13</div></div>
<div class="ttc" id="anestbyvalue_8cpp_html_a5aefae852e88ada71d9dfc8da1fc33bf"><div class="ttname"><a href="nestbyvalue_8cpp.html#a5aefae852e88ada71d9dfc8da1fc33bf">XprType</a></div><div class="ttdeci">CwiseBinaryOp&lt; internal::scalar_sum_op&lt; double, double &gt;, const CpyMatrixXd, const CpyMatrixXd &gt; XprType</div><div class="ttdef"><b>Definition:</b> nestbyvalue.cpp:15</div></div>
<div class="ttc" id="aref__serial_8h_html_a20302e2c99a60d3f612dba57e3f6333b"><div class="ttname"><a href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a></div><div class="ttdeci">uint8_t count</div><div class="ttdef"><b>Definition:</b> ref_serial.h:294</div></div>
<div class="ttc" id="asparse__permutations_8cpp_html_ad87822100feba90851ac71ba08fce30b"><div class="ttname"><a href="sparse__permutations_8cpp.html#ad87822100feba90851ac71ba08fce30b">eval</a></div><div class="ttdeci">internal::nested_eval&lt; T, 1 &gt;::type eval(const T &amp;xpr)</div><div class="ttdef"><b>Definition:</b> sparse_permutations.cpp:38</div></div>
<div class="ttc" id="astructEigen_1_1DSizes_html"><div class="ttname"><a href="structEigen_1_1DSizes.html">Eigen::DSizes&lt; IndexType, NumDims &gt;</a></div></div>
<div class="ttc" id="astructEigen_1_1DSizes_html_aaa880c9fd53051ef158094e1e529e1f0"><div class="ttname"><a href="structEigen_1_1DSizes.html#aaa880c9fd53051ef158094e1e529e1f0">Eigen::DSizes::TotalSize</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE DenseIndex TotalSize() const</div><div class="ttdef"><b>Definition:</b> TensorDimensions.h:271</div></div>
<div class="ttc" id="astructEigen_1_1DSizes_html_ab4c9d5b27ab311e394a886e5bb99f35a"><div class="ttname"><a href="structEigen_1_1DSizes.html#ab4c9d5b27ab311e394a886e5bb99f35a">Eigen::DSizes::rank</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE Index rank() const</div><div class="ttdef"><b>Definition:</b> TensorDimensions.h:267</div></div>
<div class="ttc" id="astructEigen_1_1DefaultDevice_html"><div class="ttname"><a href="structEigen_1_1DefaultDevice.html">Eigen::DefaultDevice</a></div><div class="ttdef"><b>Definition:</b> TensorDeviceDefault.h:17</div></div>
<div class="ttc" id="astructEigen_1_1Sizes_html"><div class="ttname"><a href="structEigen_1_1Sizes.html">Eigen::Sizes</a></div><div class="ttdef"><b>Definition:</b> TensorDimensions.h:93</div></div>
<div class="ttc" id="astructEigen_1_1TensorEvaluator_html"><div class="ttname"><a href="structEigen_1_1TensorEvaluator.html">Eigen::TensorEvaluator</a></div><div class="ttdoc">A cost model used to limit the number of threads used for evaluating tensor expression.</div><div class="ttdef"><b>Definition:</b> TensorEvaluator.h:29</div></div>
<div class="ttc" id="astructEigen_1_1TensorEvaluator_html_a925912780a06c71e1c156c6752dc7fdda82e9bfc6394867187050ca7e4619cdf1"><div class="ttname"><a href="structEigen_1_1TensorEvaluator.html#a925912780a06c71e1c156c6752dc7fdda82e9bfc6394867187050ca7e4619cdf1">Eigen::TensorEvaluator::PacketAccess</a></div><div class="ttdeci">@ PacketAccess</div><div class="ttdef"><b>Definition:</b> TensorEvaluator.h:47</div></div>
<div class="ttc" id="astructEigen_1_1TensorEvaluator_html_a925912780a06c71e1c156c6752dc7fddaaea01fe7598d6c1941853b693ec9f162"><div class="ttname"><a href="structEigen_1_1TensorEvaluator.html#a925912780a06c71e1c156c6752dc7fddaaea01fe7598d6c1941853b693ec9f162">Eigen::TensorEvaluator::Layout</a></div><div class="ttdeci">@ Layout</div><div class="ttdef"><b>Definition:</b> TensorEvaluator.h:50</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst_html"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html">Eigen::internal::StridedLinearBufferCopy::Dst</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1011</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst_html_a48c69187bf11579bf9ad3d4e018e63fe"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a48c69187bf11579bf9ad3d4e018e63fe">Eigen::internal::StridedLinearBufferCopy::Dst::Dst</a></div><div class="ttdeci">Dst(IndexType o, IndexType s, Scalar *d)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1012</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst_html_a4ac11f2f8e2166afd97a63de17780175"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a4ac11f2f8e2166afd97a63de17780175">Eigen::internal::StridedLinearBufferCopy::Dst::offset</a></div><div class="ttdeci">IndexType offset</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1014</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst_html_a6447195ed25a0959265a78c7411a92ec"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6447195ed25a0959265a78c7411a92ec">Eigen::internal::StridedLinearBufferCopy::Dst::data</a></div><div class="ttdeci">Scalar * data</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1016</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst_html_a6fa92dc5ced9b852ea836771812ff3bb"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Dst.html#a6fa92dc5ced9b852ea836771812ff3bb">Eigen::internal::StridedLinearBufferCopy::Dst::stride</a></div><div class="ttdeci">IndexType stride</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1015</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src_html"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html">Eigen::internal::StridedLinearBufferCopy::Src</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1019</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src_html_a5b9aa24464388b6160cf4f5f42e192f0"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#a5b9aa24464388b6160cf4f5f42e192f0">Eigen::internal::StridedLinearBufferCopy::Src::data</a></div><div class="ttdeci">const Scalar * data</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1025</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src_html_a7ffa309f5d6e9cbc0119119a142fb39a"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#a7ffa309f5d6e9cbc0119119a142fb39a">Eigen::internal::StridedLinearBufferCopy::Src::Src</a></div><div class="ttdeci">Src(IndexType o, IndexType s, const Scalar *d)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1020</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src_html_ab145d541c9d6cbfbf677189eb5e8e221"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#ab145d541c9d6cbfbf677189eb5e8e221">Eigen::internal::StridedLinearBufferCopy::Src::offset</a></div><div class="ttdeci">IndexType offset</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1023</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src_html_af1fcd08fd276f0c258d82e68dda767ba"><div class="ttname"><a href="structEigen_1_1internal_1_1StridedLinearBufferCopy_1_1Src.html#af1fcd08fd276f0c258d82e68dda767ba">Eigen::internal::StridedLinearBufferCopy::Src::stride</a></div><div class="ttdeci">IndexType stride</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1024</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockAssignment_1_1Target_html"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html">Eigen::internal::TensorBlockAssignment::Target</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1435</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockAssignment_1_1Target_html_a17495ac58643954fe08dc2a4935e7229"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a17495ac58643954fe08dc2a4935e7229">Eigen::internal::TensorBlockAssignment::Target::strides</a></div><div class="ttdeci">Dimensions strides</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1444</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockAssignment_1_1Target_html_a37492345dcc1500e9c1a5b40de95533b"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a37492345dcc1500e9c1a5b40de95533b">Eigen::internal::TensorBlockAssignment::Target::dims</a></div><div class="ttdeci">Dimensions dims</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1443</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockAssignment_1_1Target_html_a999830b58a5d678f64b3eb48f9d3d77f"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#a999830b58a5d678f64b3eb48f9d3d77f">Eigen::internal::TensorBlockAssignment::Target::data</a></div><div class="ttdeci">Scalar * data</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1445</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockAssignment_1_1Target_html_ab30d4678b03ff13c4d0cdab341d2543f"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#ab30d4678b03ff13c4d0cdab341d2543f">Eigen::internal::TensorBlockAssignment::Target::Target</a></div><div class="ttdeci">Target(const Dimensions &amp;target_dims, const Dimensions &amp;target_strides, Scalar *target_data, IndexType target_offset=0)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1436</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockAssignment_1_1Target_html_abc9c7d9aa7a698fcbfc92fd65a9af8cd"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockAssignment_1_1Target.html#abc9c7d9aa7a698fcbfc92fd65a9af8cd">Eigen::internal::TensorBlockAssignment::Target::offset</a></div><div class="ttdeci">IndexType offset</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1446</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Dst_html"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html">Eigen::internal::TensorBlockIO::Dst</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1152</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Dst_html_a4d5ff8d4eb9d4bbac43511114251136d"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a4d5ff8d4eb9d4bbac43511114251136d">Eigen::internal::TensorBlockIO::Dst::offset</a></div><div class="ttdeci">IndexType offset</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1160</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Dst_html_a99e3a5453a68da58738cfc48113b9601"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#a99e3a5453a68da58738cfc48113b9601">Eigen::internal::TensorBlockIO::Dst::strides</a></div><div class="ttdeci">Dimensions strides</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1158</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Dst_html_ac796ea360382528424e2b50d09d18e65"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ac796ea360382528424e2b50d09d18e65">Eigen::internal::TensorBlockIO::Dst::dims</a></div><div class="ttdeci">Dimensions dims</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1157</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Dst_html_ae7ef092fab329a8598a3c9710401454f"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#ae7ef092fab329a8598a3c9710401454f">Eigen::internal::TensorBlockIO::Dst::data</a></div><div class="ttdeci">Scalar * data</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1159</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Dst_html_aeb8a61469d7fc663f2192e1c3971a143"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Dst.html#aeb8a61469d7fc663f2192e1c3971a143">Eigen::internal::TensorBlockIO::Dst::Dst</a></div><div class="ttdeci">Dst(const Dimensions &amp;dst_dims, const Dimensions &amp;dst_strides, Scalar *dst, IndexType dst_offset=0)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1153</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Src_html"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html">Eigen::internal::TensorBlockIO::Src</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1163</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Src_html_a5174e9b125a61f2156bb0f97dc20c151"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a5174e9b125a61f2156bb0f97dc20c151">Eigen::internal::TensorBlockIO::Src::data</a></div><div class="ttdeci">const Scalar * data</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1169</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Src_html_a6e7a522304fc7465449a868299fdcef5"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a6e7a522304fc7465449a868299fdcef5">Eigen::internal::TensorBlockIO::Src::strides</a></div><div class="ttdeci">Dimensions strides</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1168</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Src_html_a7be585e5b9c1d2e1d3a9703286ad6ec8"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#a7be585e5b9c1d2e1d3a9703286ad6ec8">Eigen::internal::TensorBlockIO::Src::offset</a></div><div class="ttdeci">IndexType offset</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1170</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockIO_1_1Src_html_ade5df73afe7a91432eea047ca821da80"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockIO_1_1Src.html#ade5df73afe7a91432eea047ca821da80">Eigen::internal::TensorBlockIO::Src::Src</a></div><div class="ttdeci">Src(const Dimensions &amp;src_strides, const Scalar *src, IndexType src_offset=0)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:1164</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html">Eigen::internal::TensorBlockResourceRequirements</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:75</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_a1340b3e87af81081429e0bb1779dd970"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a1340b3e87af81081429e0bb1779dd970">Eigen::internal::TensorBlockResourceRequirements::addCostPerCoeff</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC TensorBlockResourceRequirements &amp; addCostPerCoeff(TensorOpCost cost)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:145</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_a4ceb88ac7cc926bc50cd46a570903721"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a4ceb88ac7cc926bc50cd46a570903721">Eigen::internal::TensorBlockResourceRequirements::withShapeAndSize</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC TensorBlockResourceRequirements withShapeAndSize(TensorBlockShapeType shape_type, size_t size_in_bytes)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:100</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_a5296ef45736ae165150e886da1190c26"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a5296ef45736ae165150e886da1190c26">Eigen::internal::TensorBlockResourceRequirements::withShapeAndSize</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC TensorBlockResourceRequirements withShapeAndSize(TensorBlockShapeType shape_type, size_t size_in_bytes, TensorOpCost cost)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:92</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_a636f7a3d1d332d6a8c1833c27d4f6cd9"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a636f7a3d1d332d6a8c1833c27d4f6cd9">Eigen::internal::TensorBlockResourceRequirements::skewed</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC TensorBlockResourceRequirements skewed(size_t size_in_bytes)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:123</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_a8a5ae7f46e67679dffc4a94eed61fc43"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a8a5ae7f46e67679dffc4a94eed61fc43">Eigen::internal::TensorBlockResourceRequirements::any</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE TensorBlockResourceRequirements any()</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:155</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_a9222a177f35b7f4ffeda380409b6ad9b"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9222a177f35b7f4ffeda380409b6ad9b">Eigen::internal::TensorBlockResourceRequirements::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:77</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_a93330d19dc8f0b6946892ec9631af524"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a93330d19dc8f0b6946892ec9631af524">Eigen::internal::TensorBlockResourceRequirements::merge</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE TensorBlockResourceRequirements merge(const TensorBlockResourceRequirements &amp;lhs, const TensorBlockResourceRequirements &amp;rhs)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:138</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_a9f58ddfb29853a07e1b454b42d1afc29"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#a9f58ddfb29853a07e1b454b42d1afc29">Eigen::internal::TensorBlockResourceRequirements::uniform</a></div><div class="ttdeci">static EIGEN_DEVICE_FUNC TensorBlockResourceRequirements uniform(size_t size_in_bytes)</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:130</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_ab30180b31f9d530f1f580d4709f8e4a0"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab30180b31f9d530f1f580d4709f8e4a0">Eigen::internal::TensorBlockResourceRequirements::cost_per_coeff</a></div><div class="ttdeci">TensorOpCost cost_per_coeff</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:78</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1TensorBlockResourceRequirements_html_ab9ec777dfae8b80991da086a4d96493a"><div class="ttname"><a href="structEigen_1_1internal_1_1TensorBlockResourceRequirements.html#ab9ec777dfae8b80991da086a4d96493a">Eigen::internal::TensorBlockResourceRequirements::shape_type</a></div><div class="ttdeci">TensorBlockShapeType shape_type</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:76</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1XprScalar_3_01void_01_4_html_add32bf8f49481e81ed31ee5fa49fc14b"><div class="ttname"><a href="structEigen_1_1internal_1_1XprScalar_3_01void_01_4.html#add32bf8f49481e81ed31ee5fa49fc14b">Eigen::internal::XprScalar&lt; void &gt;::type</a></div><div class="ttdeci">void type</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:633</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1XprScalar_html"><div class="ttname"><a href="structEigen_1_1internal_1_1XprScalar.html">Eigen::internal::XprScalar</a></div><div class="ttdef"><b>Definition:</b> TensorBlock.h:628</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1XprScalar_html_a5fff9f58106ea14bc0855091d5d07f5f"><div class="ttname"><a href="structEigen_1_1internal_1_1XprScalar.html#a5fff9f58106ea14bc0855091d5d07f5f">Eigen::internal::XprScalar::type</a></div><div class="ttdeci">XprType::Scalar type</div><div class="ttdef"><b>Definition:</b> TensorBlock.h:629</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1array__size_html"><div class="ttname"><a href="structEigen_1_1internal_1_1array__size.html">Eigen::internal::array_size</a></div><div class="ttdef"><b>Definition:</b> Meta.h:445</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1conditional_html"><div class="ttname"><a href="structEigen_1_1internal_1_1conditional.html">Eigen::internal::conditional</a></div><div class="ttdef"><b>Definition:</b> Meta.h:109</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1eval_html"><div class="ttname"><a href="structEigen_1_1internal_1_1eval.html">Eigen::internal::eval</a></div><div class="ttdef"><b>Definition:</b> XprHelper.h:332</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1is__void_html"><div class="ttname"><a href="structEigen_1_1internal_1_1is__void.html">Eigen::internal::is_void</a></div><div class="ttdef"><b>Definition:</b> Meta.h:152</div></div>
<div class="ttc" id="astructEigen_1_1internal_1_1packet__traits_html"><div class="ttname"><a href="structEigen_1_1internal_1_1packet__traits.html">Eigen::internal::packet_traits</a></div><div class="ttdef"><b>Definition:</b> GenericPacketMath.h:107</div></div>
<div class="ttc" id="atut__arithmetic__redux__minmax_8cpp_html_a39513f0f8d942bf9ef17b2e87ac6d34e"><div class="ttname"><a href="tut__arithmetic__redux__minmax_8cpp.html#a39513f0f8d942bf9ef17b2e87ac6d34e">j</a></div><div class="ttdeci">std::ptrdiff_t j</div><div class="ttdef"><b>Definition:</b> tut_arithmetic_redux_minmax.cpp:2</div></div>
<div class="ttc" id="aunionEigen_1_1internal_1_1Packet_html"><div class="ttname"><a href="unionEigen_1_1internal_1_1Packet.html">Eigen::internal::Packet</a></div><div class="ttdef"><b>Definition:</b> PacketMath.h:47</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
