<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TR-mbed: core/util/algorithms/eigen-3.4.0/Eigen/src/Core/arch/SYCL/SyclMemoryModel.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TR-mbed
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li><li class="navelem"><a class="el" href="dir_459a7c9a427a2877b0db19c6b8d6e89d.html">util</a></li><li class="navelem"><a class="el" href="dir_2b91f87ecc8d5a52d8144fa162b6316d.html">algorithms</a></li><li class="navelem"><a class="el" href="dir_d26f9082d1b630c8fa4b82ce9b6be008.html">eigen-3.4.0</a></li><li class="navelem"><a class="el" href="dir_2db0027d82cbf4df3a553d443d05d16f.html">Eigen</a></li><li class="navelem"><a class="el" href="dir_2da3edace14031da0b2fd98f019d46df.html">src</a></li><li class="navelem"><a class="el" href="dir_39ad8e00ae1d33a75de9f64562431a9f.html">Core</a></li><li class="navelem"><a class="el" href="dir_e4277f8bcedb0688f1efaa4ee85773b2.html">arch</a></li><li class="navelem"><a class="el" href="dir_58268212c970efbd6b62c38b301fb5c2.html">SYCL</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SyclMemoryModel.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SyclMemoryModel_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *  Copyright (C) 2017 Codeplay Software Limited</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  This Source Code Form is subject to the terms of the Mozilla</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  Public License v. 2.0. If a copy of the MPL was not distributed</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  with this file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *  SyclMemoryModel.h</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *  Description:</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *    Interface for SYCL buffers to behave as a non-dereferenceable pointer</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *    Interface for Placeholder accessor to behave as a pointer on both host</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *    and device</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Authors:</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    Ruyman Reyes   Codeplay Software Ltd.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *    Mehdi Goli     Codeplay Software Ltd.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *    Vanya Yaneva   Codeplay Software Ltd.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> **************************************************************************/</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#if defined(EIGEN_USE_SYCL) &amp;&amp; \</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">    !defined(EIGEN_CXX11_TENSOR_TENSOR_SYCL_STORAGE_MEMORY_H)</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define EIGEN_CXX11_TENSOR_TENSOR_SYCL_STORAGE_MEMORY_H</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;CL/sycl.hpp&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#ifdef EIGEN_EXCEPTIONS</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceEigen.html">Eigen</a> {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">namespace </span>TensorSycl {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceinternal.html">internal</a> {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">using</span> sycl_acc_target = cl::sycl::access::target;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">using</span> sycl_acc_mode = cl::sycl::access::mode;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">using</span> buffer_data_type_t = <a class="code" href="namespaceEigen_1_1numext.html#a58c956967b2b3b326df2b220ae9b2274">uint8_t</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">const</span> sycl_acc_target default_acc_target = sycl_acc_target::global_buffer;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">const</span> sycl_acc_mode default_acc_mode = sycl_acc_mode::read_write;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">class </span>PointerMapper {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keyword">using</span> base_ptr_t = std::intptr_t;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">/* Structure of a virtual pointer</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">   *</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">   * |================================================|</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">   * |               POINTER ADDRESS                  |</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">   * |================================================|</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keyword">struct </span>virtual_pointer_t {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">/* Type for the pointers</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    base_ptr_t m_contents;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">operator</span> <span class="keywordtype">void</span> *() <span class="keyword">const</span> { <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span> *<span class="keyword">&gt;</span>(m_contents); }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">operator</span> base_ptr_t()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_contents; }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    virtual_pointer_t <a class="code" href="namespaceEigen.html#ace833e9164de024e7c73ca411c7aff92">operator+</a>(<span class="keywordtype">size_t</span> off) { <span class="keywordflow">return</span> m_contents + off; }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">/* Numerical order for sorting pointers in containers. */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="benchmark-blocking-sizes_8cpp.html#aab3658d6538ea515da2375731017d53b">operator&lt;</a>(virtual_pointer_t rhs)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">static_cast&lt;</span>base_ptr_t<span class="keyword">&gt;</span>(m_contents) &lt;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;              <span class="keyword">static_cast&lt;</span>base_ptr_t<span class="keyword">&gt;</span>(rhs.m_contents));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespaceEigen_1_1bfloat16__impl.html#ac5b64c0874252d5d4b123a59a10b819a">operator&gt;</a>(virtual_pointer_t rhs)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">static_cast&lt;</span>base_ptr_t<span class="keyword">&gt;</span>(m_contents) &gt;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;              <span class="keyword">static_cast&lt;</span>base_ptr_t<span class="keyword">&gt;</span>(rhs.m_contents));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespaceEigen.html#a78a75cc4b4fa5e0084f67f80ac854159">operator==</a>(virtual_pointer_t rhs)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">static_cast&lt;</span>base_ptr_t<span class="keyword">&gt;</span>(m_contents) ==</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;              <span class="keyword">static_cast&lt;</span>base_ptr_t<span class="keyword">&gt;</span>(rhs.m_contents));</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespaceEigen.html#ac38ad3798bd16a29798c2fc2d2dbe095">operator!=</a>(virtual_pointer_t rhs)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">return</span> !(this-&gt;<a class="code" href="namespaceEigen.html#a78a75cc4b4fa5e0084f67f80ac854159">operator==</a>(rhs));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    virtual_pointer_t(<span class="keyword">const</span> <span class="keywordtype">void</span> *ptr)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        : m_contents(reinterpret_cast&lt;base_ptr_t&gt;(ptr)){};</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    virtual_pointer_t(base_ptr_t u) : m_contents(u){};</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  };</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">/* Definition of a null pointer</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">const</span> virtual_pointer_t null_virtual_ptr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> is_nullptr(virtual_pointer_t ptr) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span> *<span class="keyword">&gt;</span>(ptr) == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">/* basic type for all buffers</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">using</span> buffer_t = cl::sycl::buffer_mem;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keyword">struct </span>pMapNode_t {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    buffer_t m_buffer;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">size_t</span> m_size;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">bool</span> m_free;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    pMapNode_t(buffer_t <a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>, <span class="keywordtype">size_t</span> <a class="code" href="benchVecAdd_8cpp.html#acc017e1f28bf1b83809251a830f315c3">size</a>, <span class="keywordtype">bool</span> f)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        : m_buffer{<a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>}, m_size{<a class="code" href="benchVecAdd_8cpp.html#acc017e1f28bf1b83809251a830f315c3">size</a>}, m_free{f} {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      m_buffer.set_final_data(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespaceEigen_1_1bfloat16__impl.html#ade393b7acf30f289f3878e4ac3d3f13b">operator&lt;=</a>(<span class="keyword">const</span> pMapNode_t &amp;rhs) { <span class="keywordflow">return</span> (m_size &lt;= rhs.m_size); }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  };</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keyword">using</span> pointerMap_t = std::map&lt;virtual_pointer_t, pMapNode_t&gt;;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keyword">typename</span> pointerMap_t::iterator get_insertion_point(<span class="keywordtype">size_t</span> requiredSize) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">typename</span> pointerMap_t::iterator retVal;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">bool</span> reuse = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (!m_freeList.empty()) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="comment">// try to re-use an existing block</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> freeElem : m_freeList) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> (freeElem-&gt;second.m_size &gt;= requiredSize) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          retVal = freeElem;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          reuse = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="comment">// Element is not going to be free anymore</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          m_freeList.erase(freeElem);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (!reuse) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      retVal = std::prev(m_pointerMap.end());</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> retVal;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keyword">typename</span> pointerMap_t::iterator get_node(<span class="keyword">const</span> virtual_pointer_t ptr) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>() == 0) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      m_pointerMap.clear();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="Macros_8h.html#affd73ff76188dafd9367852f91d0ce42">EIGEN_THROW_X</a>(std::out_of_range(<span class="stringliteral">&quot;There are no pointers allocated\n&quot;</span>));</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (is_nullptr(ptr)) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      m_pointerMap.clear();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="Macros_8h.html#affd73ff76188dafd9367852f91d0ce42">EIGEN_THROW_X</a>(std::out_of_range(<span class="stringliteral">&quot;Cannot access null pointer\n&quot;</span>));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// The previous element to the lower bound is the node that</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// holds this memory address</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">auto</span> node = m_pointerMap.lower_bound(ptr);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// If the value of the pointer is not the one of the node</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// then we return the previous one</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (node == std::end(m_pointerMap)) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      --node;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (node-&gt;first != ptr) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">if</span> (node == std::begin(m_pointerMap)) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        m_pointerMap.clear();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="Macros_8h.html#affd73ff76188dafd9367852f91d0ce42">EIGEN_THROW_X</a>(</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            std::out_of_range(<span class="stringliteral">&quot;The pointer is not registered in the map\n&quot;</span>));</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      --node;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> node;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">/* get_buffer.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">   * Returns a buffer from the map using the pointer address</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> buffer_data_type = buffer_data_type_t&gt;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  cl::sycl::buffer&lt;buffer_data_type, 1&gt; get_buffer(</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keyword">const</span> virtual_pointer_t ptr) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">using</span> sycl_buffer_t = cl::sycl::buffer&lt;buffer_data_type, 1&gt;;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">// get_node() returns a `buffer_mem`, so we need to cast it to a `buffer&lt;&gt;`.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// We can do this without the `buffer_mem` being a pointer, as we</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// only declare member variables in the base class (`buffer_mem`) and not in</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// the child class (`buffer&lt;&gt;).</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keyword">auto</span> node = get_node(ptr);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(node-&gt;first == ptr || node-&gt;first &lt; ptr);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(ptr &lt; <span class="keyword">static_cast&lt;</span>virtual_pointer_t<span class="keyword">&gt;</span>(node-&gt;second.m_size +</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                                      node-&gt;first));</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> *(<span class="keyword">static_cast&lt;</span>sycl_buffer_t *<span class="keyword">&gt;</span>(&amp;node-&gt;second.m_buffer));</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keyword">template</span> &lt;sycl_acc_mode access_mode = default_acc_mode,</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            sycl_acc_target access_target = default_acc_target,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keyword">typename</span> buffer_data_type = buffer_data_type_t&gt;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  cl::sycl::accessor&lt;buffer_data_type, 1, access_mode, access_target&gt;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  get_access(<span class="keyword">const</span> virtual_pointer_t ptr) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">auto</span> buf = get_buffer&lt;buffer_data_type&gt;(ptr);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> buf.template get_access&lt;access_mode, access_target&gt;();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keyword">template</span> &lt;sycl_acc_mode access_mode = default_acc_mode,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            sycl_acc_target access_target = default_acc_target,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keyword">typename</span> buffer_data_type = buffer_data_type_t&gt;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  cl::sycl::accessor&lt;buffer_data_type, 1, access_mode, access_target&gt;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  get_access(<span class="keyword">const</span> virtual_pointer_t ptr, cl::sycl::handler &amp;cgh) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">auto</span> buf = get_buffer&lt;buffer_data_type&gt;(ptr);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> buf.template get_access&lt;access_mode, access_target&gt;(cgh);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">   * Returns the offset from the base address of this pointer.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keyword">inline</span> std::ptrdiff_t get_offset(<span class="keyword">const</span> virtual_pointer_t ptr) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// The previous element to the lower bound is the node that</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// holds this memory address</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">auto</span> node = get_node(ptr);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keyword">auto</span> start = node-&gt;first;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(start == ptr || start &lt; ptr);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a>(ptr &lt; start + node-&gt;<a class="code" href="second__NONE_8f.html#ae9f971a8b343bd2fcb85c3b16da97f10">second</a>.m_size);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">return</span> (ptr - start);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">   * Returns the number of elements by which the given pointer is offset from</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">   * the base address.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> buffer_data_type&gt;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">size_t</span> get_element_offset(<span class="keyword">const</span> virtual_pointer_t ptr) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> get_offset(ptr) / <span class="keyword">sizeof</span>(buffer_data_type);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  PointerMapper(base_ptr_t baseAddress = 4096)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      : m_pointerMap{}, m_freeList{}, m_baseAddress{baseAddress} {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (m_baseAddress == 0) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <a class="code" href="Macros_8h.html#affd73ff76188dafd9367852f91d0ce42">EIGEN_THROW_X</a>(std::invalid_argument(<span class="stringliteral">&quot;Base address cannot be zero\n&quot;</span>));</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  };</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  PointerMapper(<span class="keyword">const</span> PointerMapper &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> clear() {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    m_freeList.clear();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    m_pointerMap.clear();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">/* add_pointer.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">   * Adds an existing pointer to the map and returns the virtual pointer id.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">inline</span> virtual_pointer_t add_pointer(<span class="keyword">const</span> buffer_t &amp;<a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> add_pointer_impl(<a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">/* add_pointer.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">   * Adds a pointer to the map and returns the virtual pointer id.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keyword">inline</span> virtual_pointer_t add_pointer(buffer_t &amp;&amp;<a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> add_pointer_impl(<a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordtype">void</span> fuse_forward(<span class="keyword">typename</span> pointerMap_t::iterator &amp;node) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">while</span> (node != std::prev(m_pointerMap.end())) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="comment">// if following node is free</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">// remove it and extend the current node with its size</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keyword">auto</span> fwd_node = std::next(node);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">if</span> (!fwd_node-&gt;second.m_free) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keyword">auto</span> fwd_size = fwd_node-&gt;second.m_size;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      m_freeList.erase(fwd_node);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      m_pointerMap.erase(fwd_node);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      node-&gt;second.m_size += fwd_size;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordtype">void</span> fuse_backward(<span class="keyword">typename</span> pointerMap_t::iterator &amp;node) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">while</span> (node != m_pointerMap.begin()) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="comment">// if previous node is free, extend it</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="comment">// with the size of the current one</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keyword">auto</span> prev_node = std::prev(node);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">if</span> (!prev_node-&gt;second.m_free) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      prev_node-&gt;second.m_size += node-&gt;second.m_size;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">// remove the current node</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      m_freeList.erase(node);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      m_pointerMap.erase(node);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="comment">// point to the previous node</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      node = prev_node;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">/* remove_pointer.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">   * Removes the given pointer from the map.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">   * The pointer is allowed to be reused only if ReUse if true.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">bool</span> ReUse = true&gt;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordtype">void</span> remove_pointer(<span class="keyword">const</span> virtual_pointer_t ptr) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (is_nullptr(ptr)) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keyword">auto</span> node = this-&gt;get_node(ptr);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    node-&gt;second.m_free = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    m_freeList.emplace(node);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// Fuse the node</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// with free nodes before and after it</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    fuse_forward(node);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    fuse_backward(node);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// If after fusing the node is the last one</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// simply remove it (since it is free)</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">if</span> (node == std::prev(m_pointerMap.end())) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      m_freeList.erase(node);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      m_pointerMap.erase(node);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">/* count.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">   * Return the number of active pointers (i.e, pointers that</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">   * have been malloc but not freed).</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (m_pointerMap.size() - m_freeList.size()); }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">/* add_pointer_impl.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">   * Adds a pointer to the map and returns the virtual pointer id.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">   * BufferT is either a const buffer_t&amp; or a buffer_t&amp;&amp;.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class</span> BufferT&gt;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  virtual_pointer_t add_pointer_impl(BufferT <a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    virtual_pointer_t retVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordtype">size_t</span> bufSize = <a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>.get_count();</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    pMapNode_t <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>{<a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>, bufSize, <span class="keyword">false</span>};</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// If this is the first pointer:</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> (m_pointerMap.empty()) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      virtual_pointer_t initialVal{m_baseAddress};</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      m_pointerMap.emplace(initialVal, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">return</span> initialVal;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keyword">auto</span> lastElemIter = get_insertion_point(bufSize);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// We are recovering an existing free node</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (lastElemIter-&gt;second.m_free) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      lastElemIter-&gt;second.m_buffer = <a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      lastElemIter-&gt;second.m_free = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="comment">// If the recovered node is bigger than the inserted one</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="comment">// add a new free node with the remaining space</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">if</span> (lastElemIter-&gt;second.m_size &gt; bufSize) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">// create a new node with the remaining space</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keyword">auto</span> remainingSize = lastElemIter-&gt;second.m_size - bufSize;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        pMapNode_t p2{<a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>, remainingSize, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// update size of the current node</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        lastElemIter-&gt;second.m_size = bufSize;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">// add the new free node</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keyword">auto</span> newFreePtr = lastElemIter-&gt;first + bufSize;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keyword">auto</span> freeNode = m_pointerMap.emplace(newFreePtr, p2).first;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        m_freeList.emplace(freeNode);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      retVal = lastElemIter-&gt;first;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordtype">size_t</span> lastSize = lastElemIter-&gt;second.m_size;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      retVal = lastElemIter-&gt;first + lastSize;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      m_pointerMap.emplace(retVal, <a class="code" href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">return</span> retVal;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keyword">struct </span>SortBySize {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="IndexedViewMethods_8h.html#ab9334310fcc41ade942722cc85a87d74">operator()</a>(<span class="keyword">typename</span> pointerMap_t::iterator <a class="code" href="Array__initializer__list__23__cxx11_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    <span class="keyword">typename</span> pointerMap_t::iterator <a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">return</span> ((<a class="code" href="Array__initializer__list__23__cxx11_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>-&gt;first &lt; <a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>-&gt;first) &amp;&amp; (<a class="code" href="Array__initializer__list__23__cxx11_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>-&gt;second &lt;= <a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>-&gt;second)) ||</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;             ((<a class="code" href="Array__initializer__list__23__cxx11_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>-&gt;first &lt; <a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>-&gt;first) &amp;&amp; (<a class="code" href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a>-&gt;second &lt;= <a class="code" href="Array__initializer__list__23__cxx11_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a>-&gt;second));</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  };</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">/* Maps the pointer addresses to buffer and size pairs.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  pointerMap_t m_pointerMap;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">/* List of free nodes available for re-using</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  std::set&lt;typename pointerMap_t::iterator, SortBySize&gt; m_freeList;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">/* Base address used when issuing the first virtual pointer, allows users</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">   * to specify alignment. Cannot be zero. */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  std::intptr_t m_baseAddress;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;};</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">/* remove_pointer.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment"> * Removes the given pointer from the map.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"> * The pointer is allowed to be reused only if ReUse if true.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> PointerMapper::remove_pointer&lt;false&gt;(<span class="keyword">const</span> virtual_pointer_t ptr) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">if</span> (is_nullptr(ptr)) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  m_pointerMap.erase(this-&gt;get_node(ptr));</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> *SYCLmalloc(<span class="keywordtype">size_t</span> <a class="code" href="benchVecAdd_8cpp.html#acc017e1f28bf1b83809251a830f315c3">size</a>, PointerMapper &amp;pMap) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="benchVecAdd_8cpp.html#acc017e1f28bf1b83809251a830f315c3">size</a> == 0) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// Create a generic buffer of the given size</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keyword">using</span> buffer_t = cl::sycl::buffer&lt;buffer_data_type_t, 1&gt;;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keyword">auto</span> thePointer = pMap.add_pointer(buffer_t(cl::sycl::range&lt;1&gt;{<a class="code" href="benchVecAdd_8cpp.html#acc017e1f28bf1b83809251a830f315c3">size</a>}));</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Store the buffer on the global list</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span> *<span class="keyword">&gt;</span>(thePointer);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">bool</span> ReUse = true, <span class="keyword">typename</span> Po<span class="keywordtype">int</span>erMapper&gt;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> SYCLfree(<span class="keywordtype">void</span> *ptr, PointerMapper &amp;pMap) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  pMap.template remove_pointer&lt;ReUse&gt;(ptr);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Po<span class="keywordtype">int</span>erMapper&gt;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> SYCLfreeAll(PointerMapper &amp;pMap) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  pMap.clear();</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;}</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="keyword">template</span> &lt;cl::sycl::access::mode AcMd, <span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="keyword">struct </span>RangeAccess {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> global_access = cl::sycl::access::target::global_buffer;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">auto</span> is_place_holder = cl::sycl::access::placeholder::true_t;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classEigen_1_1Triplet.html">T</a> scalar_t;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keyword">typedef</span> scalar_t &amp;ref_t;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> cl::sycl::global_ptr&lt;scalar_t&gt;::pointer_t ptr_t;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// the accessor type does not necessarily the same as T</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keyword">typedef</span> cl::sycl::accessor&lt;scalar_t, 1, AcMd, global_access, is_place_holder&gt;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      accessor;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keyword">typedef</span> RangeAccess&lt;AcMd, T&gt; self_t;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> RangeAccess(accessor access,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                                    <span class="keywordtype">size_t</span> <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                                    std::intptr_t virtual_ptr)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      : access_(access), offset_(<a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>), virtual_ptr_(virtual_ptr) {}</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  RangeAccess(cl::sycl::buffer&lt;scalar_t, 1&gt; <a class="code" href="ref__serial_8cpp.html#ab98eb192adf03007dabffcde03c67ac0">buff</a> =</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                  cl::sycl::buffer&lt;scalar_t, 1&gt;(cl::sycl::range&lt;1&gt;(1)))</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      : access_{accessor{<a class="code" href="ref__serial_8cpp.html#ab98eb192adf03007dabffcde03c67ac0">buff</a>}}, offset_(0), virtual_ptr_(-1) {}</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// This should be only used for null constructor on the host side</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  RangeAccess(std::nullptr_t) : RangeAccess() {}</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// This template parameter must be removed and scalar_t should be replaced</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> ptr_t get_pointer()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">return</span> (access_.get_pointer().get() + offset_);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Index&gt;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> self_t &amp;<a class="code" href="namespaceEigen_1_1bfloat16__impl.html#af9f53f2875f1c8cf9ab2a750e15bf588">operator+=</a>(<a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    offset_ += (<a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Index&gt;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> self_t <a class="code" href="namespaceEigen.html#ace833e9164de024e7c73ca411c7aff92">operator+</a>(<a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">return</span> self_t(access_, offset_ + <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>, virtual_ptr_);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Index&gt;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> self_t <a class="code" href="namespaceEigen.html#ac68300b75c56dfbd0ca4031feb17daa9">operator-</a>(<a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> self_t(access_, offset_ - <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>, virtual_ptr_);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Index&gt;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> self_t &amp;<a class="code" href="namespaceEigen_1_1bfloat16__impl.html#a8b955a98bc895dc93cbaf8e36e51cee1">operator-=</a>(<a class="code" href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Index</a> <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    offset_ -= <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// THIS IS FOR NULL COMPARISON ONLY</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">friend</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceEigen.html#a78a75cc4b4fa5e0084f67f80ac854159">operator==</a>(</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keyword">const</span> RangeAccess &amp;lhs, std::nullptr_t) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span> ((lhs.virtual_ptr_ == -1));</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">friend</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceEigen.html#ac38ad3798bd16a29798c2fc2d2dbe095">operator!=</a>(</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keyword">const</span> RangeAccess &amp;lhs, std::nullptr_t <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">return</span> !(lhs == <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// THIS IS FOR NULL COMPARISON ONLY</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">friend</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceEigen.html#a78a75cc4b4fa5e0084f67f80ac854159">operator==</a>(</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      std::nullptr_t, <span class="keyword">const</span> RangeAccess &amp;rhs) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span> ((rhs.virtual_ptr_ == -1));</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">friend</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceEigen.html#ac38ad3798bd16a29798c2fc2d2dbe095">operator!=</a>(</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      std::nullptr_t <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keyword">const</span> RangeAccess &amp;rhs) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">return</span> !(<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> == rhs);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// Prefix operator (Increment and return value)</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> self_t &amp;<a class="code" href="namespaceEigen_1_1bfloat16__impl.html#aff7dfa2c21dfbc3a25b302fafea9bcce">operator++</a>() {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    offset_++;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">return</span> (*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// Postfix operator (Return value and increment)</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> self_t <a class="code" href="namespaceEigen_1_1bfloat16__impl.html#aff7dfa2c21dfbc3a25b302fafea9bcce">operator++</a>(<span class="keywordtype">int</span> <a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="Macros_8h.html#a7cf6d5b460def34dc4e6acf42889b6a9">EIGEN_UNUSED_VARIABLE</a>(<a class="code" href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    self_t temp_iterator(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    offset_++;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> temp_iterator;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> std::ptrdiff_t get_size()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> (access_.get_count() - offset_);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> std::ptrdiff_t get_offset()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">return</span> offset_;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keywordtype">void</span> set_offset(std::ptrdiff_t <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    offset_ = <a class="code" href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> ref_t <a class="code" href="namespaceEigen.html#a69ba8cc52f8bf3002015a37ec2eefbfd">operator*</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">return</span> *get_pointer();</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> ref_t <a class="code" href="namespaceEigen.html#a69ba8cc52f8bf3002015a37ec2eefbfd">operator*</a>() {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">return</span> *get_pointer();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> ptr_t operator-&gt;() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> ref_t operator[](<span class="keywordtype">int</span> <a class="code" href="gnuplot__common__settings_8hh.html#a5fd331c99e778f04762be6d8173eb4d2">x</a>) {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">return</span> *(get_pointer() + <a class="code" href="gnuplot__common__settings_8hh.html#a5fd331c99e778f04762be6d8173eb4d2">x</a>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> ref_t operator[](<span class="keywordtype">int</span> <a class="code" href="gnuplot__common__settings_8hh.html#a5fd331c99e778f04762be6d8173eb4d2">x</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> *(get_pointer() + <a class="code" href="gnuplot__common__settings_8hh.html#a5fd331c99e778f04762be6d8173eb4d2">x</a>);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> scalar_t *get_virtual_pointer()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>scalar_t *<span class="keyword">&gt;</span>(virtual_ptr_ +</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                                        (offset_ * <span class="keyword">sizeof</span>(scalar_t)));</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">explicit</span> <span class="keyword">operator</span> bool()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">return</span> (virtual_ptr_ != -1);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keyword">operator</span> RangeAccess&lt;AcMd, const T&gt;() {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">return</span> RangeAccess&lt;AcMd, const T&gt;(access_, offset_, virtual_ptr_);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keyword">operator</span> RangeAccess&lt;AcMd, const T&gt;()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">return</span> RangeAccess&lt;AcMd, const T&gt;(access_, offset_, virtual_ptr_);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// binding placeholder accessors to a command group handler for SYCL</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <a class="code" href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a> <a class="code" href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a> <span class="keywordtype">void</span> bind(</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      cl::sycl::handler &amp;cgh)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    cgh.require(access_);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  accessor access_;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordtype">size_t</span> offset_;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  std::intptr_t virtual_ptr_;  <span class="comment">// the location of the buffer in the map</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;};</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="keyword">template</span> &lt;cl::sycl::access::mode AcMd, <span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="keyword">struct </span>RangeAccess&lt;AcMd, const <a class="code" href="classEigen_1_1Triplet.html">T</a>&gt; : RangeAccess&lt;AcMd, T&gt; {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keyword">typedef</span> RangeAccess&lt;AcMd, T&gt; Base;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keyword">using</span> Base::Base;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;};</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}  <span class="comment">// namespace internal</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}  <span class="comment">// namespace TensorSycl</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}  <span class="comment">// namespace Eigen</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// EIGEN_CXX11_TENSOR_TENSOR_SYCL_STORAGE_MEMORY_H</span></div>
<div class="ttc" id="aArray__initializer__list__23__cxx11_8cpp_html_ad2cbe4616e813eb9af81732dca777b24"><div class="ttname"><a href="Array__initializer__list__23__cxx11_8cpp.html#ad2cbe4616e813eb9af81732dca777b24">a</a></div><div class="ttdeci">ArrayXXi a</div><div class="ttdef"><b>Definition:</b> Array_initializer_list_23_cxx11.cpp:1</div></div>
<div class="ttc" id="aBiCGSTAB__step__by__step_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="BiCGSTAB__step__by__step_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> BiCGSTAB_step_by_step.cpp:9</div></div>
<div class="ttc" id="aIndexedViewMethods_8h_html_ab9334310fcc41ade942722cc85a87d74"><div class="ttname"><a href="IndexedViewMethods_8h.html#ab9334310fcc41ade942722cc85a87d74">operator()</a></div><div class="ttdeci">internal::enable_if&lt; internal::valid_indexed_view_overload&lt; RowIndices, ColIndices &gt;::value &amp;&amp;internal::traits&lt; typename EIGEN_INDEXED_VIEW_METHOD_TYPE&lt; RowIndices, ColIndices &gt;::type &gt;::ReturnAsIndexedView, typename EIGEN_INDEXED_VIEW_METHOD_TYPE&lt; RowIndices, ColIndices &gt;::type &gt;::type operator()(const RowIndices &amp;rowIndices, const ColIndices &amp;colIndices) EIGEN_INDEXED_VIEW_METHOD_CONST</div><div class="ttdef"><b>Definition:</b> IndexedViewMethods.h:73</div></div>
<div class="ttc" id="aMacros_8h_html_a7cf6d5b460def34dc4e6acf42889b6a9"><div class="ttname"><a href="Macros_8h.html#a7cf6d5b460def34dc4e6acf42889b6a9">EIGEN_UNUSED_VARIABLE</a></div><div class="ttdeci">#define EIGEN_UNUSED_VARIABLE(var)</div><div class="ttdef"><b>Definition:</b> Macros.h:1076</div></div>
<div class="ttc" id="aMacros_8h_html_a9efec3cfd22b9a33bead9c6718d128da"><div class="ttname"><a href="Macros_8h.html#a9efec3cfd22b9a33bead9c6718d128da">EIGEN_DEVICE_FUNC</a></div><div class="ttdeci">#define EIGEN_DEVICE_FUNC</div><div class="ttdef"><b>Definition:</b> Macros.h:976</div></div>
<div class="ttc" id="aMacros_8h_html_acaa7ba89800cfe18d5fd6eed620aea9c"><div class="ttname"><a href="Macros_8h.html#acaa7ba89800cfe18d5fd6eed620aea9c">eigen_assert</a></div><div class="ttdeci">#define eigen_assert(x)</div><div class="ttdef"><b>Definition:</b> Macros.h:1037</div></div>
<div class="ttc" id="aMacros_8h_html_af2b60117c00a6e75812de43bfe7db3b1"><div class="ttname"><a href="Macros_8h.html#af2b60117c00a6e75812de43bfe7db3b1">EIGEN_STRONG_INLINE</a></div><div class="ttdeci">#define EIGEN_STRONG_INLINE</div><div class="ttdef"><b>Definition:</b> Macros.h:917</div></div>
<div class="ttc" id="aMacros_8h_html_affd73ff76188dafd9367852f91d0ce42"><div class="ttname"><a href="Macros_8h.html#affd73ff76188dafd9367852f91d0ce42">EIGEN_THROW_X</a></div><div class="ttdeci">#define EIGEN_THROW_X(X)</div><div class="ttdef"><b>Definition:</b> Macros.h:1403</div></div>
<div class="ttc" id="aTutorial__Map__using_8cpp_html_a7fe964f6b1afd4591f637999272ab9a2"><div class="ttname"><a href="Tutorial__Map__using_8cpp.html#a7fe964f6b1afd4591f637999272ab9a2">p</a></div><div class="ttdeci">float * p</div><div class="ttdef"><b>Definition:</b> Tutorial_Map_using.cpp:9</div></div>
<div class="ttc" id="abenchVecAdd_8cpp_html_a846c9667e34d56c560bb7f0ac6e173f6"><div class="ttname"><a href="benchVecAdd_8cpp.html#a846c9667e34d56c560bb7f0ac6e173f6">b</a></div><div class="ttdeci">Scalar * b</div><div class="ttdef"><b>Definition:</b> benchVecAdd.cpp:17</div></div>
<div class="ttc" id="abenchVecAdd_8cpp_html_acc017e1f28bf1b83809251a830f315c3"><div class="ttname"><a href="benchVecAdd_8cpp.html#acc017e1f28bf1b83809251a830f315c3">size</a></div><div class="ttdeci">Scalar Scalar int size</div><div class="ttdef"><b>Definition:</b> benchVecAdd.cpp:17</div></div>
<div class="ttc" id="abenchmark-blocking-sizes_8cpp_html_aab3658d6538ea515da2375731017d53b"><div class="ttname"><a href="benchmark-blocking-sizes_8cpp.html#aab3658d6538ea515da2375731017d53b">operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const benchmark_t &amp;b1, const benchmark_t &amp;b2)</div><div class="ttdef"><b>Definition:</b> benchmark-blocking-sizes.cpp:144</div></div>
<div class="ttc" id="aclassEigen_1_1Triplet_html"><div class="ttname"><a href="classEigen_1_1Triplet.html">Eigen::Triplet&lt; double &gt;</a></div></div>
<div class="ttc" id="agnuplot__common__settings_8hh_html_a5fd331c99e778f04762be6d8173eb4d2"><div class="ttname"><a href="gnuplot__common__settings_8hh.html#a5fd331c99e778f04762be6d8173eb4d2">x</a></div><div class="ttdeci">set noclip points set clip one set noclip two set bar set border lt lw set xdata set ydata set zdata set x2data set y2data set boxwidth set dummy x</div><div class="ttdef"><b>Definition:</b> gnuplot_common_settings.hh:12</div></div>
<div class="ttc" id="agnuplot__common__settings_8hh_html_a855fbae0ff7d592163aaf60fd0b22f71"><div class="ttname"><a href="gnuplot__common__settings_8hh.html#a855fbae0ff7d592163aaf60fd0b22f71">offset</a></div><div class="ttdeci">set noclip points set clip one set noclip two set bar set border lt lw set xdata set ydata set zdata set x2data set y2data set boxwidth set dummy y set format x g set format y g set format x2 g set format y2 g set format z g set angles radians set nogrid set key title set key left top Right noreverse box linetype linewidth samplen spacing width set nolabel set noarrow set nologscale set logscale x set set pointsize set encoding default set nopolar set noparametric set set set set surface set nocontour set clabel set mapping cartesian set nohidden3d set cntrparam order set cntrparam linear set cntrparam levels auto set cntrparam points set size set set xzeroaxis lt lw set x2zeroaxis lt lw set yzeroaxis lt lw set y2zeroaxis lt lw set tics in set ticslevel set tics set mxtics default set mytics default set mx2tics default set my2tics default set xtics border mirror norotate autofreq set ytics border mirror norotate autofreq set ztics border nomirror norotate autofreq set nox2tics set noy2tics set timestamp bottom norotate offset</div><div class="ttdef"><b>Definition:</b> gnuplot_common_settings.hh:64</div></div>
<div class="ttc" id="anamespaceEigen_1_1bfloat16__impl_html_a8b955a98bc895dc93cbaf8e36e51cee1"><div class="ttname"><a href="namespaceEigen_1_1bfloat16__impl.html#a8b955a98bc895dc93cbaf8e36e51cee1">Eigen::bfloat16_impl::operator-=</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC bfloat16 &amp; operator-=(bfloat16 &amp;a, const bfloat16 &amp;b)</div><div class="ttdef"><b>Definition:</b> BFloat16.h:192</div></div>
<div class="ttc" id="anamespaceEigen_1_1bfloat16__impl_html_ac5b64c0874252d5d4b123a59a10b819a"><div class="ttname"><a href="namespaceEigen_1_1bfloat16__impl.html#ac5b64c0874252d5d4b123a59a10b819a">Eigen::bfloat16_impl::operator&gt;</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC bool operator&gt;(const bfloat16 &amp;a, const bfloat16 &amp;b)</div><div class="ttdef"><b>Definition:</b> BFloat16.h:230</div></div>
<div class="ttc" id="anamespaceEigen_1_1bfloat16__impl_html_ade393b7acf30f289f3878e4ac3d3f13b"><div class="ttname"><a href="namespaceEigen_1_1bfloat16__impl.html#ade393b7acf30f289f3878e4ac3d3f13b">Eigen::bfloat16_impl::operator&lt;=</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC bool operator&lt;=(const bfloat16 &amp;a, const bfloat16 &amp;b)</div><div class="ttdef"><b>Definition:</b> BFloat16.h:227</div></div>
<div class="ttc" id="anamespaceEigen_1_1bfloat16__impl_html_af9f53f2875f1c8cf9ab2a750e15bf588"><div class="ttname"><a href="namespaceEigen_1_1bfloat16__impl.html#af9f53f2875f1c8cf9ab2a750e15bf588">Eigen::bfloat16_impl::operator+=</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC bfloat16 &amp; operator+=(bfloat16 &amp;a, const bfloat16 &amp;b)</div><div class="ttdef"><b>Definition:</b> BFloat16.h:184</div></div>
<div class="ttc" id="anamespaceEigen_1_1bfloat16__impl_html_aff7dfa2c21dfbc3a25b302fafea9bcce"><div class="ttname"><a href="namespaceEigen_1_1bfloat16__impl.html#aff7dfa2c21dfbc3a25b302fafea9bcce">Eigen::bfloat16_impl::operator++</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC bfloat16 operator++(bfloat16 &amp;a)</div><div class="ttdef"><b>Definition:</b> BFloat16.h:200</div></div>
<div class="ttc" id="anamespaceEigen_1_1numext_html_a58c956967b2b3b326df2b220ae9b2274"><div class="ttname"><a href="namespaceEigen_1_1numext.html#a58c956967b2b3b326df2b220ae9b2274">Eigen::numext::uint8_t</a></div><div class="ttdeci">::uint8_t uint8_t</div><div class="ttdef"><b>Definition:</b> Meta.h:52</div></div>
<div class="ttc" id="anamespaceEigen_html"><div class="ttname"><a href="namespaceEigen.html">Eigen</a></div><div class="ttdoc">Namespace containing all symbols from the Eigen library.</div><div class="ttdef"><b>Definition:</b> bench_norm.cpp:85</div></div>
<div class="ttc" id="anamespaceEigen_html_a62e77e0933482dafde8fe197d9a2cfde"><div class="ttname"><a href="namespaceEigen.html#a62e77e0933482dafde8fe197d9a2cfde">Eigen::Index</a></div><div class="ttdeci">EIGEN_DEFAULT_DENSE_INDEX_TYPE Index</div><div class="ttdoc">The Index type as used for the API.</div><div class="ttdef"><b>Definition:</b> Meta.h:74</div></div>
<div class="ttc" id="anamespaceEigen_html_a69ba8cc52f8bf3002015a37ec2eefbfd"><div class="ttname"><a href="namespaceEigen.html#a69ba8cc52f8bf3002015a37ec2eefbfd">Eigen::operator*</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const Product&lt; MatrixDerived, PermutationDerived, AliasFreeProduct &gt; operator*(const MatrixBase&lt; MatrixDerived &gt; &amp;matrix, const PermutationBase&lt; PermutationDerived &gt; &amp;permutation)</div><div class="ttdef"><b>Definition:</b> PermutationMatrix.h:515</div></div>
<div class="ttc" id="anamespaceEigen_html_a78a75cc4b4fa5e0084f67f80ac854159"><div class="ttname"><a href="namespaceEigen.html#a78a75cc4b4fa5e0084f67f80ac854159">Eigen::operator==</a></div><div class="ttdeci">EIGEN_CONSTEXPR EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE bool operator==(const Tuple&lt; U, V &gt; &amp;x, const Tuple&lt; U, V &gt; &amp;y)</div><div class="ttdef"><b>Definition:</b> TensorMeta.h:235</div></div>
<div class="ttc" id="anamespaceEigen_html_ac38ad3798bd16a29798c2fc2d2dbe095"><div class="ttname"><a href="namespaceEigen.html#ac38ad3798bd16a29798c2fc2d2dbe095">Eigen::operator!=</a></div><div class="ttdeci">EIGEN_CONSTEXPR EIGEN_DEVICE_FUNC EIGEN_STRONG_INLINE bool operator!=(const Tuple&lt; U, V &gt; &amp;x, const Tuple&lt; U, V &gt; &amp;y)</div><div class="ttdef"><b>Definition:</b> TensorMeta.h:241</div></div>
<div class="ttc" id="anamespaceEigen_html_ac68300b75c56dfbd0ca4031feb17daa9"><div class="ttname"><a href="namespaceEigen.html#ac68300b75c56dfbd0ca4031feb17daa9">Eigen::operator-</a></div><div class="ttdeci">EIGEN_STRONG_INLINE const CwiseBinaryOp&lt; internal::scalar_difference_op&lt; typename DenseDerived::Scalar, typename SparseDerived::Scalar &gt;, const DenseDerived, const SparseDerived &gt; operator-(const MatrixBase&lt; DenseDerived &gt; &amp;a, const SparseMatrixBase&lt; SparseDerived &gt; &amp;b)</div><div class="ttdef"><b>Definition:</b> SparseCwiseBinaryOp.h:708</div></div>
<div class="ttc" id="anamespaceEigen_html_ace833e9164de024e7c73ca411c7aff92"><div class="ttname"><a href="namespaceEigen.html#ace833e9164de024e7c73ca411c7aff92">Eigen::operator+</a></div><div class="ttdeci">EIGEN_STRONG_INLINE const CwiseBinaryOp&lt; internal::scalar_sum_op&lt; typename DenseDerived::Scalar, typename SparseDerived::Scalar &gt;, const DenseDerived, const SparseDerived &gt; operator+(const MatrixBase&lt; DenseDerived &gt; &amp;a, const SparseMatrixBase&lt; SparseDerived &gt; &amp;b)</div><div class="ttdef"><b>Definition:</b> SparseCwiseBinaryOp.h:694</div></div>
<div class="ttc" id="anamespaceinternal_html"><div class="ttname"><a href="namespaceinternal.html">internal</a></div><div class="ttdef"><b>Definition:</b> BandTriangularSolver.h:13</div></div>
<div class="ttc" id="aref__serial_8cpp_html_ab98eb192adf03007dabffcde03c67ac0"><div class="ttname"><a href="ref__serial_8cpp.html#ab98eb192adf03007dabffcde03c67ac0">buff</a></div><div class="ttdeci">buff_t buff</div><div class="ttdef"><b>Definition:</b> ref_serial.cpp:59</div></div>
<div class="ttc" id="aref__serial_8h_html_a20302e2c99a60d3f612dba57e3f6333b"><div class="ttname"><a href="ref__serial_8h.html#a20302e2c99a60d3f612dba57e3f6333b">count</a></div><div class="ttdeci">uint8_t count</div><div class="ttdef"><b>Definition:</b> ref_serial.h:294</div></div>
<div class="ttc" id="asecond__NONE_8f_html_ae9f971a8b343bd2fcb85c3b16da97f10"><div class="ttname"><a href="second__NONE_8f.html#ae9f971a8b343bd2fcb85c3b16da97f10">second</a></div><div class="ttdeci">real function second()</div><div class="ttdoc">SECOND returns nothing</div><div class="ttdef"><b>Definition:</b> second_NONE.f:39</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
