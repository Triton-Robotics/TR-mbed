<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TR-mbed: Using Intel® MKL from Eigen</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TR-mbed<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Eigen CI infrastructure</a></li><li class="navelem"><a class="el" href="UserManual_Generalities.html">General topics</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Using Intel® MKL from Eigen</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Since Eigen version 3.1 and later, users can benefit from built-in Intel® Math Kernel Library (MKL) optimizations with an installed copy of Intel MKL 10.3 (or later).</p>
<p><a href="http://eigen.tuxfamily.org/Counter/redirect_to_mkl.php">Intel MKL </a> provides highly optimized multi-threaded mathematical routines for x86-compatible architectures. Intel MKL is available on Linux, Mac and Windows for both Intel64 and IA32 architectures.</p>
<dl class="section note"><dt>Note</dt><dd>Intel® MKL is a proprietary software and it is the responsibility of users to buy or register for community (free) Intel MKL licenses for their products. Moreover, the license of the user product has to allow linking to proprietary software that excludes any unmodified versions of the GPL.</dd></dl>
<p>Using Intel MKL through Eigen is easy:</p><ol type="1">
<li>define the <code>EIGEN_USE_MKL_ALL</code> macro before including any Eigen's header</li>
<li>link your program to MKL libraries (see the <a href="http://software.intel.com/en-us/articles/intel-mkl-link-line-advisor/">MKL linking advisor</a>)</li>
<li>on a 64bits system, you must use the LP64 interface (not the ILP64 one)</li>
</ol>
<p>When doing so, a number of Eigen's algorithms are silently substituted with calls to Intel MKL routines. These substitutions apply only for <b>Dynamic</b> <b>or</b> <b>large</b> enough objects with one of the following four standard scalar types: <code>float</code>, <code>double</code>, <code>complex&lt;float&gt;</code>, and <code>complex&lt;double&gt;</code>. Operations on other scalar types or mixing reals and complexes will continue to use the built-in algorithms.</p>
<p>In addition you can choose which parts will be substituted by defining one or multiple of the following macros:</p>
<table class="manual">
<tr>
<td><code>EIGEN_USE_BLAS</code> </td><td>Enables the use of external BLAS level 2 and 3 routines </td></tr>
<tr class="alt">
<td><code>EIGEN_USE_LAPACKE</code> </td><td>Enables the use of external Lapack routines via the <a href="http://www.netlib.org/lapack/lapacke.html">Lapacke</a> C interface to Lapack </td></tr>
<tr>
<td><code>EIGEN_USE_LAPACKE_STRICT</code> </td><td>Same as <code>EIGEN_USE_LAPACKE</code> but algorithm of lower robustness are disabled. <br  />
 This currently concerns only <a class="el" href="classEigen_1_1JacobiSVD.html" title="Two-sided Jacobi SVD decomposition of a rectangular matrix.">JacobiSVD</a> which otherwise would be replaced by <code>gesvd</code> that is less robust than Jacobi rotations. </td></tr>
<tr class="alt">
<td><code>EIGEN_USE_MKL_VML</code> </td><td>Enables the use of Intel VML (vector operations) </td></tr>
<tr>
<td><code>EIGEN_USE_MKL_ALL</code> </td><td>Defines <code>EIGEN_USE_BLAS</code>, <code>EIGEN_USE_LAPACKE</code>, and <code>EIGEN_USE_MKL_VML</code>  </td></tr>
</table>
<p>The <code>EIGEN_USE_BLAS</code> and <code>EIGEN_USE_LAPACKE*</code> macros can be combined with <code>EIGEN_USE_MKL</code> to explicitly tell <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> that the underlying BLAS/Lapack implementation is Intel MKL. The main effect is to enable MKL direct call feature (<code>MKL_DIRECT_CALL</code>). This may help to increase performance of some MKL BLAS (?GEMM, ?GEMV, ?TRSM, ?AXPY and ?DOT) and LAPACK (LU, Cholesky and QR) routines for very small matrices. MKL direct call can be disabled by defining <code>EIGEN_MKL_NO_DIRECT_CALL</code>.</p>
<p>Note that the BLAS and LAPACKE backends can be enabled for any F77 compatible BLAS and LAPACK libraries. See this <a class="el" href="TopicUsingBlasLapack.html">page </a> for the details.</p>
<p>Finally, the PARDISO sparse solver shipped with Intel MKL can be used through the <a class="el" href="classEigen_1_1PardisoLU.html">PardisoLU</a>, <a class="el" href="classEigen_1_1PardisoLLT.html">PardisoLLT</a> and <a class="el" href="classEigen_1_1PardisoLDLT.html">PardisoLDLT</a> classes of the PardisoSupport_Module.</p>
<p>The following table summarizes the list of functions covered by <code>EIGEN_USE_MKL_VML:</code> </p><table class="manual">
<tr>
<th>Code example</th><th>MKL routines </th></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().sin();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().asin();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().cos();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().acos();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().tan();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().exp();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().log();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().sqrt();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().square();</div>
<div class="line"><a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a>=<a class="code hl_function" href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a>.array().pow(1.5);</div>
<div class="ttc" id="aTutorial__ReshapeMat2Vec_8cpp_html_a10bd710692c91bc238f2e1da77730678"><div class="ttname"><a href="Tutorial__ReshapeMat2Vec_8cpp.html#a10bd710692c91bc238f2e1da77730678">v1</a></div><div class="ttdeci">M1&lt;&lt; 1, 2, 3, 4, 5, 6, 7, 8, 9;Map&lt; RowVectorXf &gt; v1(M1.data(), M1.size())</div></div>
<div class="ttc" id="aTutorial__ReshapeMat2Vec_8cpp_html_a3eb30a79de469336df46f4f5f0bfb84f"><div class="ttname"><a href="Tutorial__ReshapeMat2Vec_8cpp.html#a3eb30a79de469336df46f4f5f0bfb84f">v2</a></div><div class="ttdeci">Map&lt; RowVectorXf &gt; v2(M2.data(), M2.size())</div></div>
</div><!-- fragment --></td><td><div class="fragment"><div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Sin</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Asin</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Cos</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Acos</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Tan</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Exp</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Ln</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Sqrt</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Sqr</div>
<div class="line"><a class="code hl_variable" href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a>?Powx</div>
<div class="ttc" id="aArray__initializer__list__vector__cxx11_8cpp_html_a32398b762ddd48fa3a6d504de68009f9"><div class="ttname"><a href="Array__initializer__list__vector__cxx11_8cpp.html#a32398b762ddd48fa3a6d504de68009f9">v</a></div><div class="ttdeci">Array&lt; int, Dynamic, 1 &gt; v</div><div class="ttdef"><b>Definition</b> Array_initializer_list_vector_cxx11.cpp:1</div></div>
</div><!-- fragment --> </td></tr>
</table>
<p>In the examples, v1 and v2 are dense vectors.</p>
<h1><a class="anchor" id="TopicUsingIntelMKL_Links"></a>
Links</h1>
<ul>
<li>Intel MKL can be purchased and downloaded <a href="http://eigen.tuxfamily.org/Counter/redirect_to_mkl.php">here</a>.</li>
<li>Intel MKL is also bundled with <a href="http://software.intel.com/en-us/articles/intel-composer-xe/">Intel Composer XE</a>. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
